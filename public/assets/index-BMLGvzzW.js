var en=Object.defineProperty;var nn=(n,t,e)=>t in n?en(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var m=(n,t,e)=>nn(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function x(){}const Gt=n=>n;function sn(n,t){for(const e in t)n[e]=t[e];return n}function Re(n){return n()}function ce(){return Object.create(null)}function K(n){n.forEach(Re)}function ht(n){return typeof n=="function"}function M(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function rn(n){return Object.keys(n).length===0}function on(n,...t){if(n==null){for(const s of t)s(void 0);return x}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function vt(n,t,e){n.$$.on_destroy.push(on(t,e))}function Dt(n,t,e,s){if(n){const i=Be(n,t,e,s);return n[0](i)}}function Be(n,t,e,s){return n[1]&&s?sn(e.ctx.slice(),n[1](s(t))):e.ctx}function Lt(n,t,e,s){if(n[2]&&s){const i=n[2](s(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|i[a];return r}return t.dirty|i}return t.dirty}function It(n,t,e,s,i,r){if(i){const o=Be(t,e,s,r);n.p(o,i)}}function qt(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function an(n){const t=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[n,"px"]}const Ne=typeof window<"u";let jt=Ne?()=>window.performance.now():()=>Date.now(),Kt=Ne?n=>requestAnimationFrame(n):x;const tt=new Set;function Pe(n){tt.forEach(t=>{t.c(n)||(tt.delete(t),t.f())}),tt.size!==0&&Kt(Pe)}function Jt(n){let t;return tt.size===0&&Kt(Pe),{promise:new Promise(e=>{tt.add(t={c:n,f:e})}),abort(){tt.delete(t)}}}function w(n,t){n.appendChild(t)}function De(n){if(!n)return document;const t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function cn(n){const t=C("style");return t.textContent="/* empty */",ln(De(n),t),t.sheet}function ln(n,t){return w(n.head||n,t),t.sheet}function E(n,t,e){n.insertBefore(t,e||null)}function k(n){n.parentNode&&n.parentNode.removeChild(n)}function C(n){return document.createElement(n)}function O(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function nt(n){return document.createTextNode(n)}function U(){return nt(" ")}function Xt(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function g(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function un(n){return Array.from(n.childNodes)}function Qt(n,t){t=""+t,n.data!==t&&(n.data=t)}function F(n,t,e){n.classList.toggle(t,!!e)}function Le(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}const kt=new Map;let Et=0;function hn(n){let t=5381,e=n.length;for(;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function fn(n,t){const e={stylesheet:cn(t),rules:{}};return kt.set(n,e),e}function St(n,t,e,s,i,r,o,a=0){const c=16.666/s;let l=`{
`;for(let T=0;T<=1;T+=c){const A=t+(e-t)*r(T);l+=T*100+`%{${o(A,1-A)}}
`}const u=l+`100% {${o(e,1-e)}}
}`,f=`__svelte_${hn(u)}_${a}`,h=De(n),{stylesheet:d,rules:p}=kt.get(h)||fn(h,n);p[f]||(p[f]=!0,d.insertRule(`@keyframes ${f} ${u}`,d.cssRules.length));const _=n.style.animation||"";return n.style.animation=`${_?`${_}, `:""}${f} ${s}ms linear ${i}ms 1 both`,Et+=1,f}function Ct(n,t){const e=(n.style.animation||"").split(", "),s=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=e.length-s.length;i&&(n.style.animation=s.join(", "),Et-=i,Et||pn())}function pn(){Kt(()=>{Et||(kt.forEach(n=>{const{ownerNode:t}=n.stylesheet;t&&k(t)}),kt.clear())})}let ut;function at(n){ut=n}function Ie(){if(!ut)throw new Error("Function called outside component initialization");return ut}function Zt(n){Ie().$$.on_mount.push(n)}function dn(){const n=Ie();return(t,e,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[t];if(i){const r=Le(t,e,{cancelable:s});return i.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function qe(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const Z=[],le=[];let et=[];const ue=[],mn=Promise.resolve();let Mt=!1;function gn(){Mt||(Mt=!0,mn.then(Me))}function P(n){et.push(n)}const $t=new Set;let X=0;function Me(){if(X!==0)return;const n=ut;do{try{for(;X<Z.length;){const t=Z[X];X++,at(t),yn(t.$$)}}catch(t){throw Z.length=0,X=0,t}for(at(null),Z.length=0,X=0;le.length;)le.pop()();for(let t=0;t<et.length;t+=1){const e=et[t];$t.has(e)||($t.add(e),e())}et.length=0}while(Z.length);for(;ue.length;)ue.pop()();Mt=!1,$t.clear(),at(n)}function yn(n){if(n.fragment!==null){n.update(),K(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(P)}}function _n(n){const t=[],e=[];et.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),et=t}let it;function te(){return it||(it=Promise.resolve(),it.then(()=>{it=null})),it}function G(n,t,e){n.dispatchEvent(Le(`${t?"intro":"outro"}${e}`))}const gt=new Set;let L;function ct(){L={r:0,c:[],p:L}}function lt(){L.r||K(L.c),L=L.p}function b(n,t){n&&n.i&&(gt.delete(n),n.i(t))}function v(n,t,e,s){if(n&&n.o){if(gt.has(n))return;gt.add(n),L.c.push(()=>{gt.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}else s&&s()}const ee={duration:0};function xt(n,t,e){const s={direction:"in"};let i=t(n,e,s),r=!1,o,a,c=0;function l(){o&&Ct(n,o)}function u(){const{delay:h=0,duration:d=300,easing:p=Gt,tick:_=x,css:T}=i||ee;T&&(o=St(n,0,1,d,h,p,T,c++)),_(0,1);const A=jt()+h,V=A+d;a&&a.abort(),r=!0,P(()=>G(n,!0,"start")),a=Jt(z=>{if(r){if(z>=V)return _(1,0),G(n,!0,"end"),l(),r=!1;if(z>=A){const J=p((z-A)/d);_(J,1-J)}}return r})}let f=!1;return{start(){f||(f=!0,Ct(n),ht(i)?(i=i(s),te().then(u)):u())},invalidate(){f=!1},end(){r&&(l(),r=!1)}}}function bn(n,t,e){const s={direction:"out"};let i=t(n,e,s),r=!0,o;const a=L;a.r+=1;let c;function l(){const{delay:u=0,duration:f=300,easing:h=Gt,tick:d=x,css:p}=i||ee;p&&(o=St(n,1,0,f,u,h,p));const _=jt()+u,T=_+f;P(()=>G(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),Jt(A=>{if(r){if(A>=T)return d(0,1),G(n,!1,"end"),--a.r||K(a.c),!1;if(A>=_){const V=h((A-_)/f);d(1-V,V)}}return r})}return ht(i)?te().then(()=>{i=i(s),l()}):l(),{end(u){u&&"inert"in n&&(n.inert=c),u&&i.tick&&i.tick(1,0),r&&(o&&Ct(n,o),r=!1)}}}function he(n,t,e,s){let r=t(n,e,{direction:"both"}),o=s?0:1,a=null,c=null,l=null,u;function f(){l&&Ct(n,l)}function h(p,_){const T=p.b-o;return _*=Math.abs(T),{a:o,b:p.b,d:T,duration:_,start:p.start,end:p.start+_,group:p.group}}function d(p){const{delay:_=0,duration:T=300,easing:A=Gt,tick:V=x,css:z}=r||ee,J={start:jt()+_,b:p};p||(J.group=L,L.r+=1),"inert"in n&&(p?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),a||c?c=J:(z&&(f(),l=St(n,o,p,T,_,A,z)),p&&V(0,1),a=h(J,T),P(()=>G(n,p,"start")),Jt(pt=>{if(c&&pt>c.start&&(a=h(c,T),c=null,G(n,a.b,"start"),z&&(f(),l=St(n,o,a.b,a.duration,0,A,r.css))),a){if(pt>=a.end)V(o=a.b,1-o),G(n,a.b,"end"),c||(a.b?f():--a.group.r||K(a.group.c)),a=null;else if(pt>=a.start){const tn=pt-a.start;o=a.a+a.d*A(tn/a.duration),V(o,1-o)}}return!!(a||c)}))}return{run(p){ht(r)?te().then(()=>{r=r({direction:p?"in":"out"}),d(p)}):d(p)},end(){f(),a=c=null}}}function D(n){n&&n.c()}function R(n,t,e){const{fragment:s,after_update:i}=n.$$;s&&s.m(t,e),P(()=>{const r=n.$$.on_mount.map(Re).filter(ht);n.$$.on_destroy?n.$$.on_destroy.push(...r):K(r),n.$$.on_mount=[]}),i.forEach(P)}function B(n,t){const e=n.$$;e.fragment!==null&&(_n(e.after_update),K(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function wn(n,t){n.$$.dirty[0]===-1&&(Z.push(n),gn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function W(n,t,e,s,i,r,o=null,a=[-1]){const c=ut;at(n);const l=n.$$={fragment:null,ctx:[],props:r,update:x,not_equal:i,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ce(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=e?e(n,t.props||{},(f,h,...d)=>{const p=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=p)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](p),u&&wn(n,f)),h}):[],l.update(),u=!0,K(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const f=un(t.target);l.fragment&&l.fragment.l(f),f.forEach(k)}else l.fragment&&l.fragment.c();t.intro&&b(n.$$.fragment),R(n,t.target,t.anchor),Me()}at(c)}class Y{constructor(){m(this,"$$");m(this,"$$set")}$destroy(){B(this,1),this.$destroy=x}$on(t,e){if(!ht(e))return x;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const i=s.indexOf(e);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!rn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const vn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vn);function kn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function j(n,{delay:t=0,duration:e=400,easing:s=kn,amount:i=5,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-r),[u,f]=an(i);return{delay:t,duration:e,easing:s,css:(h,d)=>`opacity: ${a-l*d}; filter: ${c} blur(${d*u}${f});`}}class En{constructor(t){m(this,"id",0);m(this,"playerName","Player");m(this,"playerLevel",1);m(this,"playerExp",0);m(this,"playerInventory",[new Cn({})]);this.id=t.id??this.id,this.playerName=t.playerName??this.playerName,this.playerLevel=t.playerLevel??this.playerLevel,this.playerExp=t.playerExp??this.playerExp,this.playerInventory=t.playerInventory??this.playerInventory}}class Sn{constructor(t){m(this,"id",0);m(this,"family","");m(this,"title","");m(this,"possibleOffspring",[]);m(this,"possibleSeedDrop",[]);m(this,"numOfDays",0);m(this,"numOfDaysRemaining",0);m(this,"chanceToDropSeed",100);m(this,"minSeedDrop",1);m(this,"maxSeedDrop",1);m(this,"minExpGain",0);m(this,"maxExpGain",0);m(this,"description","");m(this,"successRate",100);m(this,"isGrown",!1);this.family=t.family??this.family,this.title=t.title??this.title,this.possibleOffspring=t.possibleOffspring??this.possibleOffspring,this.possibleSeedDrop=t.possibleSeedDrop??this.possibleSeedDrop,this.numOfDays=t.numOfDays??this.numOfDays,this.numOfDaysRemaining=t.numOfDaysRemaining??this.numOfDaysRemaining,this.chanceToDropSeed=t.chanceToDropSeed??this.chanceToDropSeed,this.minSeedDrop=t.minSeedDrop??this.minSeedDrop,this.maxSeedDrop=t.maxSeedDrop??this.maxSeedDrop,this.maxExpGain=t.maxExpGain??this.maxExpGain,this.minExpGain=t.minExpGain??this.minExpGain,this.description=t.description??this.description,this.successRate=t.successRate??this.successRate,this.isGrown=t.isGrown??this.isGrown}setId(){return 0}}class Cn extends Sn{constructor(e){super(e);m(this,"id",0);m(this,"family","planet");m(this,"title","Planet Seed");m(this,"possibleOffspring",["planet"]);m(this,"possibleSeedDrop",["Water Seed"]);m(this,"numOfDays",1);m(this,"numOfDaysRemaining",1);m(this,"chanceToDropSeed",100);m(this,"minSeedDrop",1);m(this,"maxSeedDrop",1);m(this,"minExpGain",50);m(this,"maxExpGain",50);m(this,"description","Grows a planet which more seeds can be grown from.");m(this,"successRate",100);m(this,"isGrown",!1)}}const Q=[];function ft(n,t=x){let e;const s=new Set;function i(a){if(M(n,a)&&(n=a,e)){const c=!Q.length;for(const l of s)l[1](),Q.push(l,n);if(c){for(let l=0;l<Q.length;l+=2)Q[l][0](Q[l+1]);Q.length=0}}}function r(a){i(a(n))}function o(a,c=x){const l=[a,c];return s.add(l),s.size===1&&(e=t(i,r)||x),a(n),()=>{s.delete(l),s.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:o}}const Tn=ft(["Click 'Next' to begin."]),fe=ft("lobby"),Tt=ft("1a");function pe(n,t,e=0){let s=["Something went wrong... This text should not display."];return n==="lobby"&&t==="1a"&&(s=Rt.lobby.part1a),n==="1"&&(t==="1a"&&(s=Rt.chapter1.part1a),t==="2a"&&(s=Rt.chapter1.part2a)),s}const Rt={lobby:{part1a:["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."]},chapter1:{part1a:["Looks like we found 2 trusty adventurers. Click Ready to begin!"],part2a:["This is part 2a but I would like this to be part 1a... hmmm after lobbby."]}};function de(n,t,e=0){let s={};if(n==="lobby"&&t==="1a")s={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:""},Tt.set("1a");else if(n==="1")switch(t){case"1a":s={option1Visible:!0,option1Disabled:!1,option1:"Ready",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:""},Tt.set("2a");break;case"2a":s={option1Visible:!0,option1Disabled:!1,option1:"",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:""};break}return s}class xn{constructor(t){m(this,"id",0);m(this,"worldName","World");m(this,"maxActions",1);m(this,"remainingActions",1);m(this,"dayCount",1);m(this,"currentDay","Unoni");m(this,"currentDayIndex",1);m(this,"currentWeek",1);m(this,"currentMonth","New");m(this,"currentMonthIndex",1);m(this,"currentYear","Year of the Farmer");m(this,"currentYearIndex",1);m(this,"currentSeason","Spring");m(this,"plantedSeeds",[]);m(this,"unlockedSeeds",[]);m(this,"player",new En({playerName:"Guest"}));this.id=t.id??this.id,this.worldName=t.worldName??this.worldName,this.maxActions=t.maxActions??this.maxActions,this.remainingActions=t.remainingActions??this.remainingActions,this.dayCount=t.dayCount??this.dayCount,this.currentDay=t.currentDay??this.currentDay,this.currentDayIndex=t.currentDayIndex??this.currentDayIndex,this.currentWeek=t.currentWeek??this.currentWeek,this.currentMonth=t.currentMonth??this.currentMonth,this.currentMonthIndex=t.currentMonthIndex??this.currentMonthIndex,this.currentYear=t.currentYear??this.currentYear,this.currentYearIndex=t.currentYearIndex??this.currentYearIndex,this.currentSeason=t.currentSeason??this.currentSeason,this.plantedSeeds=t.plantedSeeds??this.plantedSeeds,this.unlockedSeeds=t.unlockedSeeds??this.unlockedSeeds,this.player=t.player??this.player,localStorage.getItem("worldCount")??localStorage.setItem("worldCount","1"),localStorage.getItem("seedCount")??localStorage.setItem("seedCount","1")}startGame(){this.newDay()}isFirstDay(){return this.dayCount===1}firstDay(){this.displayWorldStats()}newDay(){if(this.isFirstDay()){this.firstDay();return}this.remainingActions=this.maxActions,this.plantedSeeds.forEach(t=>t.numOfDaysRemaining-=1),this.harvestSeeds()}displayWorldStats(){let t=[`
      Remaining Actions: ${this.remainingActions}<br>
      Days Passed: ${this.dayCount}<br>
      Current Day: ${this.currentDay}<br>
      Day of the year: ${this.currentDayIndex}<br>
      Current Week: ${this.currentWeek}<br>
      Current Month: ${this.currentMonth} Moon<br>
      Month of the Year: ${this.currentMonthIndex}<br>
      Current Year: ${this.currentYearIndex} - ${this.currentYear}<br>
      Current Season: ${this.currentSeason}<br>
      dumy text to fill screen<br>
      for<br>
      scrollbar<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .
      `];Tn.set(t)}displayHarvestYield(){return[]}plantSeed(t){this.remainingActions-=1}harvestSeeds(){this.plantedSeeds.length!==0&&this.plantedSeeds.forEach(t=>{if(t.numOfDaysRemaining===0){t.isGrown=!0,this.player.playerInventory=[...this.player.playerInventory,{...t}];const e=this.plantedSeeds.indexOf(t);this.plantedSeeds.splice(e,1)}})}hasActionsRemaining(){return this.remainingActions>0}}function On(n){let t,e,s,i,r;const o=n[2].default,a=Dt(o,n,n[1],null);return{c(){t=C("button"),a&&a.c(),g(t,"class",e="btn "+n[0]+" svelte-1utwdw0")},m(c,l){E(c,t,l),a&&a.m(t,null),s=!0,i||(r=Xt(t,"click",n[3]),i=!0)},p(c,[l]){a&&a.p&&(!s||l&2)&&It(a,o,c,c[1],s?Lt(o,c[1],l,null):qt(c[1]),null),(!s||l&1&&e!==(e="btn "+c[0]+" svelte-1utwdw0"))&&g(t,"class",e)},i(c){s||(b(a,c),s=!0)},o(c){v(a,c),s=!1},d(c){c&&k(t),a&&a.d(c),i=!1,r()}}}function An(n,t,e){let{$$slots:s={},$$scope:i}=t,{btnType:r="terminal-option"}=t;function o(a){qe.call(this,n,a)}return n.$$set=a=>{"btnType"in a&&e(0,r=a.btnType),"$$scope"in a&&e(1,i=a.$$scope)},[r,i,s,o]}class ne extends Y{constructor(t){super(),W(this,t,An,On,M,{btnType:0})}}function $n(n){let t,e,s,i;return e=new Ze({props:{title:"Player Page",terminalColor:"blue"}}),{c(){t=C("div"),D(e.$$.fragment),g(t,"class","main-content svelte-1iftsfj")},m(r,o){E(r,t,o),R(e,t,null),i=!0},p:x,i(r){i||(b(e.$$.fragment,r),r&&(s||P(()=>{s=xt(t,j,{}),s.start()})),i=!0)},o(r){v(e.$$.fragment,r),i=!1},d(r){r&&k(t),B(e)}}}class Rn extends Y{constructor(t){super(),W(this,t,null,$n,M,{})}}const me=ft({id:void 0,title:"Player 1",points:{beasts:0,bots:0,dwarves:0,elves:0,humans:0,goblins:0,xenos:0},highestPoints:0,wins:0,losses:0,draws:0,playedFirst:!1,playingTwice:!1,turn:!1,dwarfNextTurn:!1,drewWarchief:!1,goblinLordMarked:!1,hand:[],startingHand:[],cardsDrawn:[],discards:[],boosts:[],traps:[],neutrals:[],chargeDrawnTurns:[],infectDrawnTurns:[],hasChastity:!1,hasCorruption:!1,hasVision:!1,isExposed:!1,chargePoints:0,infectPoints:0}),ge=ft({id:void 0,title:"Player 2",points:{beasts:0,bots:0,dwarves:0,elves:0,humans:0,goblins:0,xenos:0},highestPoints:0,wins:0,losses:0,draws:0,playedFirst:!1,playingTwice:!1,turn:!1,dwarfNextTurn:!1,drewWarchief:!1,goblinLordMarked:!1,hand:[],startingHand:[],cardsDrawn:[],discards:[],boosts:[],traps:[],neutrals:[],hasChastity:!1,hasCorruption:!1,hasVision:!1,isExposed:!1,chargeDrawnTurns:[],infectDrawnTurns:[],chargePoints:0,infectPoints:0}),q=Object.create(null);q.open="0";q.close="1";q.ping="2";q.pong="3";q.message="4";q.upgrade="5";q.noop="6";const yt=Object.create(null);Object.keys(q).forEach(n=>{yt[q[n]]=n});const Vt={type:"error",data:"parser error"},Ve=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Fe=typeof ArrayBuffer=="function",Ue=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,se=({type:n,data:t},e,s)=>Ve&&t instanceof Blob?e?s(t):ye(t,s):Fe&&(t instanceof ArrayBuffer||Ue(t))?e?s(t):ye(new Blob([t]),s):s(q[n]+(t||"")),ye=(n,t)=>{const e=new FileReader;return e.onload=function(){const s=e.result.split(",")[1];t("b"+(s||""))},e.readAsDataURL(n)};function _e(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Bt;function Bn(n,t){if(Ve&&n.data instanceof Blob)return n.data.arrayBuffer().then(_e).then(t);if(Fe&&(n.data instanceof ArrayBuffer||Ue(n.data)))return t(_e(n.data));se(n,!1,e=>{Bt||(Bt=new TextEncoder),t(Bt.encode(e))})}const be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<be.length;n++)ot[be.charCodeAt(n)]=n;const Nn=n=>{let t=n.length*.75,e=n.length,s,i=0,r,o,a,c;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);const l=new ArrayBuffer(t),u=new Uint8Array(l);for(s=0;s<e;s+=4)r=ot[n.charCodeAt(s)],o=ot[n.charCodeAt(s+1)],a=ot[n.charCodeAt(s+2)],c=ot[n.charCodeAt(s+3)],u[i++]=r<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},Pn=typeof ArrayBuffer=="function",ie=(n,t)=>{if(typeof n!="string")return{type:"message",data:He(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:Dn(n.substring(1),t)}:yt[e]?n.length>1?{type:yt[e],data:n.substring(1)}:{type:yt[e]}:Vt},Dn=(n,t)=>{if(Pn){const e=Nn(n);return He(e,t)}else return{base64:!0,data:n}},He=(n,t)=>{switch(t){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},We="",Ln=(n,t)=>{const e=n.length,s=new Array(e);let i=0;n.forEach((r,o)=>{se(r,!1,a=>{s[o]=a,++i===e&&t(s.join(We))})})},In=(n,t)=>{const e=n.split(We),s=[];for(let i=0;i<e.length;i++){const r=ie(e[i],t);if(s.push(r),r.type==="error")break}return s};function qn(){return new TransformStream({transform(n,t){Bn(n,e=>{const s=e.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let Nt;function dt(n){return n.reduce((t,e)=>t+e.length,0)}function mt(n,t){if(n[0].length===t)return n.shift();const e=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)e[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),e}function Mn(n,t){Nt||(Nt=new TextDecoder);const e=[];let s=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(s===0){if(dt(e)<1)break;const c=mt(e,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(dt(e)<2)break;const c=mt(e,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(dt(e)<8)break;const c=mt(e,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Vt);break}i=u*Math.pow(2,32)+l.getUint32(4),s=3}else{if(dt(e)<i)break;const c=mt(e,i);a.enqueue(ie(r?c:Nt.decode(c),t)),s=0}if(i===0||i>n){a.enqueue(Vt);break}}}})}const Ye=4;function S(n){if(n)return Vn(n)}function Vn(n){for(var t in S.prototype)n[t]=S.prototype[t];return n}S.prototype.on=S.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};S.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<e.length;i++)if(s=e[i],s===t||s.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+n],this};S.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,i=e.length;s<i;++s)e[s].apply(this,t)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};S.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ot=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Fn="arraybuffer";function ze(n,...t){return t.reduce((e,s)=>(n.hasOwnProperty(s)&&(e[s]=n[s]),e),{})}const Un=$.setTimeout,Hn=$.clearTimeout;function At(n,t){t.useNativeTimers?(n.setTimeoutFn=Un.bind($),n.clearTimeoutFn=Hn.bind($)):(n.setTimeoutFn=$.setTimeout.bind($),n.clearTimeoutFn=$.clearTimeout.bind($))}const Wn=1.33;function Yn(n){return typeof n=="string"?zn(n):Math.ceil((n.byteLength||n.size)*Wn)}function zn(n){let t=0,e=0;for(let s=0,i=n.length;s<i;s++)t=n.charCodeAt(s),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(s++,e+=4);return e}function Ge(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Gn(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function jn(n){let t={},e=n.split("&");for(let s=0,i=e.length;s<i;s++){let r=e[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class Kn extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class re extends S{constructor(t){super(),this.writable=!1,At(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,s){return super.emitReserved("error",new Kn(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=ie(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=Gn(t);return e.length?"?"+e:""}}class Jn extends re{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||e()})),this.writable||(s++,this.once("drain",function(){--s||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};In(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ln(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Ge()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let je=!1;try{je=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Xn=je;function Qn(){}class Zn extends Jn{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let s=location.port;s||(s=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,s)=>{this.onError("xhr poll error",e,s)}),this.pollXhr=t}}class I extends S{constructor(t,e,s){super(),this.createRequest=t,At(this,s),this._opts=s,this._method=s.method||"GET",this._uri=e,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const e=ze(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(e);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=I.requestsCount++,I.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Qn,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete I.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}I.requestsCount=0;I.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",we);else if(typeof addEventListener=="function"){const n="onpagehide"in $?"pagehide":"unload";addEventListener(n,we,!1)}}function we(){for(let n in I.requests)I.requests.hasOwnProperty(n)&&I.requests[n].abort()}const ts=function(){const n=Ke({xdomain:!1});return n&&n.responseType!==null}();class es extends Zn{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=ts&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new I(Ke,this.uri(),t)}}function Ke(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Xn))return new XMLHttpRequest}catch{}if(!t)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Je=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ns extends re{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,s=Je?{}:ze(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;se(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Ot(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Ge()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const Pt=$.WebSocket||$.MozWebSocket;class ss extends ns{createSocket(t,e,s){return Je?new Pt(t,e,s):e?new Pt(t,e):new Pt(t)}doWrite(t,e){this.ws.send(e)}}class is extends re{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=Mn(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(e).getReader(),i=qn();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:a,value:c})=>{a||(this.onPacket(c),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;this._writer.write(s).then(()=>{i&&Ot(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const rs={websocket:ss,webtransport:is,polling:es},os=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,as=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ft(n){if(n.length>8e3)throw"URI too long";const t=n,e=n.indexOf("["),s=n.indexOf("]");e!=-1&&s!=-1&&(n=n.substring(0,e)+n.substring(e,s).replace(/:/g,";")+n.substring(s,n.length));let i=os.exec(n||""),r={},o=14;for(;o--;)r[as[o]]=i[o]||"";return e!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=cs(r,r.path),r.queryKey=ls(r,r.query),r}function cs(n,t){const e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ls(n,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(e[i]=r)}),e}const Ut=typeof addEventListener=="function"&&typeof removeEventListener=="function",_t=[];Ut&&addEventListener("offline",()=>{_t.forEach(n=>n())},!1);class H extends S{constructor(t,e){if(super(),this.binaryType=Fn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const s=Ft(t);e.hostname=s.host,e.secure=s.protocol==="https"||s.protocol==="wss",e.port=s.port,s.query&&(e.query=s.query)}else e.host&&(e.hostname=Ft(e.host).host);At(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=jn(this.opts.query)),Ut&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_t.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=Ye,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&H.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",H.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(e+=Yn(i)),s>0&&e>this._maxPayload)return this.writeBuffer.slice(0,s);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ot(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,s){return this._sendPacket("message",t,e,s),this}send(t,e,s){return this._sendPacket("message",t,e,s),this}_sendPacket(t,e,s,i){if(typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:e,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(H.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ut&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=_t.indexOf(this._offlineEventListener);s!==-1&&_t.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}H.protocol=Ye;class us extends H{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),s=!1;H.priorWebsocketSuccess=!1;const i=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",f=>{if(!s)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;H.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=e.name,this.emitReserved("upgradeError",h)}}))};function r(){s||(s=!0,u(),e.close(),e=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=e.name,r(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function c(){o("socket closed")}function l(f){e&&f.name!==e.name&&r()}const u=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};e.once("open",i),e.once("error",o),e.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}let hs=class extends us{constructor(t,e={}){const s=typeof t=="object"?t:e;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>rs[i]).filter(i=>!!i)),super(t,s)}};function fs(n,t="",e){let s=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),s=Ft(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(e&&e.port===s.port?"":":"+s.port),s}const ps=typeof ArrayBuffer=="function",ds=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Xe=Object.prototype.toString,ms=typeof Blob=="function"||typeof Blob<"u"&&Xe.call(Blob)==="[object BlobConstructor]",gs=typeof File=="function"||typeof File<"u"&&Xe.call(File)==="[object FileConstructor]";function oe(n){return ps&&(n instanceof ArrayBuffer||ds(n))||ms&&n instanceof Blob||gs&&n instanceof File}function bt(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,s=n.length;e<s;e++)if(bt(n[e]))return!0;return!1}if(oe(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return bt(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&bt(n[e]))return!0;return!1}function ys(n){const t=[],e=n.data,s=n;return s.data=Ht(e,t),s.attachments=t.length,{packet:s,buffers:t}}function Ht(n,t){if(!n)return n;if(oe(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let s=0;s<n.length;s++)e[s]=Ht(n[s],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=Ht(n[s],t));return e}return n}function _s(n,t){return n.data=Wt(n.data,t),delete n.attachments,n}function Wt(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=Wt(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=Wt(n[e],t));return n}const bs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ws=5;var y;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(y||(y={}));class vs{constructor(t){this.replacer=t}encode(t){return(t.type===y.EVENT||t.type===y.ACK)&&bt(t)?this.encodeAsBinary({type:t.type===y.EVENT?y.BINARY_EVENT:y.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===y.BINARY_EVENT||t.type===y.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=ys(t),s=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(s),i}}function ve(n){return Object.prototype.toString.call(n)==="[object Object]"}class ae extends S{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const s=e.type===y.BINARY_EVENT;s||e.type===y.BINARY_ACK?(e.type=s?y.EVENT:y.ACK,this.reconstructor=new ks(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(oe(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(y[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===y.BINARY_EVENT||s.type===y.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(r,e)}else s.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}s.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(ae.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case y.CONNECT:return ve(e);case y.DISCONNECT:return e===void 0;case y.CONNECT_ERROR:return typeof e=="string"||ve(e);case y.EVENT:case y.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&bs.indexOf(e[0])===-1);case y.ACK:case y.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ks{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=_s(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Es=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ae,Encoder:vs,get PacketType(){return y},protocol:ws},Symbol.toStringTag,{value:"Module"}));function N(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const Ss=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qe extends S{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[N(t,"open",this.onopen.bind(this)),N(t,"packet",this.onpacket.bind(this)),N(t,"error",this.onerror.bind(this)),N(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var s,i,r;if(Ss.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:y.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,f=e.pop();this._registerAckCallback(u,f),o.id=u}const a=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((s,i)=>{const r=(o,a)=>o?i(o):s(a);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:y.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case y.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case y.EVENT:case y.BINARY_EVENT:this.onevent(t);break;case y.ACK:case y.BINARY_ACK:this.onack(t);break;case y.DISCONNECT:this.ondisconnect();break;case y.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:y.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function st(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}st.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};st.prototype.reset=function(){this.attempts=0};st.prototype.setMin=function(n){this.ms=n};st.prototype.setMax=function(n){this.max=n};st.prototype.setJitter=function(n){this.jitter=n};class Yt extends S{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,At(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new st({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||Es;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new hs(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=N(e,"open",function(){s.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=N(e,"error",r);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(N(t,"ping",this.onping.bind(this)),N(t,"data",this.ondata.bind(this)),N(t,"error",this.onerror.bind(this)),N(t,"close",this.onclose.bind(this)),N(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Ot(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Qe(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const s of e)if(this.nsps[s].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const rt={};function wt(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=fs(n,t.path||"/socket.io"),s=e.source,i=e.id,r=e.path,o=rt[i]&&r in rt[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return a?c=new Yt(s,t):(rt[i]||(rt[i]=new Yt(s,t)),c=rt[i]),e.query&&!t.query&&(t.query=e.queryKey),c.socket(e.path,t)}Object.assign(wt,{Manager:Yt,Socket:Qe,io:wt,connect:wt});function Cs(n){let t,e,s,i;return e=new Ze({props:{gameStarted:n[0],terminalColor:"grey"}}),{c(){t=C("div"),D(e.$$.fragment),g(t,"class","main-content svelte-abemhi")},m(r,o){E(r,t,o),R(e,t,null),i=!0},p(r,[o]){const a={};o&1&&(a.gameStarted=r[0]),e.$set(a)},i(r){i||(b(e.$$.fragment,r),r&&(s||P(()=>{s=xt(t,j,{}),s.start()})),i=!0)},o(r){v(e.$$.fragment,r),i=!1},d(r){r&&k(t),B(e)}}}function Ts(n,t,e){vt(n,ge,r=>e(1,r)),vt(n,me,r=>e(2,r));let s=wt("http://192.168.2.10:6912"),i=!1;return Zt(()=>{s.on("connect",()=>console.log(`User ID: ${s.id} connected!`)),s.on("connect_error",r=>console.error("Connection error:",r)),s.on("set-users",r=>{Object.entries(r).forEach(([o,a])=>{me.update(c=>(c.id=r.p1,c)),ge.update(c=>(c.id=r.p2,c))})}),s.on("p2-joined",r=>{e(0,i=!0)}),s.emit("client-ready")}),[i]}class xs extends Y{constructor(t){super(),W(this,t,Ts,Cs,M,{})}}function Os(n){let t,e;return t=new Rn({}),{c(){D(t.$$.fragment)},m(s,i){R(t,s,i),e=!0},i(s){e||(b(t.$$.fragment,s),e=!0)},o(s){v(t.$$.fragment,s),e=!1},d(s){B(t,s)}}}function As(n){let t,e;return t=new xs({}),{c(){D(t.$$.fragment)},m(s,i){R(t,s,i),e=!0},i(s){e||(b(t.$$.fragment,s),e=!0)},o(s){v(t.$$.fragment,s),e=!1},d(s){B(t,s)}}}function $s(n){let t,e,s,i,r,o,a,c;e=new Ks({props:{sidebarExpanded:n[0]}}),e.$on("select",n[2]),e.$on("toggle-sidebar",n[3]);const l=[As,Os],u=[];function f(h,d){return h[1]==="log"?0:h[1]==="player"?1:-1}return~(r=f(n))&&(o=u[r]=l[r](n)),{c(){t=C("div"),D(e.$$.fragment),s=U(),i=C("div"),o&&o.c(),g(i,"class","screen svelte-kvlyqv"),g(t,"class","client svelte-kvlyqv"),F(t,"client-collapsed",!n[0])},m(h,d){E(h,t,d),R(e,t,null),w(t,s),w(t,i),~r&&u[r].m(i,null),c=!0},p(h,[d]){const p={};d&1&&(p.sidebarExpanded=h[0]),e.$set(p);let _=r;r=f(h),r!==_&&(o&&(ct(),v(u[_],1,1,()=>{u[_]=null}),lt()),~r?(o=u[r],o||(o=u[r]=l[r](h),o.c()),b(o,1),o.m(i,null)):o=null),(!c||d&1)&&F(t,"client-collapsed",!h[0])},i(h){c||(b(e.$$.fragment,h),b(o),h&&(a||P(()=>{a=xt(t,j,{duration:2e3}),a.start()})),c=!0)},o(h){v(e.$$.fragment,h),v(o),c=!1},d(h){h&&k(t),B(e),~r&&u[r].d()}}}function Rs(n,t,e){let s=!1,i="log";function r(a){e(1,i=a.detail)}return[s,i,r,()=>e(0,s=!s)]}class Bs extends Y{constructor(t){super(),W(this,t,Rs,$s,M,{})}}const Ns=n=>({}),ke=n=>({}),Ps=n=>({}),Ee=n=>({});function Ds(n){let t,e,s,i;return{c(){t=O("svg"),e=O("circle"),s=O("path"),i=O("path"),g(e,"cx","12"),g(e,"cy","12"),g(e,"r","10"),g(s,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),g(i,"d","M12 17h.01"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"viewBox","0 0 24 24"),g(t,"class","icon svelte-16xfpde")},m(r,o){E(r,t,o),w(t,e),w(t,s),w(t,i)},d(r){r&&k(t)}}}function Ls(n){let t,e,s;return{c(){t=O("svg"),e=O("polyline"),s=O("line"),g(e,"points","4 17 10 11 4 5"),g(s,"x1","12"),g(s,"x2","20"),g(s,"y1","19"),g(s,"y2","19"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"viewBox","0 0 24 24"),g(t,"class","icon svelte-16xfpde")},m(i,r){E(i,t,r),w(t,e),w(t,s)},d(i){i&&k(t)}}}function Is(n){let t,e,s;return{c(){t=O("svg"),e=O("path"),s=O("circle"),g(e,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),g(s,"cx","12"),g(s,"cy","7"),g(s,"r","4"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"viewBox","0 0 24 24"),g(t,"class","icon svelte-16xfpde")},m(i,r){E(i,t,r),w(t,e),w(t,s)},d(i){i&&k(t)}}}function qs(n){let t,e,s;return{c(){t=O("svg"),e=O("path"),s=O("path"),g(e,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),g(s,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"viewBox","0 0 24 24"),g(t,"class","icon svelte-16xfpde")},m(i,r){E(i,t,r),w(t,e),w(t,s)},d(i){i&&k(t)}}}function Se(n){let t,e,s,i,r,o,a;const c=n[4].title,l=Dt(c,n,n[3],Ee),u=l||Ms(),f=n[4].description,h=Dt(f,n,n[3],ke),d=h||Vs();return{c(){t=C("div"),e=C("h2"),u&&u.c(),s=U(),i=C("p"),d&&d.c(),g(e,"class","item-title svelte-16xfpde"),g(i,"class","item-text svelte-16xfpde"),g(t,"class","item-text-wrapper svelte-16xfpde")},m(p,_){E(p,t,_),w(t,e),u&&u.m(e,null),w(t,s),w(t,i),d&&d.m(i,null),a=!0},p(p,_){l&&l.p&&(!a||_&8)&&It(l,c,p,p[3],a?Lt(c,p[3],_,Ps):qt(p[3]),Ee),h&&h.p&&(!a||_&8)&&It(h,f,p,p[3],a?Lt(f,p[3],_,Ns):qt(p[3]),ke)},i(p){a||(b(u,p),b(d,p),p&&P(()=>{a&&(o&&o.end(1),r=xt(t,j,{duration:500}),r.start())}),a=!0)},o(p){v(u,p),v(d,p),r&&r.invalidate(),p&&(o=bn(t,j,{duration:250})),a=!1},d(p){p&&k(t),u&&u.d(p),d&&d.d(p),p&&o&&o.end()}}}function Ms(n){let t;return{c(){t=nt("Title")},m(e,s){E(e,t,s)},d(e){e&&k(t)}}}function Vs(n){let t;return{c(){t=nt("Brief description")},m(e,s){E(e,t,s)},d(e){e&&k(t)}}}function Fs(n){let t,e,s,i,r,o;function a(f,h){return f[0]==="seed"?qs:f[0]==="player"?Is:f[0]==="terminal"?Ls:Ds}let c=a(n),l=c(n),u=!n[2]&&Se(n);return{c(){t=C("div"),l.c(),e=U(),u&&u.c(),g(t,"class",s="item item-color__"+n[1]+" svelte-16xfpde")},m(f,h){E(f,t,h),l.m(t,null),w(t,e),u&&u.m(t,null),i=!0,r||(o=Xt(t,"click",n[5]),r=!0)},p(f,[h]){c!==(c=a(f))&&(l.d(1),l=c(f),l&&(l.c(),l.m(t,e))),f[2]?u&&(ct(),v(u,1,1,()=>{u=null}),lt()):u?(u.p(f,h),h&4&&b(u,1)):(u=Se(f),u.c(),b(u,1),u.m(t,null)),(!i||h&2&&s!==(s="item item-color__"+f[1]+" svelte-16xfpde"))&&g(t,"class",s)},i(f){i||(b(u),i=!0)},o(f){v(u),i=!1},d(f){f&&k(t),l.d(),u&&u.d(),r=!1,o()}}}function Us(n,t,e){let{$$slots:s={},$$scope:i}=t,{iconType:r="unkown"}=t,{color:o="grey"}=t,{collapsed:a=!1}=t;function c(l){qe.call(this,n,l)}return n.$$set=l=>{"iconType"in l&&e(0,r=l.iconType),"color"in l&&e(1,o=l.color),"collapsed"in l&&e(2,a=l.collapsed),"$$scope"in l&&e(3,i=l.$$scope)},[r,o,a,i,s,c]}class Ce extends Y{constructor(t){super(),W(this,t,Us,Fs,M,{iconType:0,color:1,collapsed:2})}}function Hs(n){let t;return{c(){t=C("span"),t.textContent="Log",g(t,"slot","title")},m(e,s){E(e,t,s)},p:x,d(e){e&&k(t)}}}function Ws(n){let t;return{c(){t=C("span"),t.textContent="View logged messages",g(t,"slot","description")},m(e,s){E(e,t,s)},p:x,d(e){e&&k(t)}}}function Ys(n){let t;return{c(){t=C("span"),t.textContent="Player",g(t,"slot","title")},m(e,s){E(e,t,s)},p:x,d(e){e&&k(t)}}}function zs(n){let t;return{c(){t=C("span"),t.textContent="View player stats",g(t,"slot","description")},m(e,s){E(e,t,s)},p:x,d(e){e&&k(t)}}}function Gs(n){let t,e,s,i,r,o,a,c,l,u,f;return o=new Ce({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[Ws],title:[Hs]},$$scope:{ctx:n}}}),o.$on("click",n[3]),c=new Ce({props:{collapsed:!n[0],color:"blue",iconType:"player",$$slots:{description:[zs],title:[Ys]},$$scope:{ctx:n}}}),c.$on("click",n[4]),{c(){t=C("div"),e=O("svg"),s=O("path"),i=O("path"),r=U(),D(o.$$.fragment),a=U(),D(c.$$.fragment),g(s,"d","M19 15V9"),g(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),g(e,"class","icon collapse-icon svelte-1tpwflx"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"viewBox","0 0 24 24"),F(e,"rotate",!n[0]),g(t,"class","sidebar svelte-1tpwflx"),F(t,"sidebar-collapsed",!n[0]),F(t,"sidebar-expanded",n[0])},m(h,d){E(h,t,d),w(t,e),w(e,s),w(e,i),w(t,r),R(o,t,null),w(t,a),R(c,t,null),l=!0,u||(f=Xt(e,"click",n[2]),u=!0)},p(h,[d]){(!l||d&1)&&F(e,"rotate",!h[0]);const p={};d&1&&(p.collapsed=!h[0]),d&32&&(p.$$scope={dirty:d,ctx:h}),o.$set(p);const _={};d&1&&(_.collapsed=!h[0]),d&32&&(_.$$scope={dirty:d,ctx:h}),c.$set(_),(!l||d&1)&&F(t,"sidebar-collapsed",!h[0]),(!l||d&1)&&F(t,"sidebar-expanded",h[0])},i(h){l||(b(o.$$.fragment,h),b(c.$$.fragment,h),l=!0)},o(h){v(o.$$.fragment,h),v(c.$$.fragment,h),l=!1},d(h){h&&k(t),B(o),B(c),u=!1,f()}}}function js(n,t,e){let{sidebarExpanded:s=!0}=t;const i=dn(),r=()=>i("toggle-sidebar"),o=()=>i("select","log"),a=()=>i("select","player");return n.$$set=c=>{"sidebarExpanded"in c&&e(0,s=c.sidebarExpanded)},[s,i,r,o,a]}class Ks extends Y{constructor(t){super(),W(this,t,js,Gs,M,{sidebarExpanded:0})}}function zt(){return zt=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},zt.apply(this,arguments)}var Js={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,t){},onStringTyped:function(n,t){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,t){},onTypingResumed:function(n,t){},onReset:function(n){},onStop:function(n,t){},onStart:function(n,t){},onDestroy:function(n){}},Xs=new(function(){function n(){}var t=n.prototype;return t.load=function(e,s,i){if(e.el=typeof i=="string"?document.querySelector(i):i,e.options=zt({},Js,s),e.isInput=e.el.tagName.toLowerCase()==="input",e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map(function(l){return l.trim()}),e.stringsElement=typeof e.options.stringsElement=="string"?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)e.strings.push(r[a].innerHTML.trim())}for(var c in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[c]=c;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:e.contentType==="html"?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var s="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},t.appendFadeOutAnimationCss=function(e){var s="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},n}()),Te=new(function(){function n(){}var t=n.prototype;return t.typeHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";e.substring(s+1).charAt(0)!==o&&!(1+ ++s>e.length););s++}return s},t.backSpaceHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";e.substring(s-1).charAt(0)!==o&&!(--s<0););s--}return s},n}()),xe=function(){function n(e,s){Xs.load(this,s,e),this.begin()}var t=n.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){e===void 0&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){e.strPos===0?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)},this.startDelay)},t.typewrite=function(e,s){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=Te.typeHtmlChars(e,s,i);var a=0,c=e.substring(s);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,a=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),e=e.substring(0,s)+e.substring(s+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;e.substring(s+o).charAt(0)!=="`"&&(o++,!(s+o>e.length)););var u=e.substring(0,s),f=e.substring(u.length+1,s+o),h=e.substring(s+o+1);e=u+f+h,o--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),s>=e.length?i.doneTyping(e,s):i.keepTyping(e,s,o),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},r):this.setPauseStatus(e,s,!0)},t.keepTyping=function(e,s,i){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,s+=i);this.replaceText(r),this.typewrite(e,s)},t.doneTyping=function(e,s){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(e,s)},this.backDelay))},t.backspace=function(e,s){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=Te.backSpaceHtmlChars(e,s,i);var o=e.substring(0,s);if(i.replaceText(o),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&o===a.substring(0,s)?s:0}s>i.stopNum?(s--,i.backspace(e,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},r)}else this.setPauseStatus(e,s,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,s,i){this.pause.typewrite=i,this.pause.curString=e,this.pause.curStrPos=s},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:this.contentType==="html"?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",function(s){e.stop()}),this.el.addEventListener("blur",function(s){e.el.value&&e.el.value.length!==0||e.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();function Oe(n){let t,e;return t=new ne({props:{btnType:"terminal-option",$$slots:{default:[Qs]},$$scope:{ctx:n}}}),t.$on("click",n[6]),{c(){D(t.$$.fragment)},m(s,i){R(t,s,i),e=!0},p(s,i){const r={};i&2050&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(b(t.$$.fragment,s),e=!0)},o(s){v(t.$$.fragment,s),e=!1},d(s){B(t,s)}}}function Qs(n){let t=n[1].option1+"",e;return{c(){e=nt(t)},m(s,i){E(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option1+"")&&Qt(e,t)},d(s){s&&k(e)}}}function Ae(n){let t,e;return t=new ne({props:{btnType:"terminal-option",$$slots:{default:[Zs]},$$scope:{ctx:n}}}),t.$on("click",n[7]),{c(){D(t.$$.fragment)},m(s,i){R(t,s,i),e=!0},p(s,i){const r={};i&2050&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(b(t.$$.fragment,s),e=!0)},o(s){v(t.$$.fragment,s),e=!1},d(s){B(t,s)}}}function Zs(n){let t=n[1].option2+"",e;return{c(){e=nt(t)},m(s,i){E(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option2+"")&&Qt(e,t)},d(s){s&&k(e)}}}function $e(n){let t,e;return t=new ne({props:{btnType:"terminal-option",$$slots:{default:[ti]},$$scope:{ctx:n}}}),t.$on("click",n[8]),{c(){D(t.$$.fragment)},m(s,i){R(t,s,i),e=!0},p(s,i){const r={};i&2050&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(b(t.$$.fragment,s),e=!0)},o(s){v(t.$$.fragment,s),e=!1},d(s){B(t,s)}}}function ti(n){let t=n[1].option3+"",e;return{c(){e=nt(t)},m(s,i){E(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option3+"")&&Qt(e,t)},d(s){s&&k(e)}}}function ei(n){let t,e,s,i,r,o,a,c,l,u=n[1].option1Visible&&Oe(n),f=n[1].option2Visible&&Ae(n),h=n[1].option3Visible&&$e(n);return{c(){t=C("div"),e=C("div"),e.innerHTML='<p id="terminal-text" class="svelte-f1npwx"></p>',s=U(),i=C("div"),u&&u.c(),r=U(),f&&f.c(),o=U(),h&&h.c(),g(e,"class","terminal-screen svelte-f1npwx"),g(i,"class","terminal-option-flex-group"),g(t,"class",a="terminal terminal__"+n[0]+" svelte-f1npwx")},m(d,p){E(d,t,p),w(t,e),w(t,s),w(t,i),u&&u.m(i,null),w(i,r),f&&f.m(i,null),w(i,o),h&&h.m(i,null),l=!0},p(d,[p]){d[1].option1Visible?u?(u.p(d,p),p&2&&b(u,1)):(u=Oe(d),u.c(),b(u,1),u.m(i,r)):u&&(ct(),v(u,1,1,()=>{u=null}),lt()),d[1].option2Visible?f?(f.p(d,p),p&2&&b(f,1)):(f=Ae(d),f.c(),b(f,1),f.m(i,o)):f&&(ct(),v(f,1,1,()=>{f=null}),lt()),d[1].option3Visible?h?(h.p(d,p),p&2&&b(h,1)):(h=$e(d),h.c(),b(h,1),h.m(i,null)):h&&(ct(),v(h,1,1,()=>{h=null}),lt()),(!l||p&1&&a!==(a="terminal terminal__"+d[0]+" svelte-f1npwx"))&&g(t,"class",a)},i(d){l||(b(u),b(f),b(h),d&&P(()=>{l&&(c||(c=he(t,j,{duration:1e3},!0)),c.run(1))}),l=!0)},o(d){v(u),v(f),v(h),d&&(c||(c=he(t,j,{duration:1e3},!1)),c.run(0)),l=!1},d(d){d&&k(t),u&&u.d(),f&&f.d(),h&&h.d(),d&&c&&c.end()}}}function ni(n,t,e){let s,i;vt(n,Tt,p=>e(4,s=p)),vt(n,fe,p=>e(5,i=p));let{terminalColor:r="grey"}=t,{gameStarted:o=!1}=t,a,c=pe(i,s),l=de(i,s);Zt(()=>{a=new xe("#terminal-text",{strings:c,typeSpeed:20})});function u(p,_=!1,T=!1){e(1,l=de(i,s,p)),T&&Tt.set("1a"),a.destroy(),a=new xe("#terminal-text",{strings:pe(i,s,p),typeSpeed:20})}const f=()=>u(1),h=()=>u(2),d=()=>u(3);return n.$$set=p=>{"terminalColor"in p&&e(0,r=p.terminalColor),"gameStarted"in p&&e(3,o=p.gameStarted)},n.$$.update=()=>{n.$$.dirty&56&&o&&i==="lobby"&&s==="1a"&&(fe.set("1"),u(0,!1,!0))},[r,l,u,o,s,i,f,h,d]}class Ze extends Y{constructor(t){super(),W(this,t,ni,ei,M,{terminalColor:0,gameStarted:3})}}function si(n){let t,e,s;return e=new Bs({}),{c(){t=C("main"),D(e.$$.fragment),g(t,"class","main-content svelte-kn45eq")},m(i,r){E(i,t,r),R(e,t,null),s=!0},p:x,i(i){s||(b(e.$$.fragment,i),s=!0)},o(i){v(e.$$.fragment,i),s=!1},d(i){i&&k(t),B(e)}}}function ii(n){const t=new xn({});Zt(()=>{e()});function e(){t.startGame()}return[]}class ri extends Y{constructor(t){super(),W(this,t,ii,si,M,{})}}new ri({target:document.getElementById("app")});
