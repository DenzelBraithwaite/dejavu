var ln=Object.defineProperty;var cn=(n,e,t)=>e in n?ln(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>cn(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function P(){}const it=n=>n;function un(n,e){for(const t in e)n[t]=e[t];return n}function $t(n){return n()}function mt(){return Object.create(null)}function G(n){n.forEach($t)}function we(n){return typeof n=="function"}function z(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function fn(n){return Object.keys(n).length===0}function Lt(n,...e){if(n==null){for(const i of e)i(void 0);return P}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ke(n){let e;return Lt(n,t=>e=t)(),e}function U(n,e,t){n.$$.on_destroy.push(Lt(e,t))}function Ye(n,e,t,i){if(n){const s=Vt(n,e,t,i);return n[0](s)}}function Vt(n,e,t,i){return n[1]&&i?un(t.ctx.slice(),n[1](i(e))):t.ctx}function Ge(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],a=Math.max(e.dirty.length,s.length);for(let o=0;o<a;o+=1)r[o]=e.dirty[o]|s[o];return r}return e.dirty|s}return e.dirty}function ze(n,e,t,i,s,r){if(s){const a=Vt(e,t,i,r);n.p(a,s)}}function Ke(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function hn(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const It=typeof window<"u";let st=It?()=>window.performance.now():()=>Date.now(),rt=It?n=>requestAnimationFrame(n):P;const ue=new Set;function qt(n){ue.forEach(e=>{e.c(n)||(ue.delete(e),e.f())}),ue.size!==0&&rt(qt)}function ot(n){let e;return ue.size===0&&rt(qt),{promise:new Promise(t=>{ue.add(e={c:n,f:t})}),abort(){ue.delete(e)}}}function E(n,e){n.appendChild(e)}function Mt(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function pn(n){const e=A("style");return e.textContent="/* empty */",dn(Mt(n),e),e.sheet}function dn(n,e){return E(n.head||n,e),e.sheet}function D(n,e,t){n.insertBefore(e,t||null)}function T(n){n.parentNode&&n.parentNode.removeChild(n)}function A(n){return document.createElement(n)}function R(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function K(n){return document.createTextNode(n)}function $(){return K(" ")}function re(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function y(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function mn(n){return Array.from(n.childNodes)}function he(n,e){e=""+e,n.data!==e&&(n.data=e)}function xe(n,e){n.value=e??""}function j(n,e,t){n.classList.toggle(e,!!t)}function Ft(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}const Ne=new Map;let Re=0;function yn(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function gn(n,e){const t={stylesheet:pn(e),rules:{}};return Ne.set(n,t),t}function Be(n,e,t,i,s,r,a,o=0){const l=16.666/i;let c=`{
`;for(let b=0;b<=1;b+=l){const S=e+(t-e)*r(b);c+=b*100+`%{${a(S,1-S)}}
`}const u=c+`100% {${a(t,1-t)}}
}`,f=`__svelte_${yn(u)}_${o}`,p=Mt(n),{stylesheet:m,rules:h}=Ne.get(p)||gn(p,n);h[f]||(h[f]=!0,m.insertRule(`@keyframes ${f} ${u}`,m.cssRules.length));const d=n.style.animation||"";return n.style.animation=`${d?`${d}, `:""}${f} ${i}ms linear ${s}ms 1 both`,Re+=1,f}function Pe(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),s=t.length-i.length;s&&(n.style.animation=i.join(", "),Re-=s,Re||bn())}function bn(){rt(()=>{Re||(Ne.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&T(e)}),Ne.clear())})}let _e;function be(n){_e=n}function Ut(){if(!_e)throw new Error("Function called outside component initialization");return _e}function Ie(n){Ut().$$.on_mount.push(n)}function _n(){const n=Ut();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const r=Ft(e,t,{cancelable:i});return s.slice().forEach(a=>{a.call(n,r)}),!r.defaultPrevented}return!0}}function Ht(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const ce=[],yt=[];let fe=[];const gt=[],wn=Promise.resolve();let je=!1;function vn(){je||(je=!0,wn.then(Wt))}function F(n){fe.push(n)}const Fe=new Set;let ae=0;function Wt(){if(ae!==0)return;const n=_e;do{try{for(;ae<ce.length;){const e=ce[ae];ae++,be(e),kn(e.$$)}}catch(e){throw ce.length=0,ae=0,e}for(be(null),ce.length=0,ae=0;yt.length;)yt.pop()();for(let e=0;e<fe.length;e+=1){const t=fe[e];Fe.has(t)||(Fe.add(t),t())}fe.length=0}while(ce.length);for(;gt.length;)gt.pop()();je=!1,Fe.clear(),be(n)}function kn(n){if(n.fragment!==null){n.update(),G(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(F)}}function En(n){const e=[],t=[];fe.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),fe=e}let me;function at(){return me||(me=Promise.resolve(),me.then(()=>{me=null})),me}function ee(n,e,t){n.dispatchEvent(Ft(`${e?"intro":"outro"}${t}`))}const Ce=new Set;let H;function te(){H={r:0,c:[],p:H}}function ne(){H.r||G(H.c),H=H.p}function v(n,e){n&&n.i&&(Ce.delete(n),n.i(e))}function C(n,e,t,i){if(n&&n.o){if(Ce.has(n))return;Ce.add(n),H.c.push(()=>{Ce.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const lt={duration:0};function ct(n,e,t){const i={direction:"in"};let s=e(n,t,i),r=!1,a,o,l=0;function c(){a&&Pe(n,a)}function u(){const{delay:p=0,duration:m=300,easing:h=it,tick:d=P,css:b}=s||lt;b&&(a=Be(n,0,1,m,p,h,b,l++)),d(0,1);const S=st()+p,w=S+m;o&&o.abort(),r=!0,F(()=>ee(n,!0,"start")),o=ot(O=>{if(r){if(O>=w)return d(1,0),ee(n,!0,"end"),c(),r=!1;if(O>=S){const _=h((O-S)/m);d(_,1-_)}}return r})}let f=!1;return{start(){f||(f=!0,Pe(n),we(s)?(s=s(i),at().then(u)):u())},invalidate(){f=!1},end(){r&&(c(),r=!1)}}}function Sn(n,e,t){const i={direction:"out"};let s=e(n,t,i),r=!0,a;const o=H;o.r+=1;let l;function c(){const{delay:u=0,duration:f=300,easing:p=it,tick:m=P,css:h}=s||lt;h&&(a=Be(n,1,0,f,u,p,h));const d=st()+u,b=d+f;F(()=>ee(n,!1,"start")),"inert"in n&&(l=n.inert,n.inert=!0),ot(S=>{if(r){if(S>=b)return m(0,1),ee(n,!1,"end"),--o.r||G(o.c),!1;if(S>=d){const w=p((S-d)/f);m(1-w,w)}}return r})}return we(s)?at().then(()=>{s=s(i),c()}):c(),{end(u){u&&"inert"in n&&(n.inert=l),u&&s.tick&&s.tick(1,0),r&&(a&&Pe(n,a),r=!1)}}}function $e(n,e,t,i){let r=e(n,t,{direction:"both"}),a=i?0:1,o=null,l=null,c=null,u;function f(){c&&Pe(n,c)}function p(h,d){const b=h.b-a;return d*=Math.abs(b),{a,b:h.b,d:b,duration:d,start:h.start,end:h.start+d,group:h.group}}function m(h){const{delay:d=0,duration:b=300,easing:S=it,tick:w=P,css:O}=r||lt,_={start:st()+d,b:h};h||(_.group=H,H.r+=1),"inert"in n&&(h?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),o||l?l=_:(O&&(f(),c=Be(n,a,h,b,d,S,O)),h&&w(0,1),o=p(_,b),F(()=>ee(n,h,"start")),ot(oe=>{if(l&&oe>l.start&&(o=p(l,b),l=null,ee(n,o.b,"start"),O&&(f(),c=Be(n,a,o.b,o.duration,0,S,r.css))),o){if(oe>=o.end)w(a=o.b,1-a),ee(n,o.b,"end"),l||(o.b?f():--o.group.r||G(o.group.c)),o=null;else if(oe>=o.start){const an=oe-o.start;a=o.a+o.d*S(an/o.duration),w(a,1-a)}}return!!(o||l)}))}return{run(h){we(r)?at().then(()=>{r=r({direction:h?"in":"out"}),m(h)}):m(h)},end(){f(),o=l=null}}}function q(n){n&&n.c()}function L(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),F(()=>{const r=n.$$.on_mount.map($t).filter(we);n.$$.on_destroy?n.$$.on_destroy.push(...r):G(r),n.$$.on_mount=[]}),s.forEach(F)}function V(n,e){const t=n.$$;t.fragment!==null&&(En(t.after_update),G(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Cn(n,e){n.$$.dirty[0]===-1&&(ce.push(n),vn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Q(n,e,t,i,s,r,a=null,o=[-1]){const l=_e;be(n);const c=n.$$={fragment:null,ctx:[],props:r,update:P,not_equal:s,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:mt(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(f,p,...m)=>{const h=m.length?m[0]:p;return c.ctx&&s(c.ctx[f],c.ctx[f]=h)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](h),u&&Cn(n,f)),p}):[],c.update(),u=!0,G(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=mn(e.target);c.fragment&&c.fragment.l(f),f.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&v(n.$$.fragment),L(n,e.target,e.anchor),Wt()}be(l)}class Z{constructor(){g(this,"$$");g(this,"$$set")}$destroy(){V(this,1),this.$destroy=P}$on(e,t){if(!we(t))return P;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!fn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Tn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Tn);function Dn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function X(n,{delay:e=0,duration:t=400,easing:i=Dn,amount:s=5,opacity:r=0}={}){const a=getComputedStyle(n),o=+a.opacity,l=a.filter==="none"?"":a.filter,c=o*(1-r),[u,f]=hn(s);return{delay:e,duration:t,easing:i,css:(p,m)=>`opacity: ${o-c*m}; filter: ${l} blur(${m*u}${f});`}}class On{constructor(e){g(this,"id",0);g(this,"playerName","Player");g(this,"playerLevel",1);g(this,"playerExp",0);g(this,"playerInventory",[new xn({})]);this.id=e.id??this.id,this.playerName=e.playerName??this.playerName,this.playerLevel=e.playerLevel??this.playerLevel,this.playerExp=e.playerExp??this.playerExp,this.playerInventory=e.playerInventory??this.playerInventory}}class An{constructor(e){g(this,"id",0);g(this,"family","");g(this,"title","");g(this,"possibleOffspring",[]);g(this,"possibleSeedDrop",[]);g(this,"numOfDays",0);g(this,"numOfDaysRemaining",0);g(this,"chanceToDropSeed",100);g(this,"minSeedDrop",1);g(this,"maxSeedDrop",1);g(this,"minExpGain",0);g(this,"maxExpGain",0);g(this,"description","");g(this,"successRate",100);g(this,"isGrown",!1);this.family=e.family??this.family,this.title=e.title??this.title,this.possibleOffspring=e.possibleOffspring??this.possibleOffspring,this.possibleSeedDrop=e.possibleSeedDrop??this.possibleSeedDrop,this.numOfDays=e.numOfDays??this.numOfDays,this.numOfDaysRemaining=e.numOfDaysRemaining??this.numOfDaysRemaining,this.chanceToDropSeed=e.chanceToDropSeed??this.chanceToDropSeed,this.minSeedDrop=e.minSeedDrop??this.minSeedDrop,this.maxSeedDrop=e.maxSeedDrop??this.maxSeedDrop,this.maxExpGain=e.maxExpGain??this.maxExpGain,this.minExpGain=e.minExpGain??this.minExpGain,this.description=e.description??this.description,this.successRate=e.successRate??this.successRate,this.isGrown=e.isGrown??this.isGrown}setId(){return 0}}class xn extends An{constructor(t){super(t);g(this,"id",0);g(this,"family","planet");g(this,"title","Planet Seed");g(this,"possibleOffspring",["planet"]);g(this,"possibleSeedDrop",["Water Seed"]);g(this,"numOfDays",1);g(this,"numOfDaysRemaining",1);g(this,"chanceToDropSeed",100);g(this,"minSeedDrop",1);g(this,"maxSeedDrop",1);g(this,"minExpGain",50);g(this,"maxExpGain",50);g(this,"description","Grows a planet which more seeds can be grown from.");g(this,"successRate",100);g(this,"isGrown",!1)}}const le=[];function ve(n,e=P){let t;const i=new Set;function s(o){if(z(n,o)&&(n=o,t)){const l=!le.length;for(const c of i)c[1](),le.push(c,n);if(l){for(let c=0;c<le.length;c+=2)le[c][0](le[c+1]);le.length=0}}}function r(o){s(o(n))}function a(o,l=P){const c=[o,l];return i.add(c),i.size===1&&(t=e(s,r)||P),o(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:a}}const ie=ve({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),se=ve({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]}),Y=Object.create(null);Y.open="0";Y.close="1";Y.ping="2";Y.pong="3";Y.message="4";Y.upgrade="5";Y.noop="6";const Te=Object.create(null);Object.keys(Y).forEach(n=>{Te[Y[n]]=n});const Je={type:"error",data:"parser error"},Yt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Gt=typeof ArrayBuffer=="function",zt=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,ut=({type:n,data:e},t,i)=>Yt&&e instanceof Blob?t?i(e):bt(e,i):Gt&&(e instanceof ArrayBuffer||zt(e))?t?i(e):bt(new Blob([e]),i):i(Y[n]+(e||"")),bt=(n,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(n)};function _t(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Ue;function Nn(n,e){if(Yt&&n.data instanceof Blob)return n.data.arrayBuffer().then(_t).then(e);if(Gt&&(n.data instanceof ArrayBuffer||zt(n.data)))return e(_t(n.data));ut(n,!1,t=>{Ue||(Ue=new TextEncoder),e(Ue.encode(t))})}const wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<wt.length;n++)ge[wt.charCodeAt(n)]=n;const Rn=n=>{let e=n.length*.75,t=n.length,i,s=0,r,a,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(i=0;i<t;i+=4)r=ge[n.charCodeAt(i)],a=ge[n.charCodeAt(i+1)],o=ge[n.charCodeAt(i+2)],l=ge[n.charCodeAt(i+3)],u[s++]=r<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|l&63;return c},Bn=typeof ArrayBuffer=="function",ft=(n,e)=>{if(typeof n!="string")return{type:"message",data:Kt(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Pn(n.substring(1),e)}:Te[t]?n.length>1?{type:Te[t],data:n.substring(1)}:{type:Te[t]}:Je},Pn=(n,e)=>{if(Bn){const t=Rn(n);return Kt(t,e)}else return{base64:!0,data:n}},Kt=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},jt="",$n=(n,e)=>{const t=n.length,i=new Array(t);let s=0;n.forEach((r,a)=>{ut(r,!1,o=>{i[a]=o,++s===t&&e(i.join(jt))})})},Ln=(n,e)=>{const t=n.split(jt),i=[];for(let s=0;s<t.length;s++){const r=ft(t[s],e);if(i.push(r),r.type==="error")break}return i};function Vn(){return new TransformStream({transform(n,e){Nn(n,t=>{const i=t.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}n.data&&typeof n.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let He;function Ee(n){return n.reduce((e,t)=>e+t.length,0)}function Se(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let i=0;for(let s=0;s<e;s++)t[s]=n[0][i++],i===n[0].length&&(n.shift(),i=0);return n.length&&i<n[0].length&&(n[0]=n[0].slice(i)),t}function In(n,e){He||(He=new TextDecoder);const t=[];let i=0,s=-1,r=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(i===0){if(Ee(t)<1)break;const l=Se(t,1);r=(l[0]&128)===128,s=l[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if(Ee(t)<2)break;const l=Se(t,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(Ee(t)<8)break;const l=Se(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(Je);break}s=u*Math.pow(2,32)+c.getUint32(4),i=3}else{if(Ee(t)<s)break;const l=Se(t,s);o.enqueue(ft(r?l:He.decode(l),e)),i=0}if(s===0||s>n){o.enqueue(Je);break}}}})}const Jt=4;function N(n){if(n)return qn(n)}function qn(n){for(var e in N.prototype)n[e]=N.prototype[e];return n}N.prototype.on=N.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};N.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};N.prototype.off=N.prototype.removeListener=N.prototype.removeAllListeners=N.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,s=0;s<t.length;s++)if(i=t[s],i===e||i.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+n],this};N.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,s=t.length;i<s;++i)t[i].apply(this,e)}return this};N.prototype.emitReserved=N.prototype.emit;N.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};N.prototype.hasListeners=function(n){return!!this.listeners(n).length};const qe=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),I=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Mn="arraybuffer";function Xt(n,...e){return e.reduce((t,i)=>(n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}const Fn=I.setTimeout,Un=I.clearTimeout;function Me(n,e){e.useNativeTimers?(n.setTimeoutFn=Fn.bind(I),n.clearTimeoutFn=Un.bind(I)):(n.setTimeoutFn=I.setTimeout.bind(I),n.clearTimeoutFn=I.clearTimeout.bind(I))}const Hn=1.33;function Wn(n){return typeof n=="string"?Yn(n):Math.ceil((n.byteLength||n.size)*Hn)}function Yn(n){let e=0,t=0;for(let i=0,s=n.length;i<s;i++)e=n.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function Qt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Gn(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function zn(n){let e={},t=n.split("&");for(let i=0,s=t.length;i<s;i++){let r=t[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Kn extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class ht extends N{constructor(e){super(),this.writable=!1,Me(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new Kn(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ft(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Gn(e);return t.length?"?"+t:""}}class jn extends ht{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Ln(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,$n(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Qt()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Zt=!1;try{Zt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Jn=Zt;function Xn(){}class Qn extends jn{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class W extends N{constructor(e,t,i){super(),this.createRequest=e,Me(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=Xt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=W.requestsCount++,W.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Xn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete W.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}W.requestsCount=0;W.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",vt);else if(typeof addEventListener=="function"){const n="onpagehide"in I?"pagehide":"unload";addEventListener(n,vt,!1)}}function vt(){for(let n in W.requests)W.requests.hasOwnProperty(n)&&W.requests[n].abort()}const Zn=function(){const n=en({xdomain:!1});return n&&n.responseType!==null}();class ei extends Qn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Zn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new W(en,this.uri(),e)}}function en(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Jn))return new XMLHttpRequest}catch{}if(!e)try{return new I[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const tn=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ti extends ht{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=tn?{}:Xt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],s=t===e.length-1;ut(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}s&&qe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Qt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const We=I.WebSocket||I.MozWebSocket;class ni extends ti{createSocket(e,t,i){return tn?new We(e,t,i):t?new We(e,t):new We(e)}doWrite(e,t){this.ws.send(t)}}class ii extends ht{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=In(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),s=Vn();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const r=()=>{i.read().then(({done:o,value:l})=>{o||(this.onPacket(l),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],s=t===e.length-1;this._writer.write(i).then(()=>{s&&qe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const si={websocket:ni,webtransport:ii,polling:ei},ri=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xe(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),i=n.indexOf("]");t!=-1&&i!=-1&&(n=n.substring(0,t)+n.substring(t,i).replace(/:/g,";")+n.substring(i,n.length));let s=ri.exec(n||""),r={},a=14;for(;a--;)r[oi[a]]=s[a]||"";return t!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=ai(r,r.path),r.queryKey=li(r,r.query),r}function ai(n,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function li(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(t[s]=r)}),t}const Qe=typeof addEventListener=="function"&&typeof removeEventListener=="function",De=[];Qe&&addEventListener("offline",()=>{De.forEach(n=>n())},!1);class J extends N{constructor(e,t){if(super(),this.binaryType=Mn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=Xe(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=Xe(t.host).host);Me(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const s=i.prototype.name;this.transports.push(s),this._transportsByName[s]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zn(this.opts.query)),Qe&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},De.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Jt,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&J.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",J.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(t+=Wn(s)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,qe(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,s){if(typeof t=="function"&&(s=t,t=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:t,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(J.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Qe&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=De.indexOf(this._offlineEventListener);i!==-1&&De.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}J.protocol=Jt;class ci extends J{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;J.priorWebsocketSuccess=!1;const s=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!i)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;J.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=t.name,this.emitReserved("upgradeError",p)}}))};function r(){i||(i=!0,u(),t.close(),t=null)}const a=f=>{const p=new Error("probe error: "+f);p.transport=t.name,r(),this.emitReserved("upgradeError",p)};function o(){a("transport closed")}function l(){a("socket closed")}function c(f){t&&f.name!==t.name&&r()}const u=()=>{t.removeListener("open",s),t.removeListener("error",a),t.removeListener("close",o),this.off("close",l),this.off("upgrading",c)};t.once("open",s),t.once("error",a),t.once("close",o),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let ui=class extends ci{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(s=>si[s]).filter(s=>!!s)),super(e,i)}};function fi(n,e="",t){let i=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),i=Xe(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(t&&t.port===i.port?"":":"+i.port),i}const hi=typeof ArrayBuffer=="function",pi=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,nn=Object.prototype.toString,di=typeof Blob=="function"||typeof Blob<"u"&&nn.call(Blob)==="[object BlobConstructor]",mi=typeof File=="function"||typeof File<"u"&&nn.call(File)==="[object FileConstructor]";function pt(n){return hi&&(n instanceof ArrayBuffer||pi(n))||di&&n instanceof Blob||mi&&n instanceof File}function Oe(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,i=n.length;t<i;t++)if(Oe(n[t]))return!0;return!1}if(pt(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Oe(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Oe(n[t]))return!0;return!1}function yi(n){const e=[],t=n.data,i=n;return i.data=Ze(t,e),i.attachments=e.length,{packet:i,buffers:e}}function Ze(n,e){if(!n)return n;if(pt(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let i=0;i<n.length;i++)t[i]=Ze(n[i],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=Ze(n[i],e));return t}return n}function gi(n,e){return n.data=et(n.data,e),delete n.attachments,n}function et(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=et(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=et(n[t],e));return n}const bi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_i=5;var k;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(k||(k={}));class wi{constructor(e){this.replacer=e}encode(e){return(e.type===k.EVENT||e.type===k.ACK)&&Oe(e)?this.encodeAsBinary({type:e.type===k.EVENT?k.BINARY_EVENT:k.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===k.BINARY_EVENT||e.type===k.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=yi(e),i=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(i),s}}function kt(n){return Object.prototype.toString.call(n)==="[object Object]"}class dt extends N{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===k.BINARY_EVENT;i||t.type===k.BINARY_ACK?(t.type=i?k.EVENT:k.ACK,this.reconstructor=new vi(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(pt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(k[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===k.BINARY_EVENT||i.type===k.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(r,t)}else i.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}i.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(dt.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case k.CONNECT:return kt(t);case k.DISCONNECT:return t===void 0;case k.CONNECT_ERROR:return typeof t=="string"||kt(t);case k.EVENT:case k.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&bi.indexOf(t[0])===-1);case k.ACK:case k.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vi{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=gi(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ki=Object.freeze(Object.defineProperty({__proto__:null,Decoder:dt,Encoder:wi,get PacketType(){return k},protocol:_i},Symbol.toStringTag,{value:"Module"}));function M(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const Ei=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class sn extends N{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[M(e,"open",this.onopen.bind(this)),M(e,"packet",this.onpacket.bind(this)),M(e,"error",this.onerror.bind(this)),M(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,s,r;if(Ei.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:k.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,f=t.pop();this._registerAckCallback(u,f),a.id=u}const o=(s=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},s),a=(...o)=>{this.io.clearTimeoutFn(r),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((i,s)=>{const r=(a,o)=>a?s(a):i(o);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:k.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case k.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case k.EVENT:case k.BINARY_EVENT:this.onevent(e);break;case k.ACK:case k.BINARY_ACK:this.onack(e);break;case k.DISCONNECT:this.ondisconnect();break;case k.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...s){i||(i=!0,t.packet({type:k.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:k.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function pe(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}pe.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};pe.prototype.reset=function(){this.attempts=0};pe.prototype.setMin=function(n){this.ms=n};pe.prototype.setMax=function(n){this.max=n};pe.prototype.setJitter=function(n){this.jitter=n};class tt extends N{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Me(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new pe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||ki;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ui(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=M(t,"open",function(){i.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=M(t,"error",r);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),t.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(M(e,"ping",this.onping.bind(this)),M(e,"data",this.ondata.bind(this)),M(e,"error",this.onerror.bind(this)),M(e,"close",this.onclose.bind(this)),M(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){qe(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new sn(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ye={};function Ae(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=fi(n,e.path||"/socket.io"),i=t.source,s=t.id,r=t.path,a=ye[s]&&r in ye[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new tt(i,e):(ye[s]||(ye[s]=new tt(i,e)),l=ye[s]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(Ae,{Manager:tt,Socket:sn,io:Ae,connect:Ae});const x=Ae("http://10.3.112.82:6912"),Si=ve(["Click 'Next' to begin."]),rn=ve("lobby"),B=ve("1");function on(n,e,t=0){let i={};if(n==="lobby")switch(e){case"1":B.set("2"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"2":B.set("3"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0};break;case"3":case"3-again":B.set("4"),i={option1Visible:!0,option1Disabled:!1,option1:"Yes",option2Visible:!0,option2Disabled:!1,option2:"No",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"4":t===1?(B.set("5"),x.emit("5-player-ready"),i={option1Visible:!0,option1Disabled:!0,option1:"Waiting",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1}):t===2&&(B.set("3-again"),i={option1Visible:!0,option1Disabled:!1,option1:"Next But For Real This Time",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0});break;case"5":B.set("6"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"6":B.set("7"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"7":B.set("8"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"8":B.set("9"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"9":B.set("10"),i={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"10":B.set("11"),x.emit("11-player-ready"),i={option1Visible:!0,option1Disabled:!0,option1:"Waiting for your dead weight teammate",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"11":B.set("12"),i={option1Visible:!0,option1Disabled:!0,option1:"Disabled During Demo",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break}return i}function Le(n={player:{}}){n.optionSelected=n.optionSelected??0;let e=["Something went wrong... This text should not display."];if(n.chapter==="lobby")switch(n.part){case"1":e=["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."];break;case"2":e=["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"];break;case"3":e=["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."];break;case"3-again":e=["Oh good, I was hoping I didn't hear that correctly. What did you say your name actually was?"];break;case"4":e=[`You're name is... ${n.player.name}?`];break;case"5":e=["Great! Not the name of course, the fact that you're ready. When both of you are ready the button below will say 'Next', that means you're both ready to move forward."];break;case"6":e=[`Good, now let me introduce the two of you to each other. First we have ${ke(ie).name}${ke(ie).id===n.player.id?"(you)":""} playing as the male character. Next, we have ${ke(se).name}${ke(se).id===n.player.id?"(you)":""} playing as the female role.`];break;case"7":e=["Next, I'll explain the mechanics of the game. This game is more like an interactive multiplayer story with some DND elements. The only actions you'll be performing are selecting answers below (like 'Next') and rolling dice to decide outcomes. Select 'Next' to learn how dice rolling works."];break;case"8":e=["Each player controls a unique character, these characters have different stats.",`For instance these are your character stats:
          <br> Name: ${n.player.name}
          <br> Gender: ${n.player.gender}
          <br> Health: ${n.player.stats.maxHealth}
          <br> Strength: ${n.player.stats.strength}
          <br> Defense: ${n.player.stats.defense}
          <br> Speed: ${n.player.stats.speed}
          <br> Intellect: ${n.player.stats.intellect}
          <br> Charisma: ${n.player.stats.charisma}
          `];break;case"9":e=["These stats play a crucial role when it comes to events. Events are things that happen that require dice rolls or decisions to be made. For example, someone blocks your path and you need to roll for charisma. You need to push a heavy box so you roll for strength. Something falls on you so you roll for defense."];break;case"10":e=["When you roll, your base stat is added to the dice roll and that final number determines the outcome of the situation. If you're charisma is too low, you won't convince the person. Strength too low means you can't push that box. If your defense is too low you your health stat will suffer when something hurts you."];break;case"11":e=["When you're both ready, we'll move on and practice some dice rolls so you grasp the core mechanics of the game."];break;case"12":e=[""];break}return e}class Ci{constructor(e){g(this,"id",0);g(this,"worldName","World");g(this,"maxActions",1);g(this,"remainingActions",1);g(this,"dayCount",1);g(this,"currentDay","Unoni");g(this,"currentDayIndex",1);g(this,"currentWeek",1);g(this,"currentMonth","New");g(this,"currentMonthIndex",1);g(this,"currentYear","Year of the Farmer");g(this,"currentYearIndex",1);g(this,"currentSeason","Spring");g(this,"plantedSeeds",[]);g(this,"unlockedSeeds",[]);g(this,"player",new On({playerName:"Guest"}));this.id=e.id??this.id,this.worldName=e.worldName??this.worldName,this.maxActions=e.maxActions??this.maxActions,this.remainingActions=e.remainingActions??this.remainingActions,this.dayCount=e.dayCount??this.dayCount,this.currentDay=e.currentDay??this.currentDay,this.currentDayIndex=e.currentDayIndex??this.currentDayIndex,this.currentWeek=e.currentWeek??this.currentWeek,this.currentMonth=e.currentMonth??this.currentMonth,this.currentMonthIndex=e.currentMonthIndex??this.currentMonthIndex,this.currentYear=e.currentYear??this.currentYear,this.currentYearIndex=e.currentYearIndex??this.currentYearIndex,this.currentSeason=e.currentSeason??this.currentSeason,this.plantedSeeds=e.plantedSeeds??this.plantedSeeds,this.unlockedSeeds=e.unlockedSeeds??this.unlockedSeeds,this.player=e.player??this.player,localStorage.getItem("worldCount")??localStorage.setItem("worldCount","1"),localStorage.getItem("seedCount")??localStorage.setItem("seedCount","1")}startGame(){this.newDay()}isFirstDay(){return this.dayCount===1}firstDay(){this.displayWorldStats()}newDay(){if(this.isFirstDay()){this.firstDay();return}this.remainingActions=this.maxActions,this.plantedSeeds.forEach(e=>e.numOfDaysRemaining-=1),this.harvestSeeds()}displayWorldStats(){let e=[`
      Remaining Actions: ${this.remainingActions}<br>
      Days Passed: ${this.dayCount}<br>
      Current Day: ${this.currentDay}<br>
      Day of the year: ${this.currentDayIndex}<br>
      Current Week: ${this.currentWeek}<br>
      Current Month: ${this.currentMonth} Moon<br>
      Month of the Year: ${this.currentMonthIndex}<br>
      Current Year: ${this.currentYearIndex} - ${this.currentYear}<br>
      Current Season: ${this.currentSeason}<br>
      dumy text to fill screen<br>
      for<br>
      scrollbar<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .
      `];Si.set(e)}displayHarvestYield(){return[]}plantSeed(e){this.remainingActions-=1}harvestSeeds(){this.plantedSeeds.length!==0&&this.plantedSeeds.forEach(e=>{if(e.numOfDaysRemaining===0){e.isGrown=!0,this.player.playerInventory=[...this.player.playerInventory,{...e}];const t=this.plantedSeeds.indexOf(e);this.plantedSeeds.splice(t,1)}})}hasActionsRemaining(){return this.remainingActions>0}}function Ti(n){let e,t,i,s,r;const a=n[3].default,o=Ye(a,n,n[2],null);return{c(){e=A("button"),o&&o.c(),y(e,"class",t="btn "+n[0]+" svelte-1utwdw0"),e.disabled=n[1]},m(l,c){D(l,e,c),o&&o.m(e,null),i=!0,s||(r=re(e,"click",n[4]),s=!0)},p(l,[c]){o&&o.p&&(!i||c&4)&&ze(o,a,l,l[2],i?Ge(a,l[2],c,null):Ke(l[2]),null),(!i||c&1&&t!==(t="btn "+l[0]+" svelte-1utwdw0"))&&y(e,"class",t),(!i||c&2)&&(e.disabled=l[1])},i(l){i||(v(o,l),i=!0)},o(l){C(o,l),i=!1},d(l){l&&T(e),o&&o.d(l),s=!1,r()}}}function Di(n,e,t){let{$$slots:i={},$$scope:s}=e,{btnType:r="terminal-option"}=e,{disabled:a=!1}=e;function o(l){Ht.call(this,n,l)}return n.$$set=l=>{"btnType"in l&&t(0,r=l.btnType),"disabled"in l&&t(1,a=l.disabled),"$$scope"in l&&t(2,s=l.$$scope)},[r,a,s,i,o]}class de extends Z{constructor(e){super(),Q(this,e,Di,Ti,z,{btnType:0,disabled:1})}}function Oi(n){let e,t,i,s;return t=new cs({props:{gameData:n[0],dialogueOptions:n[1],terminalColor:"grey"}}),{c(){e=A("div"),q(t.$$.fragment),y(e,"class","main-content svelte-abemhi")},m(r,a){D(r,e,a),L(t,e,null),s=!0},p(r,[a]){const o={};a&1&&(o.gameData=r[0]),a&2&&(o.dialogueOptions=r[1]),t.$set(o)},i(r){s||(v(t.$$.fragment,r),r&&(i||F(()=>{i=ct(e,X,{}),i.start()})),s=!0)},o(r){C(t.$$.fragment,r),s=!1},d(r){r&&T(e),V(t)}}}function Ai(n,e,t){let i,s;U(n,se,o=>t(2,i=o)),U(n,ie,o=>t(3,s=o));let r={playingAs:"",bothPlayersJoined:!1,chapter5NumOfReadyPlayers:0,chapter11NumOfReadyPlayers:0},a={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1};return Ie(()=>{x.on("connect",()=>{x.emit("frontend-mounted"),console.log(`User ID: ${x.id} connected!`)}),x.on("playing-as",o=>{x.id===o.socketID&&o.playerCount===1&&t(0,r.playingAs="male",r),x.id===o.socketID&&o.playerCount===2&&t(0,r.playingAs="female",r),console.log("Playing as "+r.playingAs),console.log("Socket.id = "+x.id),console.log("data.socketID = "+o.socketID)}),x.on("connect_error",o=>console.error("Connection error:",o)),x.on("p2-joined",()=>t(0,r.bothPlayersJoined=!0,r)),x.on("set-users",o=>{Object.entries(o).forEach(([l,c])=>{ie.update(u=>(u.id=o.p1,u)),se.update(u=>(u.id=o.p2,u))})}),x.on("5-player-ready",()=>{t(0,r.chapter5NumOfReadyPlayers+=1,r),r.chapter5NumOfReadyPlayers===2&&t(1,a={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("11-player-ready",()=>{t(0,r.chapter11NumOfReadyPlayers+=1,r),r.chapter11NumOfReadyPlayers===2&&t(1,a={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("set-male-player-name",o=>ie.set({...s,name:o||"Peasant Boy"})),x.on("set-female-player-name",o=>se.set({...i,name:o||"Peasant Girl"})),x.emit("client-ready")}),[r,a]}class xi extends Z{constructor(e){super(),Q(this,e,Ai,Oi,z,{})}}function Ni(n){let e,t,i,s,r,a,o;return t=new is({props:{sidebarExpanded:n[0]}}),t.$on("select",n[1]),t.$on("toggle-sidebar",n[2]),r=new xi({}),{c(){e=A("div"),q(t.$$.fragment),i=$(),s=A("div"),q(r.$$.fragment),y(s,"class","screen svelte-kvlyqv"),y(e,"class","client svelte-kvlyqv"),j(e,"client-collapsed",!n[0])},m(l,c){D(l,e,c),L(t,e,null),E(e,i),E(e,s),L(r,s,null),o=!0},p(l,[c]){const u={};c&1&&(u.sidebarExpanded=l[0]),t.$set(u),(!o||c&1)&&j(e,"client-collapsed",!l[0])},i(l){o||(v(t.$$.fragment,l),v(r.$$.fragment,l),l&&(a||F(()=>{a=ct(e,X,{duration:2e3}),a.start()})),o=!0)},o(l){C(t.$$.fragment,l),C(r.$$.fragment,l),o=!1},d(l){l&&T(e),V(t),V(r)}}}function Ri(n,e,t){let i=!1;function s(a){a.detail}return[i,s,()=>t(0,i=!i)]}class Bi extends Z{constructor(e){super(),Q(this,e,Ri,Ni,z,{})}}function nt(){return nt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nt.apply(this,arguments)}var Pi={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,e){},onStringTyped:function(n,e){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,e){},onTypingResumed:function(n,e){},onReset:function(n){},onStop:function(n,e){},onStart:function(n,e){},onDestroy:function(n){}},$i=new(function(){function n(){}var e=n.prototype;return e.load=function(t,i,s){if(t.el=typeof s=="string"?document.querySelector(s):s,t.options=nt({},Pi,i),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(c){return c.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),a=r.length;if(a)for(var o=0;o<a;o+=1)t.strings.push(r[o].innerHTML.trim())}for(var l in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[l]=l;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var i="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+i+"]")){var s=document.createElement("style");s.setAttribute(i,"true"),s.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(s)}},e.appendFadeOutAnimationCss=function(t){var i="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+i+"]")){var s=document.createElement("style");s.setAttribute(i,"true"),s.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(s)}},n}()),Et=new(function(){function n(){}var e=n.prototype;return e.typeHtmlChars=function(t,i,s){if(s.contentType!=="html")return i;var r=t.substring(i).charAt(0);if(r==="<"||r==="&"){var a;for(a=r==="<"?">":";";t.substring(i+1).charAt(0)!==a&&!(1+ ++i>t.length););i++}return i},e.backSpaceHtmlChars=function(t,i,s){if(s.contentType!=="html")return i;var r=t.substring(i).charAt(0);if(r===">"||r===";"){var a;for(a=r===">"?"<":"&";t.substring(i-1).charAt(0)!==a&&!(--i<0););i--}return i},n}()),Ve=function(){function n(t,i){$i.load(this,i,t),this.begin()}var e=n.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,i){var s=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),a=1;this.pause.status!==!0?this.timeout=setTimeout(function(){i=Et.typeHtmlChars(t,i,s);var o=0,l=t.substring(i);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var c=1;c+=(l=/\d+/.exec(l)[0]).length,o=parseInt(l),s.temporaryPause=!0,s.options.onTypingPaused(s.arrayPos,s),t=t.substring(0,i)+t.substring(i+c),s.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;t.substring(i+a).charAt(0)!=="`"&&(a++,!(i+a>t.length)););var u=t.substring(0,i),f=t.substring(u.length+1,i+a),p=t.substring(i+a+1);t=u+f+p,a--}s.timeout=setTimeout(function(){s.toggleBlinking(!1),i>=t.length?s.doneTyping(t,i):s.keepTyping(t,i,a),s.temporaryPause&&(s.temporaryPause=!1,s.options.onTypingResumed(s.arrayPos,s))},o)},r):this.setPauseStatus(t,i,!0)},e.keepTyping=function(t,i,s){i===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,i+=s);this.replaceText(r),this.typewrite(t,i)},e.doneTyping=function(t,i){var s=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){s.backspace(t,i)},this.backDelay))},e.backspace=function(t,i){var s=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){i=Et.backSpaceHtmlChars(t,i,s);var a=t.substring(0,i);if(s.replaceText(a),s.smartBackspace){var o=s.strings[s.arrayPos+1];s.stopNum=o&&a===o.substring(0,i)?i:0}i>s.stopNum?(i--,s.backspace(t,i)):i<=s.stopNum&&(s.arrayPos++,s.arrayPos===s.strings.length?(s.arrayPos=0,s.options.onLastStringBackspaced(),s.shuffleStringsIfNeeded(),s.begin()):s.typewrite(s.strings[s.sequence[s.arrayPos]],i))},r)}else this.setPauseStatus(t,i,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,i,s){this.pause.typewrite=s,this.pause.curString=t,this.pause.curStrPos=i},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(i){t.stop()}),this.el.addEventListener("blur",function(i){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();function St(n){let e,t;return e=new de({props:{btnType:"terminal-option",disabled:n[0].option1Disabled,$$slots:{default:[Li]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){q(e.$$.fragment)},m(i,s){L(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.disabled=i[0].option1Disabled),s&131073&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Li(n){let e=n[0].option1+"",t;return{c(){t=K(e)},m(i,s){D(i,t,s)},p(i,s){s&1&&e!==(e=i[0].option1+"")&&he(t,e)},d(i){i&&T(t)}}}function Ct(n){let e,t;return e=new de({props:{btnType:"terminal-option",disabled:n[0].option2Disabled,$$slots:{default:[Vi]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){q(e.$$.fragment)},m(i,s){L(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.disabled=i[0].option2Disabled),s&131073&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Vi(n){let e=n[0].option2+"",t;return{c(){t=K(e)},m(i,s){D(i,t,s)},p(i,s){s&1&&e!==(e=i[0].option2+"")&&he(t,e)},d(i){i&&T(t)}}}function Tt(n){let e,t;return e=new de({props:{btnType:"terminal-option",disabled:n[0].option3Disabled,$$slots:{default:[Ii]},$$scope:{ctx:n}}}),e.$on("click",n[10]),{c(){q(e.$$.fragment)},m(i,s){L(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.disabled=i[0].option3Disabled),s&131073&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Ii(n){let e=n[0].option3+"",t;return{c(){t=K(e)},m(i,s){D(i,t,s)},p(i,s){s&1&&e!==(e=i[0].option3+"")&&he(t,e)},d(i){i&&T(t)}}}function Dt(n){let e,t,i;return{c(){e=A("input"),y(e,"type","text"),y(e,"maxlength","20"),y(e,"class","terminal-input svelte-f49isc")},m(s,r){D(s,e,r),xe(e,n[2]),t||(i=[re(e,"input",n[11]),re(e,"input",n[4])],t=!0)},p(s,r){r&4&&e.value!==s[2]&&xe(e,s[2])},d(s){s&&T(e),t=!1,G(i)}}}function qi(n){let e,t,i,s,r,a,o,l,c,u,f=n[0].option1Visible&&St(n),p=n[0].option2Visible&&Ct(n),m=n[0].option3Visible&&Tt(n),h=n[0].inputVisible&&Dt(n);return{c(){e=A("div"),t=A("div"),t.innerHTML='<p id="terminal-text" class="svelte-f49isc"></p> <div class="dice-screen svelte-f49isc"></div>',i=$(),s=A("div"),f&&f.c(),r=$(),p&&p.c(),a=$(),m&&m.c(),o=$(),h&&h.c(),y(t,"class","terminal-screen svelte-f49isc"),y(s,"class","terminal-option-flex-group"),y(e,"class",l="terminal terminal__"+n[1]+" svelte-f49isc")},m(d,b){D(d,e,b),E(e,t),E(e,i),E(e,s),f&&f.m(s,null),E(s,r),p&&p.m(s,null),E(s,a),m&&m.m(s,null),E(s,o),h&&h.m(s,null),u=!0},p(d,[b]){d[0].option1Visible?f?(f.p(d,b),b&1&&v(f,1)):(f=St(d),f.c(),v(f,1),f.m(s,r)):f&&(te(),C(f,1,1,()=>{f=null}),ne()),d[0].option2Visible?p?(p.p(d,b),b&1&&v(p,1)):(p=Ct(d),p.c(),v(p,1),p.m(s,a)):p&&(te(),C(p,1,1,()=>{p=null}),ne()),d[0].option3Visible?m?(m.p(d,b),b&1&&v(m,1)):(m=Tt(d),m.c(),v(m,1),m.m(s,o)):m&&(te(),C(m,1,1,()=>{m=null}),ne()),d[0].inputVisible?h?h.p(d,b):(h=Dt(d),h.c(),h.m(s,null)):h&&(h.d(1),h=null),(!u||b&2&&l!==(l="terminal terminal__"+d[1]+" svelte-f49isc"))&&y(e,"class",l)},i(d){u||(v(f),v(p),v(m),d&&F(()=>{u&&(c||(c=$e(e,X,{duration:1e3},!0)),c.run(1))}),u=!0)},o(d){C(f),C(p),C(m),d&&(c||(c=$e(e,X,{duration:1e3},!1)),c.run(0)),u=!1},d(d){d&&T(e),f&&f.d(),p&&p.d(),m&&m.d(),h&&h.d(),d&&c&&c.end()}}}function Mi(n,e,t){let i,s,r,a;U(n,B,_=>t(6,i=_)),U(n,rn,_=>t(7,s=_)),U(n,se,_=>t(13,r=_)),U(n,ie,_=>t(14,a=_));let{terminalColor:o="grey"}=e,{gameData:l}=e,{dialogueOptions:c}=e,u,f="",p=Le({chapter:s,part:i,player:h()});Ie(()=>{u=new Ve("#terminal-text",{strings:p,typeSpeed:20})});function m(_,oe=!1){t(0,c=on(s,i,_)),u.destroy(),u=new Ve("#terminal-text",{strings:Le({chapter:s,part:i,player:h(),optionSelected:_}),typeSpeed:20,backSpeed:10,backDelay:2e3})}function h(){return l.playingAs==="male"?a:r}function d(){(s==="lobby"&&i==="3"||i==="3-again")&&(l.playingAs==="male"?x.emit("set-male-player-name",f.trim()):x.emit("set-female-player-name",f.trim()))}const b=()=>m(1),S=()=>m(2),w=()=>m(3);function O(){f=this.value,t(2,f)}return n.$$set=_=>{"terminalColor"in _&&t(1,o=_.terminalColor),"gameData"in _&&t(5,l=_.gameData),"dialogueOptions"in _&&t(0,c=_.dialogueOptions)},n.$$.update=()=>{n.$$.dirty&224&&l.bothPlayersJoined&&s==="lobby"&&i==="1"&&(t(0,c.option1Disabled=!1,c),t(0,c.option1="Ready",c)),n.$$.dirty&224&&l.goToChapter6&&s==="lobby"&&i==="5"&&m(0)},[c,o,f,m,d,l,i,s,b,S,w,O]}class Fi extends Z{constructor(e){super(),Q(this,e,Mi,qi,z,{terminalColor:1,gameData:5,dialogueOptions:0})}}const Ui=n=>({}),Ot=n=>({}),Hi=n=>({}),At=n=>({});function Wi(n){let e,t,i,s;return{c(){e=R("svg"),t=R("circle"),i=R("path"),s=R("path"),y(t,"cx","12"),y(t,"cy","12"),y(t,"r","10"),y(i,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),y(s,"d","M12 17h.01"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 24 24"),y(e,"class","icon svelte-16xfpde")},m(r,a){D(r,e,a),E(e,t),E(e,i),E(e,s)},d(r){r&&T(e)}}}function Yi(n){let e,t,i;return{c(){e=R("svg"),t=R("polyline"),i=R("line"),y(t,"points","4 17 10 11 4 5"),y(i,"x1","12"),y(i,"x2","20"),y(i,"y1","19"),y(i,"y2","19"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 24 24"),y(e,"class","icon svelte-16xfpde")},m(s,r){D(s,e,r),E(e,t),E(e,i)},d(s){s&&T(e)}}}function Gi(n){let e,t,i;return{c(){e=R("svg"),t=R("path"),i=R("circle"),y(t,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),y(i,"cx","12"),y(i,"cy","7"),y(i,"r","4"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 24 24"),y(e,"class","icon svelte-16xfpde")},m(s,r){D(s,e,r),E(e,t),E(e,i)},d(s){s&&T(e)}}}function zi(n){let e,t,i;return{c(){e=R("svg"),t=R("path"),i=R("path"),y(t,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),y(i,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 24 24"),y(e,"class","icon svelte-16xfpde")},m(s,r){D(s,e,r),E(e,t),E(e,i)},d(s){s&&T(e)}}}function xt(n){let e,t,i,s,r,a,o;const l=n[4].title,c=Ye(l,n,n[3],At),u=c||Ki(),f=n[4].description,p=Ye(f,n,n[3],Ot),m=p||ji();return{c(){e=A("div"),t=A("h2"),u&&u.c(),i=$(),s=A("p"),m&&m.c(),y(t,"class","item-title svelte-16xfpde"),y(s,"class","item-text svelte-16xfpde"),y(e,"class","item-text-wrapper svelte-16xfpde")},m(h,d){D(h,e,d),E(e,t),u&&u.m(t,null),E(e,i),E(e,s),m&&m.m(s,null),o=!0},p(h,d){c&&c.p&&(!o||d&8)&&ze(c,l,h,h[3],o?Ge(l,h[3],d,Hi):Ke(h[3]),At),p&&p.p&&(!o||d&8)&&ze(p,f,h,h[3],o?Ge(f,h[3],d,Ui):Ke(h[3]),Ot)},i(h){o||(v(u,h),v(m,h),h&&F(()=>{o&&(a&&a.end(1),r=ct(e,X,{duration:500}),r.start())}),o=!0)},o(h){C(u,h),C(m,h),r&&r.invalidate(),h&&(a=Sn(e,X,{duration:250})),o=!1},d(h){h&&T(e),u&&u.d(h),m&&m.d(h),h&&a&&a.end()}}}function Ki(n){let e;return{c(){e=K("Title")},m(t,i){D(t,e,i)},d(t){t&&T(e)}}}function ji(n){let e;return{c(){e=K("Brief description")},m(t,i){D(t,e,i)},d(t){t&&T(e)}}}function Ji(n){let e,t,i,s,r,a;function o(f,p){return f[0]==="seed"?zi:f[0]==="player"?Gi:f[0]==="terminal"?Yi:Wi}let l=o(n),c=l(n),u=!n[2]&&xt(n);return{c(){e=A("div"),c.c(),t=$(),u&&u.c(),y(e,"class",i="item item-color__"+n[1]+" svelte-16xfpde")},m(f,p){D(f,e,p),c.m(e,null),E(e,t),u&&u.m(e,null),s=!0,r||(a=re(e,"click",n[5]),r=!0)},p(f,[p]){l!==(l=o(f))&&(c.d(1),c=l(f),c&&(c.c(),c.m(e,t))),f[2]?u&&(te(),C(u,1,1,()=>{u=null}),ne()):u?(u.p(f,p),p&4&&v(u,1)):(u=xt(f),u.c(),v(u,1),u.m(e,null)),(!s||p&2&&i!==(i="item item-color__"+f[1]+" svelte-16xfpde"))&&y(e,"class",i)},i(f){s||(v(u),s=!0)},o(f){C(u),s=!1},d(f){f&&T(e),c.d(),u&&u.d(),r=!1,a()}}}function Xi(n,e,t){let{$$slots:i={},$$scope:s}=e,{iconType:r="unkown"}=e,{color:a="grey"}=e,{collapsed:o=!1}=e;function l(c){Ht.call(this,n,c)}return n.$$set=c=>{"iconType"in c&&t(0,r=c.iconType),"color"in c&&t(1,a=c.color),"collapsed"in c&&t(2,o=c.collapsed),"$$scope"in c&&t(3,s=c.$$scope)},[r,a,o,s,i,l]}class Qi extends Z{constructor(e){super(),Q(this,e,Xi,Ji,z,{iconType:0,color:1,collapsed:2})}}function Zi(n){let e;return{c(){e=A("span"),e.textContent="Log",y(e,"slot","title")},m(t,i){D(t,e,i)},p:P,d(t){t&&T(e)}}}function es(n){let e;return{c(){e=A("span"),e.textContent="View logged messages",y(e,"slot","description")},m(t,i){D(t,e,i)},p:P,d(t){t&&T(e)}}}function ts(n){let e,t,i,s,r,a,o,l,c;return a=new Qi({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[es],title:[Zi]},$$scope:{ctx:n}}}),a.$on("click",n[3]),{c(){e=A("div"),t=R("svg"),i=R("path"),s=R("path"),r=$(),q(a.$$.fragment),y(i,"d","M19 15V9"),y(s,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),y(t,"class","icon collapse-icon svelte-1tpwflx"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 24 24"),j(t,"rotate",!n[0]),y(e,"class","sidebar svelte-1tpwflx"),j(e,"sidebar-collapsed",!n[0]),j(e,"sidebar-expanded",n[0])},m(u,f){D(u,e,f),E(e,t),E(t,i),E(t,s),E(e,r),L(a,e,null),o=!0,l||(c=re(t,"click",n[2]),l=!0)},p(u,[f]){(!o||f&1)&&j(t,"rotate",!u[0]);const p={};f&1&&(p.collapsed=!u[0]),f&16&&(p.$$scope={dirty:f,ctx:u}),a.$set(p),(!o||f&1)&&j(e,"sidebar-collapsed",!u[0]),(!o||f&1)&&j(e,"sidebar-expanded",u[0])},i(u){o||(v(a.$$.fragment,u),o=!0)},o(u){C(a.$$.fragment,u),o=!1},d(u){u&&T(e),V(a),l=!1,c()}}}function ns(n,e,t){let{sidebarExpanded:i=!0}=e;const s=_n(),r=()=>s("toggle-sidebar"),a=()=>s("select","log");return n.$$set=o=>{"sidebarExpanded"in o&&t(0,i=o.sidebarExpanded)},[i,s,r,a]}class is extends Z{constructor(e){super(),Q(this,e,ns,ts,z,{sidebarExpanded:0})}}function Nt(n){let e,t;return e=new de({props:{btnType:"terminal-option",disabled:n[0].option1Disabled,$$slots:{default:[ss]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){q(e.$$.fragment)},m(i,s){L(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.disabled=i[0].option1Disabled),s&131073&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function ss(n){let e=n[0].option1+"",t;return{c(){t=K(e)},m(i,s){D(i,t,s)},p(i,s){s&1&&e!==(e=i[0].option1+"")&&he(t,e)},d(i){i&&T(t)}}}function Rt(n){let e,t;return e=new de({props:{btnType:"terminal-option",disabled:n[0].option2Disabled,$$slots:{default:[rs]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){q(e.$$.fragment)},m(i,s){L(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.disabled=i[0].option2Disabled),s&131073&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function rs(n){let e=n[0].option2+"",t;return{c(){t=K(e)},m(i,s){D(i,t,s)},p(i,s){s&1&&e!==(e=i[0].option2+"")&&he(t,e)},d(i){i&&T(t)}}}function Bt(n){let e,t;return e=new de({props:{btnType:"terminal-option",disabled:n[0].option3Disabled,$$slots:{default:[os]},$$scope:{ctx:n}}}),e.$on("click",n[10]),{c(){q(e.$$.fragment)},m(i,s){L(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.disabled=i[0].option3Disabled),s&131073&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function os(n){let e=n[0].option3+"",t;return{c(){t=K(e)},m(i,s){D(i,t,s)},p(i,s){s&1&&e!==(e=i[0].option3+"")&&he(t,e)},d(i){i&&T(t)}}}function Pt(n){let e,t,i;return{c(){e=A("input"),y(e,"type","text"),y(e,"maxlength","20"),y(e,"class","terminal-input svelte-f49isc")},m(s,r){D(s,e,r),xe(e,n[2]),t||(i=[re(e,"input",n[11]),re(e,"input",n[4])],t=!0)},p(s,r){r&4&&e.value!==s[2]&&xe(e,s[2])},d(s){s&&T(e),t=!1,G(i)}}}function as(n){let e,t,i,s,r,a,o,l,c,u,f,p,m;r=new Fi({});let h=n[0].option1Visible&&Nt(n),d=n[0].option2Visible&&Rt(n),b=n[0].option3Visible&&Bt(n),S=n[0].inputVisible&&Pt(n);return{c(){e=A("div"),t=A("div"),i=A("p"),s=$(),q(r.$$.fragment),a=$(),o=A("div"),h&&h.c(),l=$(),d&&d.c(),c=$(),b&&b.c(),u=$(),S&&S.c(),y(i,"id","terminal-text"),y(i,"class","svelte-f49isc"),y(t,"class","terminal-screen svelte-f49isc"),y(o,"class","terminal-option-flex-group"),y(e,"class",f="terminal terminal__"+n[1]+" svelte-f49isc")},m(w,O){D(w,e,O),E(e,t),E(t,i),E(t,s),L(r,t,null),E(e,a),E(e,o),h&&h.m(o,null),E(o,l),d&&d.m(o,null),E(o,c),b&&b.m(o,null),E(o,u),S&&S.m(o,null),m=!0},p(w,[O]){w[0].option1Visible?h?(h.p(w,O),O&1&&v(h,1)):(h=Nt(w),h.c(),v(h,1),h.m(o,l)):h&&(te(),C(h,1,1,()=>{h=null}),ne()),w[0].option2Visible?d?(d.p(w,O),O&1&&v(d,1)):(d=Rt(w),d.c(),v(d,1),d.m(o,c)):d&&(te(),C(d,1,1,()=>{d=null}),ne()),w[0].option3Visible?b?(b.p(w,O),O&1&&v(b,1)):(b=Bt(w),b.c(),v(b,1),b.m(o,u)):b&&(te(),C(b,1,1,()=>{b=null}),ne()),w[0].inputVisible?S?S.p(w,O):(S=Pt(w),S.c(),S.m(o,null)):S&&(S.d(1),S=null),(!m||O&2&&f!==(f="terminal terminal__"+w[1]+" svelte-f49isc"))&&y(e,"class",f)},i(w){m||(v(r.$$.fragment,w),v(h),v(d),v(b),w&&F(()=>{m&&(p||(p=$e(e,X,{duration:1e3},!0)),p.run(1))}),m=!0)},o(w){C(r.$$.fragment,w),C(h),C(d),C(b),w&&(p||(p=$e(e,X,{duration:1e3},!1)),p.run(0)),m=!1},d(w){w&&T(e),V(r),h&&h.d(),d&&d.d(),b&&b.d(),S&&S.d(),w&&p&&p.end()}}}function ls(n,e,t){let i,s,r,a;U(n,B,_=>t(6,i=_)),U(n,rn,_=>t(7,s=_)),U(n,se,_=>t(13,r=_)),U(n,ie,_=>t(14,a=_));let{terminalColor:o="grey"}=e,{gameData:l}=e,{dialogueOptions:c}=e,u,f="",p=Le({chapter:s,part:i,player:h()});Ie(()=>{u=new Ve("#terminal-text",{strings:p,typeSpeed:20})});function m(_,oe=!1){t(0,c=on(s,i,_)),u.destroy(),u=new Ve("#terminal-text",{strings:Le({chapter:s,part:i,player:h(),optionSelected:_}),typeSpeed:20,backSpeed:10,backDelay:2e3})}function h(){return l.playingAs==="male"?a:r}function d(){(s==="lobby"&&i==="3"||i==="3-again")&&(l.playingAs==="male"?x.emit("set-male-player-name",f.trim()):x.emit("set-female-player-name",f.trim()))}const b=()=>m(1),S=()=>m(2),w=()=>m(3);function O(){f=this.value,t(2,f)}return n.$$set=_=>{"terminalColor"in _&&t(1,o=_.terminalColor),"gameData"in _&&t(5,l=_.gameData),"dialogueOptions"in _&&t(0,c=_.dialogueOptions)},n.$$.update=()=>{n.$$.dirty&224&&l.bothPlayersJoined&&s==="lobby"&&i==="1"&&(t(0,c.option1Disabled=!1,c),t(0,c.option1="Ready",c)),n.$$.dirty&224&&l.goToChapter6&&s==="lobby"&&i==="5"&&m(0)},[c,o,f,m,d,l,i,s,b,S,w,O]}class cs extends Z{constructor(e){super(),Q(this,e,ls,as,z,{terminalColor:1,gameData:5,dialogueOptions:0})}}function us(n){let e,t,i;return t=new Bi({}),{c(){e=A("main"),q(t.$$.fragment),y(e,"class","main-content svelte-kn45eq")},m(s,r){D(s,e,r),L(t,e,null),i=!0},p:P,i(s){i||(v(t.$$.fragment,s),i=!0)},o(s){C(t.$$.fragment,s),i=!1},d(s){s&&T(e),V(t)}}}function fs(n){const e=new Ci({});Ie(()=>{t()});function t(){e.startGame()}return[]}class hs extends Z{constructor(e){super(),Q(this,e,fs,us,z,{})}}new hs({target:document.getElementById("app")});
