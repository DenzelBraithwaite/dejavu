var Qe=Object.defineProperty;var Ze=(n,t,e)=>t in n?Qe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var m=(n,t,e)=>Ze(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function O(){}const Kt=n=>n;function tn(n,t){for(const e in t)n[e]=t[e];return n}function Oe(n){return n()}function ue(){return Object.create(null)}function z(n){n.forEach(Oe)}function ut(n){return typeof n=="function"}function H(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function en(n){return Object.keys(n).length===0}function nn(n,...t){if(n==null){for(const s of t)s(void 0);return O}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Z(n,t,e){n.$$.on_destroy.push(nn(t,e))}function Pt(n,t,e,s){if(n){const i=Re(n,t,e,s);return n[0](i)}}function Re(n,t,e,s){return n[1]&&s?tn(e.ctx.slice(),n[1](s(t))):e.ctx}function Lt(n,t,e,s){if(n[2]&&s){const i=n[2](s(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|i[a];return r}return t.dirty|i}return t.dirty}function $t(n,t,e,s,i,r){if(i){const o=Re(t,e,s,r);n.p(o,i)}}function It(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function sn(n){const t=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[n,"px"]}const Be=typeof window<"u";let jt=Be?()=>window.performance.now():()=>Date.now(),Jt=Be?n=>requestAnimationFrame(n):O;const tt=new Set;function Ne(n){tt.forEach(t=>{t.c(n)||(tt.delete(t),t.f())}),tt.size!==0&&Jt(Ne)}function Xt(n){let t;return tt.size===0&&Jt(Ne),{promise:new Promise(e=>{tt.add(t={c:n,f:e})}),abort(){tt.delete(t)}}}function w(n,t){n.appendChild(t)}function De(n){if(!n)return document;const t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function rn(n){const t=x("style");return t.textContent="/* empty */",on(De(n),t),t.sheet}function on(n,t){return w(n.head||n,t),t.sheet}function S(n,t,e){n.insertBefore(t,e||null)}function k(n){n.parentNode&&n.parentNode.removeChild(n)}function x(n){return document.createElement(n)}function T(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function st(n){return document.createTextNode(n)}function V(){return st(" ")}function Qt(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function y(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function an(n){return Array.from(n.childNodes)}function Zt(n,t){t=""+t,n.data!==t&&(n.data=t)}function M(n,t,e){n.classList.toggle(t,!!e)}function Pe(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}const Et=new Map;let St=0;function cn(n){let t=5381,e=n.length;for(;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function ln(n,t){const e={stylesheet:rn(t),rules:{}};return Et.set(n,e),e}function Ct(n,t,e,s,i,r,o,a=0){const c=16.666/s;let l=`{
`;for(let b=0;b<=1;b+=c){const A=t+(e-t)*r(b);l+=b*100+`%{${o(A,1-A)}}
`}const h=l+`100% {${o(e,1-e)}}
}`,u=`__svelte_${cn(h)}_${a}`,d=De(n),{stylesheet:g,rules:f}=Et.get(d)||ln(d,n);f[u]||(f[u]=!0,g.insertRule(`@keyframes ${u} ${h}`,g.cssRules.length));const p=n.style.animation||"";return n.style.animation=`${p?`${p}, `:""}${u} ${s}ms linear ${i}ms 1 both`,St+=1,u}function xt(n,t){const e=(n.style.animation||"").split(", "),s=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=e.length-s.length;i&&(n.style.animation=s.join(", "),St-=i,St||un())}function un(){Jt(()=>{St||(Et.forEach(n=>{const{ownerNode:t}=n.stylesheet;t&&k(t)}),Et.clear())})}let lt;function ct(n){lt=n}function Le(){if(!lt)throw new Error("Function called outside component initialization");return lt}function te(n){Le().$$.on_mount.push(n)}function hn(){const n=Le();return(t,e,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[t];if(i){const r=Pe(t,e,{cancelable:s});return i.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function $e(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const Q=[],he=[];let et=[];const fe=[],fn=Promise.resolve();let qt=!1;function pn(){qt||(qt=!0,fn.then(Ie))}function P(n){et.push(n)}const Ot=new Set;let J=0;function Ie(){if(J!==0)return;const n=lt;do{try{for(;J<Q.length;){const t=Q[J];J++,ct(t),dn(t.$$)}}catch(t){throw Q.length=0,J=0,t}for(ct(null),Q.length=0,J=0;he.length;)he.pop()();for(let t=0;t<et.length;t+=1){const e=et[t];Ot.has(e)||(Ot.add(e),e())}et.length=0}while(Q.length);for(;fe.length;)fe.pop()();qt=!1,Ot.clear(),ct(n)}function dn(n){if(n.fragment!==null){n.update(),z(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(P)}}function mn(n){const t=[],e=[];et.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),et=t}let rt;function ee(){return rt||(rt=Promise.resolve(),rt.then(()=>{rt=null})),rt}function Y(n,t,e){n.dispatchEvent(Pe(`${t?"intro":"outro"}${e}`))}const mt=new Set;let N;function yt(){N={r:0,c:[],p:N}}function gt(){N.r||z(N.c),N=N.p}function v(n,t){n&&n.i&&(mt.delete(n),n.i(t))}function C(n,t,e,s){if(n&&n.o){if(mt.has(n))return;mt.add(n),N.c.push(()=>{mt.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}else s&&s()}const ne={duration:0};function se(n,t,e){const s={direction:"in"};let i=t(n,e,s),r=!1,o,a,c=0;function l(){o&&xt(n,o)}function h(){const{delay:d=0,duration:g=300,easing:f=Kt,tick:p=O,css:b}=i||ne;b&&(o=Ct(n,0,1,g,d,f,b,c++)),p(0,1);const A=jt()+d,q=A+g;a&&a.abort(),r=!0,P(()=>Y(n,!0,"start")),a=Xt(W=>{if(r){if(W>=q)return p(1,0),Y(n,!0,"end"),l(),r=!1;if(W>=A){const j=f((W-A)/g);p(j,1-j)}}return r})}let u=!1;return{start(){u||(u=!0,xt(n),ut(i)?(i=i(s),ee().then(h)):h())},invalidate(){u=!1},end(){r&&(l(),r=!1)}}}function yn(n,t,e){const s={direction:"out"};let i=t(n,e,s),r=!0,o;const a=N;a.r+=1;let c;function l(){const{delay:h=0,duration:u=300,easing:d=Kt,tick:g=O,css:f}=i||ne;f&&(o=Ct(n,1,0,u,h,d,f));const p=jt()+h,b=p+u;P(()=>Y(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),Xt(A=>{if(r){if(A>=b)return g(0,1),Y(n,!1,"end"),--a.r||z(a.c),!1;if(A>=p){const q=d((A-p)/u);g(1-q,q)}}return r})}return ut(i)?ee().then(()=>{i=i(s),l()}):l(),{end(h){h&&"inert"in n&&(n.inert=c),h&&i.tick&&i.tick(1,0),r&&(o&&xt(n,o),r=!1)}}}function pe(n,t,e,s){let r=t(n,e,{direction:"both"}),o=s?0:1,a=null,c=null,l=null,h;function u(){l&&xt(n,l)}function d(f,p){const b=f.b-o;return p*=Math.abs(b),{a:o,b:f.b,d:b,duration:p,start:f.start,end:f.start+p,group:f.group}}function g(f){const{delay:p=0,duration:b=300,easing:A=Kt,tick:q=O,css:W}=r||ne,j={start:jt()+p,b:f};f||(j.group=N,N.r+=1),"inert"in n&&(f?h!==void 0&&(n.inert=h):(h=n.inert,n.inert=!0)),a||c?c=j:(W&&(u(),l=Ct(n,o,f,b,p,A,W)),f&&q(0,1),a=d(j,b),P(()=>Y(n,f,"start")),Xt(ft=>{if(c&&ft>c.start&&(a=d(c,b),c=null,Y(n,a.b,"start"),W&&(u(),l=Ct(n,o,a.b,a.duration,0,A,r.css))),a){if(ft>=a.end)q(o=a.b,1-o),Y(n,a.b,"end"),c||(a.b?u():--a.group.r||z(a.group.c)),a=null;else if(ft>=a.start){const Xe=ft-a.start;o=a.a+a.d*A(Xe/a.duration),q(o,1-o)}}return!!(a||c)}))}return{run(f){ut(r)?ee().then(()=>{r=r({direction:f?"in":"out"}),g(f)}):g(f)},end(){u(),a=c=null}}}function U(n){n&&n.c()}function $(n,t,e){const{fragment:s,after_update:i}=n.$$;s&&s.m(t,e),P(()=>{const r=n.$$.on_mount.map(Oe).filter(ut);n.$$.on_destroy?n.$$.on_destroy.push(...r):z(r),n.$$.on_mount=[]}),i.forEach(P)}function I(n,t){const e=n.$$;e.fragment!==null&&(mn(e.after_update),z(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function gn(n,t){n.$$.dirty[0]===-1&&(Q.push(n),pn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function G(n,t,e,s,i,r,o=null,a=[-1]){const c=lt;ct(n);const l=n.$$={fragment:null,ctx:[],props:r,update:O,not_equal:i,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ue(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let h=!1;if(l.ctx=e?e(n,t.props||{},(u,d,...g)=>{const f=g.length?g[0]:d;return l.ctx&&i(l.ctx[u],l.ctx[u]=f)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](f),h&&gn(n,u)),d}):[],l.update(),h=!0,z(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const u=an(t.target);l.fragment&&l.fragment.l(u),u.forEach(k)}else l.fragment&&l.fragment.c();t.intro&&v(n.$$.fragment),$(n,t.target,t.anchor),Ie()}ct(c)}class K{constructor(){m(this,"$$");m(this,"$$set")}$destroy(){I(this,1),this.$destroy=O}$on(t,e){if(!ut(e))return O;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const i=s.indexOf(e);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!en(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const _n="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_n);function bn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function nt(n,{delay:t=0,duration:e=400,easing:s=bn,amount:i=5,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-r),[h,u]=sn(i);return{delay:t,duration:e,easing:s,css:(d,g)=>`opacity: ${a-l*g}; filter: ${c} blur(${g*h}${u});`}}class wn{constructor(t){m(this,"id",0);m(this,"playerName","Player");m(this,"playerLevel",1);m(this,"playerExp",0);m(this,"playerInventory",[new kn({})]);this.id=t.id??this.id,this.playerName=t.playerName??this.playerName,this.playerLevel=t.playerLevel??this.playerLevel,this.playerExp=t.playerExp??this.playerExp,this.playerInventory=t.playerInventory??this.playerInventory}}class vn{constructor(t){m(this,"id",0);m(this,"family","");m(this,"title","");m(this,"possibleOffspring",[]);m(this,"possibleSeedDrop",[]);m(this,"numOfDays",0);m(this,"numOfDaysRemaining",0);m(this,"chanceToDropSeed",100);m(this,"minSeedDrop",1);m(this,"maxSeedDrop",1);m(this,"minExpGain",0);m(this,"maxExpGain",0);m(this,"description","");m(this,"successRate",100);m(this,"isGrown",!1);this.family=t.family??this.family,this.title=t.title??this.title,this.possibleOffspring=t.possibleOffspring??this.possibleOffspring,this.possibleSeedDrop=t.possibleSeedDrop??this.possibleSeedDrop,this.numOfDays=t.numOfDays??this.numOfDays,this.numOfDaysRemaining=t.numOfDaysRemaining??this.numOfDaysRemaining,this.chanceToDropSeed=t.chanceToDropSeed??this.chanceToDropSeed,this.minSeedDrop=t.minSeedDrop??this.minSeedDrop,this.maxSeedDrop=t.maxSeedDrop??this.maxSeedDrop,this.maxExpGain=t.maxExpGain??this.maxExpGain,this.minExpGain=t.minExpGain??this.minExpGain,this.description=t.description??this.description,this.successRate=t.successRate??this.successRate,this.isGrown=t.isGrown??this.isGrown}setId(){return 0}}class kn extends vn{constructor(e){super(e);m(this,"id",0);m(this,"family","planet");m(this,"title","Planet Seed");m(this,"possibleOffspring",["planet"]);m(this,"possibleSeedDrop",["Water Seed"]);m(this,"numOfDays",1);m(this,"numOfDaysRemaining",1);m(this,"chanceToDropSeed",100);m(this,"minSeedDrop",1);m(this,"maxSeedDrop",1);m(this,"minExpGain",50);m(this,"maxExpGain",50);m(this,"description","Grows a planet which more seeds can be grown from.");m(this,"successRate",100);m(this,"isGrown",!1)}}const X=[];function ht(n,t=O){let e;const s=new Set;function i(a){if(H(n,a)&&(n=a,e)){const c=!X.length;for(const l of s)l[1](),X.push(l,n);if(c){for(let l=0;l<X.length;l+=2)X[l][0](X[l+1]);X.length=0}}}function r(a){i(a(n))}function o(a,c=O){const l=[a,c];return s.add(l),s.size===1&&(e=t(i,r)||O),a(n),()=>{s.delete(l),s.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:o}}const En=ht(["Click 'Next' to begin."]),Sn=ht("lobby"),_t=ht("1a");function de(n={}){n.optionSelected=n.optionSelected??0;let t=["Something went wrong... This text should not display."];if(n.chapter==="lobby")switch(n.part){case"1a":t=Rt.lobby.part1a;break;case"2a":t=Rt.lobby.part2a;break;case"3a":t=Rt.lobby.part3a;break}return t}const Rt={lobby:{part1a:["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."],part2a:["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"],part3a:["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."]}};function Cn(n,t,e=0){let s={};if(n==="lobby")switch(t){case"1a":s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1},_t.set("2a");break;case"2a":s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1},_t.set("3a");break;case"3a":s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0},_t.set("3a");break}return s}class xn{constructor(t){m(this,"id",0);m(this,"worldName","World");m(this,"maxActions",1);m(this,"remainingActions",1);m(this,"dayCount",1);m(this,"currentDay","Unoni");m(this,"currentDayIndex",1);m(this,"currentWeek",1);m(this,"currentMonth","New");m(this,"currentMonthIndex",1);m(this,"currentYear","Year of the Farmer");m(this,"currentYearIndex",1);m(this,"currentSeason","Spring");m(this,"plantedSeeds",[]);m(this,"unlockedSeeds",[]);m(this,"player",new wn({playerName:"Guest"}));this.id=t.id??this.id,this.worldName=t.worldName??this.worldName,this.maxActions=t.maxActions??this.maxActions,this.remainingActions=t.remainingActions??this.remainingActions,this.dayCount=t.dayCount??this.dayCount,this.currentDay=t.currentDay??this.currentDay,this.currentDayIndex=t.currentDayIndex??this.currentDayIndex,this.currentWeek=t.currentWeek??this.currentWeek,this.currentMonth=t.currentMonth??this.currentMonth,this.currentMonthIndex=t.currentMonthIndex??this.currentMonthIndex,this.currentYear=t.currentYear??this.currentYear,this.currentYearIndex=t.currentYearIndex??this.currentYearIndex,this.currentSeason=t.currentSeason??this.currentSeason,this.plantedSeeds=t.plantedSeeds??this.plantedSeeds,this.unlockedSeeds=t.unlockedSeeds??this.unlockedSeeds,this.player=t.player??this.player,localStorage.getItem("worldCount")??localStorage.setItem("worldCount","1"),localStorage.getItem("seedCount")??localStorage.setItem("seedCount","1")}startGame(){this.newDay()}isFirstDay(){return this.dayCount===1}firstDay(){this.displayWorldStats()}newDay(){if(this.isFirstDay()){this.firstDay();return}this.remainingActions=this.maxActions,this.plantedSeeds.forEach(t=>t.numOfDaysRemaining-=1),this.harvestSeeds()}displayWorldStats(){let t=[`
      Remaining Actions: ${this.remainingActions}<br>
      Days Passed: ${this.dayCount}<br>
      Current Day: ${this.currentDay}<br>
      Day of the year: ${this.currentDayIndex}<br>
      Current Week: ${this.currentWeek}<br>
      Current Month: ${this.currentMonth} Moon<br>
      Month of the Year: ${this.currentMonthIndex}<br>
      Current Year: ${this.currentYearIndex} - ${this.currentYear}<br>
      Current Season: ${this.currentSeason}<br>
      dumy text to fill screen<br>
      for<br>
      scrollbar<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .
      `];En.set(t)}displayHarvestYield(){return[]}plantSeed(t){this.remainingActions-=1}harvestSeeds(){this.plantedSeeds.length!==0&&this.plantedSeeds.forEach(t=>{if(t.numOfDaysRemaining===0){t.isGrown=!0,this.player.playerInventory=[...this.player.playerInventory,{...t}];const e=this.plantedSeeds.indexOf(t);this.plantedSeeds.splice(e,1)}})}hasActionsRemaining(){return this.remainingActions>0}}function Tn(n){let t,e,s,i,r;const o=n[3].default,a=Pt(o,n,n[2],null);return{c(){t=x("button"),a&&a.c(),y(t,"class",e="btn "+n[0]+" svelte-1utwdw0"),t.disabled=n[1]},m(c,l){S(c,t,l),a&&a.m(t,null),s=!0,i||(r=Qt(t,"click",n[4]),i=!0)},p(c,[l]){a&&a.p&&(!s||l&4)&&$t(a,o,c,c[2],s?Lt(o,c[2],l,null):It(c[2]),null),(!s||l&1&&e!==(e="btn "+c[0]+" svelte-1utwdw0"))&&y(t,"class",e),(!s||l&2)&&(t.disabled=c[1])},i(c){s||(v(a,c),s=!0)},o(c){C(a,c),s=!1},d(c){c&&k(t),a&&a.d(c),i=!1,r()}}}function An(n,t,e){let{$$slots:s={},$$scope:i}=t,{btnType:r="terminal-option"}=t,{disabled:o=!1}=t;function a(c){$e.call(this,n,c)}return n.$$set=c=>{"btnType"in c&&e(0,r=c.btnType),"disabled"in c&&e(1,o=c.disabled),"$$scope"in c&&e(2,i=c.$$scope)},[r,o,i,s,a]}class ie extends K{constructor(t){super(),G(this,t,An,Tn,H,{btnType:0,disabled:1})}}const Mt=ht({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),Vt=ht({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]}),L=Object.create(null);L.open="0";L.close="1";L.ping="2";L.pong="3";L.message="4";L.upgrade="5";L.noop="6";const bt=Object.create(null);Object.keys(L).forEach(n=>{bt[L[n]]=n});const Ft={type:"error",data:"parser error"},qe=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Me=typeof ArrayBuffer=="function",Ve=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,re=({type:n,data:t},e,s)=>qe&&t instanceof Blob?e?s(t):me(t,s):Me&&(t instanceof ArrayBuffer||Ve(t))?e?s(t):me(new Blob([t]),s):s(L[n]+(t||"")),me=(n,t)=>{const e=new FileReader;return e.onload=function(){const s=e.result.split(",")[1];t("b"+(s||""))},e.readAsDataURL(n)};function ye(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Bt;function On(n,t){if(qe&&n.data instanceof Blob)return n.data.arrayBuffer().then(ye).then(t);if(Me&&(n.data instanceof ArrayBuffer||Ve(n.data)))return t(ye(n.data));re(n,!1,e=>{Bt||(Bt=new TextEncoder),t(Bt.encode(e))})}const ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",at=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<ge.length;n++)at[ge.charCodeAt(n)]=n;const Rn=n=>{let t=n.length*.75,e=n.length,s,i=0,r,o,a,c;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);const l=new ArrayBuffer(t),h=new Uint8Array(l);for(s=0;s<e;s+=4)r=at[n.charCodeAt(s)],o=at[n.charCodeAt(s+1)],a=at[n.charCodeAt(s+2)],c=at[n.charCodeAt(s+3)],h[i++]=r<<2|o>>4,h[i++]=(o&15)<<4|a>>2,h[i++]=(a&3)<<6|c&63;return l},Bn=typeof ArrayBuffer=="function",oe=(n,t)=>{if(typeof n!="string")return{type:"message",data:Fe(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:Nn(n.substring(1),t)}:bt[e]?n.length>1?{type:bt[e],data:n.substring(1)}:{type:bt[e]}:Ft},Nn=(n,t)=>{if(Bn){const e=Rn(n);return Fe(e,t)}else return{base64:!0,data:n}},Fe=(n,t)=>{switch(t){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Ue="",Dn=(n,t)=>{const e=n.length,s=new Array(e);let i=0;n.forEach((r,o)=>{re(r,!1,a=>{s[o]=a,++i===e&&t(s.join(Ue))})})},Pn=(n,t)=>{const e=n.split(Ue),s=[];for(let i=0;i<e.length;i++){const r=oe(e[i],t);if(s.push(r),r.type==="error")break}return s};function Ln(){return new TransformStream({transform(n,t){On(n,e=>{const s=e.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let Nt;function pt(n){return n.reduce((t,e)=>t+e.length,0)}function dt(n,t){if(n[0].length===t)return n.shift();const e=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)e[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),e}function $n(n,t){Nt||(Nt=new TextDecoder);const e=[];let s=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(s===0){if(pt(e)<1)break;const c=dt(e,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(pt(e)<2)break;const c=dt(e,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(pt(e)<8)break;const c=dt(e,8),l=new DataView(c.buffer,c.byteOffset,c.length),h=l.getUint32(0);if(h>Math.pow(2,21)-1){a.enqueue(Ft);break}i=h*Math.pow(2,32)+l.getUint32(4),s=3}else{if(pt(e)<i)break;const c=dt(e,i);a.enqueue(oe(r?c:Nt.decode(c),t)),s=0}if(i===0||i>n){a.enqueue(Ft);break}}}})}const He=4;function E(n){if(n)return In(n)}function In(n){for(var t in E.prototype)n[t]=E.prototype[t];return n}E.prototype.on=E.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};E.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};E.prototype.off=E.prototype.removeListener=E.prototype.removeAllListeners=E.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<e.length;i++)if(s=e[i],s===t||s.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+n],this};E.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,i=e.length;s<i;++s)e[s].apply(this,t)}return this};E.prototype.emitReserved=E.prototype.emit;E.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};E.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Tt=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),R=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),qn="arraybuffer";function We(n,...t){return t.reduce((e,s)=>(n.hasOwnProperty(s)&&(e[s]=n[s]),e),{})}const Mn=R.setTimeout,Vn=R.clearTimeout;function At(n,t){t.useNativeTimers?(n.setTimeoutFn=Mn.bind(R),n.clearTimeoutFn=Vn.bind(R)):(n.setTimeoutFn=R.setTimeout.bind(R),n.clearTimeoutFn=R.clearTimeout.bind(R))}const Fn=1.33;function Un(n){return typeof n=="string"?Hn(n):Math.ceil((n.byteLength||n.size)*Fn)}function Hn(n){let t=0,e=0;for(let s=0,i=n.length;s<i;s++)t=n.charCodeAt(s),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(s++,e+=4);return e}function Ye(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Wn(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function Yn(n){let t={},e=n.split("&");for(let s=0,i=e.length;s<i;s++){let r=e[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class zn extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class ae extends E{constructor(t){super(),this.writable=!1,At(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,s){return super.emitReserved("error",new zn(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=oe(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=Wn(t);return e.length?"?"+e:""}}class Gn extends ae{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||e()})),this.writable||(s++,this.once("drain",function(){--s||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Pn(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Dn(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Ye()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let ze=!1;try{ze=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Kn=ze;function jn(){}class Jn extends Gn{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let s=location.port;s||(s=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,s)=>{this.onError("xhr poll error",e,s)}),this.pollXhr=t}}class D extends E{constructor(t,e,s){super(),this.createRequest=t,At(this,s),this._opts=s,this._method=s.method||"GET",this._uri=e,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const e=We(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(e);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=D.requestsCount++,D.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=jn,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete D.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}D.requestsCount=0;D.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_e);else if(typeof addEventListener=="function"){const n="onpagehide"in R?"pagehide":"unload";addEventListener(n,_e,!1)}}function _e(){for(let n in D.requests)D.requests.hasOwnProperty(n)&&D.requests[n].abort()}const Xn=function(){const n=Ge({xdomain:!1});return n&&n.responseType!==null}();class Qn extends Jn{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=Xn&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new D(Ge,this.uri(),t)}}function Ge(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Kn))return new XMLHttpRequest}catch{}if(!t)try{return new R[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ke=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Zn extends ae{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,s=Ke?{}:We(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;re(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Tt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Ye()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const Dt=R.WebSocket||R.MozWebSocket;class ts extends Zn{createSocket(t,e,s){return Ke?new Dt(t,e,s):e?new Dt(t,e):new Dt(t)}doWrite(t,e){this.ws.send(e)}}class es extends ae{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=$n(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(e).getReader(),i=Ln();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:a,value:c})=>{a||(this.onPacket(c),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;this._writer.write(s).then(()=>{i&&Tt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ns={websocket:ts,webtransport:es,polling:Qn},ss=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,is=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ut(n){if(n.length>8e3)throw"URI too long";const t=n,e=n.indexOf("["),s=n.indexOf("]");e!=-1&&s!=-1&&(n=n.substring(0,e)+n.substring(e,s).replace(/:/g,";")+n.substring(s,n.length));let i=ss.exec(n||""),r={},o=14;for(;o--;)r[is[o]]=i[o]||"";return e!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=rs(r,r.path),r.queryKey=os(r,r.query),r}function rs(n,t){const e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function os(n,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(e[i]=r)}),e}const Ht=typeof addEventListener=="function"&&typeof removeEventListener=="function",wt=[];Ht&&addEventListener("offline",()=>{wt.forEach(n=>n())},!1);class F extends E{constructor(t,e){if(super(),this.binaryType=qn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const s=Ut(t);e.hostname=s.host,e.secure=s.protocol==="https"||s.protocol==="wss",e.port=s.port,s.query&&(e.query=s.query)}else e.host&&(e.hostname=Ut(e.host).host);At(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Yn(this.opts.query)),Ht&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=He,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&F.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",F.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(e+=Un(i)),s>0&&e>this._maxPayload)return this.writeBuffer.slice(0,s);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Tt(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,s){return this._sendPacket("message",t,e,s),this}send(t,e,s){return this._sendPacket("message",t,e,s),this}_sendPacket(t,e,s,i){if(typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:e,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(F.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ht&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=wt.indexOf(this._offlineEventListener);s!==-1&&wt.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}F.protocol=He;class as extends F{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),s=!1;F.priorWebsocketSuccess=!1;const i=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",u=>{if(!s)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;F.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=e.name,this.emitReserved("upgradeError",d)}}))};function r(){s||(s=!0,h(),e.close(),e=null)}const o=u=>{const d=new Error("probe error: "+u);d.transport=e.name,r(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function c(){o("socket closed")}function l(u){e&&u.name!==e.name&&r()}const h=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};e.once("open",i),e.once("error",o),e.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}let cs=class extends as{constructor(t,e={}){const s=typeof t=="object"?t:e;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>ns[i]).filter(i=>!!i)),super(t,s)}};function ls(n,t="",e){let s=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),s=Ut(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(e&&e.port===s.port?"":":"+s.port),s}const us=typeof ArrayBuffer=="function",hs=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,je=Object.prototype.toString,fs=typeof Blob=="function"||typeof Blob<"u"&&je.call(Blob)==="[object BlobConstructor]",ps=typeof File=="function"||typeof File<"u"&&je.call(File)==="[object FileConstructor]";function ce(n){return us&&(n instanceof ArrayBuffer||hs(n))||fs&&n instanceof Blob||ps&&n instanceof File}function vt(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,s=n.length;e<s;e++)if(vt(n[e]))return!0;return!1}if(ce(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return vt(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&vt(n[e]))return!0;return!1}function ds(n){const t=[],e=n.data,s=n;return s.data=Wt(e,t),s.attachments=t.length,{packet:s,buffers:t}}function Wt(n,t){if(!n)return n;if(ce(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let s=0;s<n.length;s++)e[s]=Wt(n[s],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=Wt(n[s],t));return e}return n}function ms(n,t){return n.data=Yt(n.data,t),delete n.attachments,n}function Yt(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=Yt(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=Yt(n[e],t));return n}const ys=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gs=5;var _;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(_||(_={}));class _s{constructor(t){this.replacer=t}encode(t){return(t.type===_.EVENT||t.type===_.ACK)&&vt(t)?this.encodeAsBinary({type:t.type===_.EVENT?_.BINARY_EVENT:_.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===_.BINARY_EVENT||t.type===_.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=ds(t),s=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(s),i}}function be(n){return Object.prototype.toString.call(n)==="[object Object]"}class le extends E{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const s=e.type===_.BINARY_EVENT;s||e.type===_.BINARY_ACK?(e.type=s?_.EVENT:_.ACK,this.reconstructor=new bs(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ce(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(_[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===_.BINARY_EVENT||s.type===_.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(r,e)}else s.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}s.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(le.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case _.CONNECT:return be(e);case _.DISCONNECT:return e===void 0;case _.CONNECT_ERROR:return typeof e=="string"||be(e);case _.EVENT:case _.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&ys.indexOf(e[0])===-1);case _.ACK:case _.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bs{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=ms(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ws=Object.freeze(Object.defineProperty({__proto__:null,Decoder:le,Encoder:_s,get PacketType(){return _},protocol:gs},Symbol.toStringTag,{value:"Module"}));function B(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const vs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Je extends E{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[B(t,"open",this.onopen.bind(this)),B(t,"packet",this.onpacket.bind(this)),B(t,"error",this.onerror.bind(this)),B(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var s,i,r;if(vs.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:_.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const h=this.ids++,u=e.pop();this._registerAckCallback(h,u),o.id=h}const a=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((s,i)=>{const r=(o,a)=>o?i(o):s(a);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:_.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case _.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _.EVENT:case _.BINARY_EVENT:this.onevent(t);break;case _.ACK:case _.BINARY_ACK:this.onack(t);break;case _.DISCONNECT:this.ondisconnect();break;case _.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:_.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function it(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}it.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};it.prototype.reset=function(){this.attempts=0};it.prototype.setMin=function(n){this.ms=n};it.prototype.setMax=function(n){this.max=n};it.prototype.setJitter=function(n){this.jitter=n};class zt extends E{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,At(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new it({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||ws;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new cs(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=B(e,"open",function(){s.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=B(e,"error",r);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(B(t,"ping",this.onping.bind(this)),B(t,"data",this.ondata.bind(this)),B(t,"error",this.onerror.bind(this)),B(t,"close",this.onclose.bind(this)),B(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Tt(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Je(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const s of e)if(this.nsps[s].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ot={};function kt(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=ls(n,t.path||"/socket.io"),s=e.source,i=e.id,r=e.path,o=ot[i]&&r in ot[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return a?c=new zt(s,t):(ot[i]||(ot[i]=new zt(s,t)),c=ot[i]),e.query&&!t.query&&(t.query=e.queryKey),c.socket(e.path,t)}Object.assign(kt,{Manager:zt,Socket:Je,io:kt,connect:kt});function ks(n){let t,e,s,i;return e=new Xs({props:{bothPlayersJoined:n[0],playingAs:n[1](),terminalColor:"grey"}}),{c(){t=x("div"),U(e.$$.fragment),y(t,"class","main-content svelte-abemhi")},m(r,o){S(r,t,o),$(e,t,null),i=!0},p(r,[o]){const a={};o&1&&(a.bothPlayersJoined=r[0]),e.$set(a)},i(r){i||(v(e.$$.fragment,r),r&&(s||P(()=>{s=se(t,nt,{}),s.start()})),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){r&&k(t),I(e)}}}function Es(n,t,e){let s,i;Z(n,Vt,c=>e(2,s=c)),Z(n,Mt,c=>e(3,i=c));let r=kt("http://192.168.2.10:6912"),o=!1;te(()=>{r.on("connect",()=>console.log(`User ID: ${r.id} connected!`)),r.on("connect_error",c=>console.error("Connection error:",c)),r.on("set-users",c=>{Object.entries(c).forEach(([l,h])=>{Mt.update(u=>(u.id=c.p1,u)),Vt.update(u=>(u.id=c.p2,u))})}),r.on("p2-joined",c=>{e(0,o=!0)}),r.emit("client-ready")});function a(){if(i.id===r.id)return"male";if(s.id===r.id)return"female"}return[o,a]}class Ss extends K{constructor(t){super(),G(this,t,Es,ks,H,{})}}function Cs(n){let t,e,s,i,r,o,a;return e=new Hs({props:{sidebarExpanded:n[0]}}),e.$on("select",n[1]),e.$on("toggle-sidebar",n[2]),r=new Ss({}),{c(){t=x("div"),U(e.$$.fragment),s=V(),i=x("div"),U(r.$$.fragment),y(i,"class","screen svelte-kvlyqv"),y(t,"class","client svelte-kvlyqv"),M(t,"client-collapsed",!n[0])},m(c,l){S(c,t,l),$(e,t,null),w(t,s),w(t,i),$(r,i,null),a=!0},p(c,[l]){const h={};l&1&&(h.sidebarExpanded=c[0]),e.$set(h),(!a||l&1)&&M(t,"client-collapsed",!c[0])},i(c){a||(v(e.$$.fragment,c),v(r.$$.fragment,c),c&&(o||P(()=>{o=se(t,nt,{duration:2e3}),o.start()})),a=!0)},o(c){C(e.$$.fragment,c),C(r.$$.fragment,c),a=!1},d(c){c&&k(t),I(e),I(r)}}}function xs(n,t,e){let s=!1;function i(o){o.detail}return[s,i,()=>e(0,s=!s)]}class Ts extends K{constructor(t){super(),G(this,t,xs,Cs,H,{})}}const As=n=>({}),we=n=>({}),Os=n=>({}),ve=n=>({});function Rs(n){let t,e,s,i;return{c(){t=T("svg"),e=T("circle"),s=T("path"),i=T("path"),y(e,"cx","12"),y(e,"cy","12"),y(e,"r","10"),y(s,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),y(i,"d","M12 17h.01"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 24 24"),y(t,"class","icon svelte-16xfpde")},m(r,o){S(r,t,o),w(t,e),w(t,s),w(t,i)},d(r){r&&k(t)}}}function Bs(n){let t,e,s;return{c(){t=T("svg"),e=T("polyline"),s=T("line"),y(e,"points","4 17 10 11 4 5"),y(s,"x1","12"),y(s,"x2","20"),y(s,"y1","19"),y(s,"y2","19"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 24 24"),y(t,"class","icon svelte-16xfpde")},m(i,r){S(i,t,r),w(t,e),w(t,s)},d(i){i&&k(t)}}}function Ns(n){let t,e,s;return{c(){t=T("svg"),e=T("path"),s=T("circle"),y(e,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),y(s,"cx","12"),y(s,"cy","7"),y(s,"r","4"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 24 24"),y(t,"class","icon svelte-16xfpde")},m(i,r){S(i,t,r),w(t,e),w(t,s)},d(i){i&&k(t)}}}function Ds(n){let t,e,s;return{c(){t=T("svg"),e=T("path"),s=T("path"),y(e,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),y(s,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 24 24"),y(t,"class","icon svelte-16xfpde")},m(i,r){S(i,t,r),w(t,e),w(t,s)},d(i){i&&k(t)}}}function ke(n){let t,e,s,i,r,o,a;const c=n[4].title,l=Pt(c,n,n[3],ve),h=l||Ps(),u=n[4].description,d=Pt(u,n,n[3],we),g=d||Ls();return{c(){t=x("div"),e=x("h2"),h&&h.c(),s=V(),i=x("p"),g&&g.c(),y(e,"class","item-title svelte-16xfpde"),y(i,"class","item-text svelte-16xfpde"),y(t,"class","item-text-wrapper svelte-16xfpde")},m(f,p){S(f,t,p),w(t,e),h&&h.m(e,null),w(t,s),w(t,i),g&&g.m(i,null),a=!0},p(f,p){l&&l.p&&(!a||p&8)&&$t(l,c,f,f[3],a?Lt(c,f[3],p,Os):It(f[3]),ve),d&&d.p&&(!a||p&8)&&$t(d,u,f,f[3],a?Lt(u,f[3],p,As):It(f[3]),we)},i(f){a||(v(h,f),v(g,f),f&&P(()=>{a&&(o&&o.end(1),r=se(t,nt,{duration:500}),r.start())}),a=!0)},o(f){C(h,f),C(g,f),r&&r.invalidate(),f&&(o=yn(t,nt,{duration:250})),a=!1},d(f){f&&k(t),h&&h.d(f),g&&g.d(f),f&&o&&o.end()}}}function Ps(n){let t;return{c(){t=st("Title")},m(e,s){S(e,t,s)},d(e){e&&k(t)}}}function Ls(n){let t;return{c(){t=st("Brief description")},m(e,s){S(e,t,s)},d(e){e&&k(t)}}}function $s(n){let t,e,s,i,r,o;function a(u,d){return u[0]==="seed"?Ds:u[0]==="player"?Ns:u[0]==="terminal"?Bs:Rs}let c=a(n),l=c(n),h=!n[2]&&ke(n);return{c(){t=x("div"),l.c(),e=V(),h&&h.c(),y(t,"class",s="item item-color__"+n[1]+" svelte-16xfpde")},m(u,d){S(u,t,d),l.m(t,null),w(t,e),h&&h.m(t,null),i=!0,r||(o=Qt(t,"click",n[5]),r=!0)},p(u,[d]){c!==(c=a(u))&&(l.d(1),l=c(u),l&&(l.c(),l.m(t,e))),u[2]?h&&(yt(),C(h,1,1,()=>{h=null}),gt()):h?(h.p(u,d),d&4&&v(h,1)):(h=ke(u),h.c(),v(h,1),h.m(t,null)),(!i||d&2&&s!==(s="item item-color__"+u[1]+" svelte-16xfpde"))&&y(t,"class",s)},i(u){i||(v(h),i=!0)},o(u){C(h),i=!1},d(u){u&&k(t),l.d(),h&&h.d(),r=!1,o()}}}function Is(n,t,e){let{$$slots:s={},$$scope:i}=t,{iconType:r="unkown"}=t,{color:o="grey"}=t,{collapsed:a=!1}=t;function c(l){$e.call(this,n,l)}return n.$$set=l=>{"iconType"in l&&e(0,r=l.iconType),"color"in l&&e(1,o=l.color),"collapsed"in l&&e(2,a=l.collapsed),"$$scope"in l&&e(3,i=l.$$scope)},[r,o,a,i,s,c]}class qs extends K{constructor(t){super(),G(this,t,Is,$s,H,{iconType:0,color:1,collapsed:2})}}function Ms(n){let t;return{c(){t=x("span"),t.textContent="Log",y(t,"slot","title")},m(e,s){S(e,t,s)},p:O,d(e){e&&k(t)}}}function Vs(n){let t;return{c(){t=x("span"),t.textContent="View logged messages",y(t,"slot","description")},m(e,s){S(e,t,s)},p:O,d(e){e&&k(t)}}}function Fs(n){let t,e,s,i,r,o,a,c,l;return o=new qs({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[Vs],title:[Ms]},$$scope:{ctx:n}}}),o.$on("click",n[3]),{c(){t=x("div"),e=T("svg"),s=T("path"),i=T("path"),r=V(),U(o.$$.fragment),y(s,"d","M19 15V9"),y(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),y(e,"class","icon collapse-icon svelte-1tpwflx"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 24 24"),M(e,"rotate",!n[0]),y(t,"class","sidebar svelte-1tpwflx"),M(t,"sidebar-collapsed",!n[0]),M(t,"sidebar-expanded",n[0])},m(h,u){S(h,t,u),w(t,e),w(e,s),w(e,i),w(t,r),$(o,t,null),a=!0,c||(l=Qt(e,"click",n[2]),c=!0)},p(h,[u]){(!a||u&1)&&M(e,"rotate",!h[0]);const d={};u&1&&(d.collapsed=!h[0]),u&16&&(d.$$scope={dirty:u,ctx:h}),o.$set(d),(!a||u&1)&&M(t,"sidebar-collapsed",!h[0]),(!a||u&1)&&M(t,"sidebar-expanded",h[0])},i(h){a||(v(o.$$.fragment,h),a=!0)},o(h){C(o.$$.fragment,h),a=!1},d(h){h&&k(t),I(o),c=!1,l()}}}function Us(n,t,e){let{sidebarExpanded:s=!0}=t;const i=hn(),r=()=>i("toggle-sidebar"),o=()=>i("select","log");return n.$$set=a=>{"sidebarExpanded"in a&&e(0,s=a.sidebarExpanded)},[s,i,r,o]}class Hs extends K{constructor(t){super(),G(this,t,Us,Fs,H,{sidebarExpanded:0})}}function Gt(){return Gt=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Gt.apply(this,arguments)}var Ws={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,t){},onStringTyped:function(n,t){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,t){},onTypingResumed:function(n,t){},onReset:function(n){},onStop:function(n,t){},onStart:function(n,t){},onDestroy:function(n){}},Ys=new(function(){function n(){}var t=n.prototype;return t.load=function(e,s,i){if(e.el=typeof i=="string"?document.querySelector(i):i,e.options=Gt({},Ws,s),e.isInput=e.el.tagName.toLowerCase()==="input",e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map(function(l){return l.trim()}),e.stringsElement=typeof e.options.stringsElement=="string"?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)e.strings.push(r[a].innerHTML.trim())}for(var c in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[c]=c;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:e.contentType==="html"?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var s="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},t.appendFadeOutAnimationCss=function(e){var s="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},n}()),Ee=new(function(){function n(){}var t=n.prototype;return t.typeHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";e.substring(s+1).charAt(0)!==o&&!(1+ ++s>e.length););s++}return s},t.backSpaceHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";e.substring(s-1).charAt(0)!==o&&!(--s<0););s--}return s},n}()),Se=function(){function n(e,s){Ys.load(this,s,e),this.begin()}var t=n.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){e===void 0&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){e.strPos===0?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)},this.startDelay)},t.typewrite=function(e,s){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=Ee.typeHtmlChars(e,s,i);var a=0,c=e.substring(s);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,a=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),e=e.substring(0,s)+e.substring(s+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;e.substring(s+o).charAt(0)!=="`"&&(o++,!(s+o>e.length)););var h=e.substring(0,s),u=e.substring(h.length+1,s+o),d=e.substring(s+o+1);e=h+u+d,o--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),s>=e.length?i.doneTyping(e,s):i.keepTyping(e,s,o),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},r):this.setPauseStatus(e,s,!0)},t.keepTyping=function(e,s,i){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,s+=i);this.replaceText(r),this.typewrite(e,s)},t.doneTyping=function(e,s){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(e,s)},this.backDelay))},t.backspace=function(e,s){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=Ee.backSpaceHtmlChars(e,s,i);var o=e.substring(0,s);if(i.replaceText(o),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&o===a.substring(0,s)?s:0}s>i.stopNum?(s--,i.backspace(e,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},r)}else this.setPauseStatus(e,s,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,s,i){this.pause.typewrite=i,this.pause.curString=e,this.pause.curStrPos=s},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:this.contentType==="html"?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",function(s){e.stop()}),this.el.addEventListener("blur",function(s){e.el.value&&e.el.value.length!==0||e.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();function Ce(n){let t,e;return t=new ie({props:{btnType:"terminal-option",disabled:n[1].option1Disabled,$$slots:{default:[zs]},$$scope:{ctx:n}}}),t.$on("click",n[7]),{c(){U(t.$$.fragment)},m(s,i){$(t,s,i),e=!0},p(s,i){const r={};i&2&&(r.disabled=s[1].option1Disabled),i&65538&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(v(t.$$.fragment,s),e=!0)},o(s){C(t.$$.fragment,s),e=!1},d(s){I(t,s)}}}function zs(n){let t=n[1].option1+"",e;return{c(){e=st(t)},m(s,i){S(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option1+"")&&Zt(e,t)},d(s){s&&k(e)}}}function xe(n){let t,e;return t=new ie({props:{btnType:"terminal-option",disabled:n[1].option2Disabled,$$slots:{default:[Gs]},$$scope:{ctx:n}}}),t.$on("click",n[8]),{c(){U(t.$$.fragment)},m(s,i){$(t,s,i),e=!0},p(s,i){const r={};i&2&&(r.disabled=s[1].option2Disabled),i&65538&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(v(t.$$.fragment,s),e=!0)},o(s){C(t.$$.fragment,s),e=!1},d(s){I(t,s)}}}function Gs(n){let t=n[1].option2+"",e;return{c(){e=st(t)},m(s,i){S(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option2+"")&&Zt(e,t)},d(s){s&&k(e)}}}function Te(n){let t,e;return t=new ie({props:{btnType:"terminal-option",disabled:n[1].option3Disabled,$$slots:{default:[Ks]},$$scope:{ctx:n}}}),t.$on("click",n[9]),{c(){U(t.$$.fragment)},m(s,i){$(t,s,i),e=!0},p(s,i){const r={};i&2&&(r.disabled=s[1].option3Disabled),i&65538&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(v(t.$$.fragment,s),e=!0)},o(s){C(t.$$.fragment,s),e=!1},d(s){I(t,s)}}}function Ks(n){let t=n[1].option3+"",e;return{c(){e=st(t)},m(s,i){S(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option3+"")&&Zt(e,t)},d(s){s&&k(e)}}}function Ae(n){let t;return{c(){t=x("input"),y(t,"type","text"),y(t,"maxlength","20"),y(t,"class","terminal-input svelte-xxi6ix")},m(e,s){S(e,t,s)},d(e){e&&k(t)}}}function js(n){let t,e,s,i,r,o,a,c,l,h,u=n[1].option1Visible&&Ce(n),d=n[1].option2Visible&&xe(n),g=n[1].option3Visible&&Te(n),f=n[1].inputVisible&&Ae();return{c(){t=x("div"),e=x("div"),e.innerHTML='<p id="terminal-text" class="svelte-xxi6ix"></p>',s=V(),i=x("div"),u&&u.c(),r=V(),d&&d.c(),o=V(),g&&g.c(),a=V(),f&&f.c(),y(e,"class","terminal-screen svelte-xxi6ix"),y(i,"class","terminal-option-flex-group"),y(t,"class",c="terminal terminal__"+n[0]+" svelte-xxi6ix")},m(p,b){S(p,t,b),w(t,e),w(t,s),w(t,i),u&&u.m(i,null),w(i,r),d&&d.m(i,null),w(i,o),g&&g.m(i,null),w(i,a),f&&f.m(i,null),h=!0},p(p,[b]){p[1].option1Visible?u?(u.p(p,b),b&2&&v(u,1)):(u=Ce(p),u.c(),v(u,1),u.m(i,r)):u&&(yt(),C(u,1,1,()=>{u=null}),gt()),p[1].option2Visible?d?(d.p(p,b),b&2&&v(d,1)):(d=xe(p),d.c(),v(d,1),d.m(i,o)):d&&(yt(),C(d,1,1,()=>{d=null}),gt()),p[1].option3Visible?g?(g.p(p,b),b&2&&v(g,1)):(g=Te(p),g.c(),v(g,1),g.m(i,a)):g&&(yt(),C(g,1,1,()=>{g=null}),gt()),p[1].inputVisible?f||(f=Ae(),f.c(),f.m(i,null)):f&&(f.d(1),f=null),(!h||b&1&&c!==(c="terminal terminal__"+p[0]+" svelte-xxi6ix"))&&y(t,"class",c)},i(p){h||(v(u),v(d),v(g),p&&P(()=>{h&&(l||(l=pe(t,nt,{duration:1e3},!0)),l.run(1))}),h=!0)},o(p){C(u),C(d),C(g),p&&(l||(l=pe(t,nt,{duration:1e3},!1)),l.run(0)),h=!1},d(p){p&&k(t),u&&u.d(),d&&d.d(),g&&g.d(),f&&f.d(),p&&l&&l.end()}}}function Js(n,t,e){let s,i;Z(n,Vt,p=>e(11,p)),Z(n,Mt,p=>e(12,p)),Z(n,_t,p=>e(5,s=p)),Z(n,Sn,p=>e(6,i=p));let{terminalColor:r="grey"}=t,{bothPlayersJoined:o=!1}=t,{playingAs:a=""}=t,c,l=de({chapter:i,part:s}),h={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1};te(()=>{c=new Se("#terminal-text",{strings:l,typeSpeed:20})});function u(p,b=!1){e(1,h=Cn(i,s,p)),c.destroy(),c=new Se("#terminal-text",{strings:de({chapter:i,part:s,optionSelected:p}),typeSpeed:20})}const d=()=>u(1),g=()=>u(2),f=()=>u(3);return n.$$set=p=>{"terminalColor"in p&&e(0,r=p.terminalColor),"bothPlayersJoined"in p&&e(3,o=p.bothPlayersJoined),"playingAs"in p&&e(4,a=p.playingAs)},n.$$.update=()=>{n.$$.dirty&96,n.$$.dirty&104&&o&&i==="lobby"&&s==="1a"&&(e(1,h.option1Disabled=!1,h),e(1,h.option1="Ready",h))},[r,h,u,o,a,s,i,d,g,f]}class Xs extends K{constructor(t){super(),G(this,t,Js,js,H,{terminalColor:0,bothPlayersJoined:3,playingAs:4})}}function Qs(n){let t,e,s;return e=new Ts({}),{c(){t=x("main"),U(e.$$.fragment),y(t,"class","main-content svelte-kn45eq")},m(i,r){S(i,t,r),$(e,t,null),s=!0},p:O,i(i){s||(v(e.$$.fragment,i),s=!0)},o(i){C(e.$$.fragment,i),s=!1},d(i){i&&k(t),I(e)}}}function Zs(n){const t=new xn({});te(()=>{e()});function e(){t.startGame()}return[]}class ti extends K{constructor(t){super(),G(this,t,Zs,Qs,H,{})}}new ti({target:document.getElementById("app")});
