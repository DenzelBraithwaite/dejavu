var Ze=Object.defineProperty;var tn=(n,t,e)=>t in n?Ze(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var d=(n,t,e)=>tn(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function R(){}const jt=n=>n;function en(n,t){for(const e in t)n[e]=t[e];return n}function Re(n){return n()}function ue(){return Object.create(null)}function W(n){n.forEach(Re)}function ht(n){return typeof n=="function"}function Y(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function nn(n){return Object.keys(n).length===0}function sn(n,...t){if(n==null){for(const s of t)s(void 0);return R}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Z(n,t,e){n.$$.on_destroy.push(sn(t,e))}function Lt(n,t,e,s){if(n){const i=Be(n,t,e,s);return n[0](i)}}function Be(n,t,e,s){return n[1]&&s?en(e.ctx.slice(),n[1](s(t))):e.ctx}function $t(n,t,e,s){if(n[2]&&s){const i=n[2](s(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|i[a];return r}return t.dirty|i}return t.dirty}function It(n,t,e,s,i,r){if(i){const o=Be(t,e,s,r);n.p(o,i)}}function qt(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function rn(n){const t=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[n,"px"]}const Ne=typeof window<"u";let Jt=Ne?()=>window.performance.now():()=>Date.now(),Xt=Ne?n=>requestAnimationFrame(n):R;const tt=new Set;function De(n){tt.forEach(t=>{t.c(n)||(tt.delete(t),t.f())}),tt.size!==0&&Xt(De)}function Qt(n){let t;return tt.size===0&&Xt(De),{promise:new Promise(e=>{tt.add(t={c:n,f:e})}),abort(){tt.delete(t)}}}function v(n,t){n.appendChild(t)}function Pe(n){if(!n)return document;const t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function on(n){const t=T("style");return t.textContent="/* empty */",an(Pe(n),t),t.sheet}function an(n,t){return v(n.head||n,t),t.sheet}function C(n,t,e){n.insertBefore(t,e||null)}function E(n){n.parentNode&&n.parentNode.removeChild(n)}function T(n){return document.createElement(n)}function O(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function st(n){return document.createTextNode(n)}function F(){return st(" ")}function lt(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function m(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function cn(n){return Array.from(n.childNodes)}function Zt(n,t){t=""+t,n.data!==t&&(n.data=t)}function he(n,t){n.value=t??""}function V(n,t,e){n.classList.toggle(t,!!e)}function Le(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}const St=new Map;let Ct=0;function ln(n){let t=5381,e=n.length;for(;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function un(n,t){const e={stylesheet:on(t),rules:{}};return St.set(n,e),e}function xt(n,t,e,s,i,r,o,a=0){const c=16.666/s;let l=`{
`;for(let b=0;b<=1;b+=c){const A=t+(e-t)*r(b);l+=b*100+`%{${o(A,1-A)}}
`}const h=l+`100% {${o(e,1-e)}}
}`,u=`__svelte_${ln(h)}_${a}`,p=Pe(n),{stylesheet:g,rules:f}=St.get(p)||un(p,n);f[u]||(f[u]=!0,g.insertRule(`@keyframes ${u} ${h}`,g.cssRules.length));const y=n.style.animation||"";return n.style.animation=`${y?`${y}, `:""}${u} ${s}ms linear ${i}ms 1 both`,Ct+=1,u}function Tt(n,t){const e=(n.style.animation||"").split(", "),s=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=e.length-s.length;i&&(n.style.animation=s.join(", "),Ct-=i,Ct||hn())}function hn(){Xt(()=>{Ct||(St.forEach(n=>{const{ownerNode:t}=n.stylesheet;t&&E(t)}),St.clear())})}let ut;function ct(n){ut=n}function $e(){if(!ut)throw new Error("Function called outside component initialization");return ut}function te(n){$e().$$.on_mount.push(n)}function fn(){const n=$e();return(t,e,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[t];if(i){const r=Le(t,e,{cancelable:s});return i.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function Ie(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const Q=[],fe=[];let et=[];const pe=[],pn=Promise.resolve();let Mt=!1;function dn(){Mt||(Mt=!0,pn.then(qe))}function L(n){et.push(n)}const Rt=new Set;let J=0;function qe(){if(J!==0)return;const n=ut;do{try{for(;J<Q.length;){const t=Q[J];J++,ct(t),mn(t.$$)}}catch(t){throw Q.length=0,J=0,t}for(ct(null),Q.length=0,J=0;fe.length;)fe.pop()();for(let t=0;t<et.length;t+=1){const e=et[t];Rt.has(e)||(Rt.add(e),e())}et.length=0}while(Q.length);for(;pe.length;)pe.pop()();Mt=!1,Rt.clear(),ct(n)}function mn(n){if(n.fragment!==null){n.update(),W(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(L)}}function yn(n){const t=[],e=[];et.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),et=t}let rt;function ee(){return rt||(rt=Promise.resolve(),rt.then(()=>{rt=null})),rt}function z(n,t,e){n.dispatchEvent(Le(`${t?"intro":"outro"}${e}`))}const yt=new Set;let D;function gt(){D={r:0,c:[],p:D}}function _t(){D.r||W(D.c),D=D.p}function k(n,t){n&&n.i&&(yt.delete(n),n.i(t))}function x(n,t,e,s){if(n&&n.o){if(yt.has(n))return;yt.add(n),D.c.push(()=>{yt.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}else s&&s()}const ne={duration:0};function se(n,t,e){const s={direction:"in"};let i=t(n,e,s),r=!1,o,a,c=0;function l(){o&&Tt(n,o)}function h(){const{delay:p=0,duration:g=300,easing:f=jt,tick:y=R,css:b}=i||ne;b&&(o=xt(n,0,1,g,p,f,b,c++)),y(0,1);const A=Jt()+p,w=A+g;a&&a.abort(),r=!0,L(()=>z(n,!0,"start")),a=Qt(M=>{if(r){if(M>=w)return y(1,0),z(n,!0,"end"),l(),r=!1;if(M>=A){const j=f((M-A)/g);y(j,1-j)}}return r})}let u=!1;return{start(){u||(u=!0,Tt(n),ht(i)?(i=i(s),ee().then(h)):h())},invalidate(){u=!1},end(){r&&(l(),r=!1)}}}function gn(n,t,e){const s={direction:"out"};let i=t(n,e,s),r=!0,o;const a=D;a.r+=1;let c;function l(){const{delay:h=0,duration:u=300,easing:p=jt,tick:g=R,css:f}=i||ne;f&&(o=xt(n,1,0,u,h,p,f));const y=Jt()+h,b=y+u;L(()=>z(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),Qt(A=>{if(r){if(A>=b)return g(0,1),z(n,!1,"end"),--a.r||W(a.c),!1;if(A>=y){const w=p((A-y)/u);g(1-w,w)}}return r})}return ht(i)?ee().then(()=>{i=i(s),l()}):l(),{end(h){h&&"inert"in n&&(n.inert=c),h&&i.tick&&i.tick(1,0),r&&(o&&Tt(n,o),r=!1)}}}function de(n,t,e,s){let r=t(n,e,{direction:"both"}),o=s?0:1,a=null,c=null,l=null,h;function u(){l&&Tt(n,l)}function p(f,y){const b=f.b-o;return y*=Math.abs(b),{a:o,b:f.b,d:b,duration:y,start:f.start,end:f.start+y,group:f.group}}function g(f){const{delay:y=0,duration:b=300,easing:A=jt,tick:w=R,css:M}=r||ne,j={start:Jt()+y,b:f};f||(j.group=D,D.r+=1),"inert"in n&&(f?h!==void 0&&(n.inert=h):(h=n.inert,n.inert=!0)),a||c?c=j:(M&&(u(),l=xt(n,o,f,b,y,A,M)),f&&w(0,1),a=p(j,b),L(()=>z(n,f,"start")),Qt(pt=>{if(c&&pt>c.start&&(a=p(c,b),c=null,z(n,a.b,"start"),M&&(u(),l=xt(n,o,a.b,a.duration,0,A,r.css))),a){if(pt>=a.end)w(o=a.b,1-o),z(n,a.b,"end"),c||(a.b?u():--a.group.r||W(a.group.c)),a=null;else if(pt>=a.start){const Qe=pt-a.start;o=a.a+a.d*A(Qe/a.duration),w(o,1-o)}}return!!(a||c)}))}return{run(f){ht(r)?ee().then(()=>{r=r({direction:f?"in":"out"}),g(f)}):g(f)},end(){u(),a=c=null}}}function H(n){n&&n.c()}function I(n,t,e){const{fragment:s,after_update:i}=n.$$;s&&s.m(t,e),L(()=>{const r=n.$$.on_mount.map(Re).filter(ht);n.$$.on_destroy?n.$$.on_destroy.push(...r):W(r),n.$$.on_mount=[]}),i.forEach(L)}function q(n,t){const e=n.$$;e.fragment!==null&&(yn(e.after_update),W(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function _n(n,t){n.$$.dirty[0]===-1&&(Q.push(n),dn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function G(n,t,e,s,i,r,o=null,a=[-1]){const c=ut;ct(n);const l=n.$$={fragment:null,ctx:[],props:r,update:R,not_equal:i,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ue(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let h=!1;if(l.ctx=e?e(n,t.props||{},(u,p,...g)=>{const f=g.length?g[0]:p;return l.ctx&&i(l.ctx[u],l.ctx[u]=f)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](f),h&&_n(n,u)),p}):[],l.update(),h=!0,W(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const u=cn(t.target);l.fragment&&l.fragment.l(u),u.forEach(E)}else l.fragment&&l.fragment.c();t.intro&&k(n.$$.fragment),I(n,t.target,t.anchor),qe()}ct(c)}class K{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){q(this,1),this.$destroy=R}$on(t,e){if(!ht(e))return R;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const i=s.indexOf(e);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!nn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const bn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bn);function wn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function nt(n,{delay:t=0,duration:e=400,easing:s=wn,amount:i=5,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-r),[h,u]=rn(i);return{delay:t,duration:e,easing:s,css:(p,g)=>`opacity: ${a-l*g}; filter: ${c} blur(${g*h}${u});`}}class vn{constructor(t){d(this,"id",0);d(this,"playerName","Player");d(this,"playerLevel",1);d(this,"playerExp",0);d(this,"playerInventory",[new En({})]);this.id=t.id??this.id,this.playerName=t.playerName??this.playerName,this.playerLevel=t.playerLevel??this.playerLevel,this.playerExp=t.playerExp??this.playerExp,this.playerInventory=t.playerInventory??this.playerInventory}}class kn{constructor(t){d(this,"id",0);d(this,"family","");d(this,"title","");d(this,"possibleOffspring",[]);d(this,"possibleSeedDrop",[]);d(this,"numOfDays",0);d(this,"numOfDaysRemaining",0);d(this,"chanceToDropSeed",100);d(this,"minSeedDrop",1);d(this,"maxSeedDrop",1);d(this,"minExpGain",0);d(this,"maxExpGain",0);d(this,"description","");d(this,"successRate",100);d(this,"isGrown",!1);this.family=t.family??this.family,this.title=t.title??this.title,this.possibleOffspring=t.possibleOffspring??this.possibleOffspring,this.possibleSeedDrop=t.possibleSeedDrop??this.possibleSeedDrop,this.numOfDays=t.numOfDays??this.numOfDays,this.numOfDaysRemaining=t.numOfDaysRemaining??this.numOfDaysRemaining,this.chanceToDropSeed=t.chanceToDropSeed??this.chanceToDropSeed,this.minSeedDrop=t.minSeedDrop??this.minSeedDrop,this.maxSeedDrop=t.maxSeedDrop??this.maxSeedDrop,this.maxExpGain=t.maxExpGain??this.maxExpGain,this.minExpGain=t.minExpGain??this.minExpGain,this.description=t.description??this.description,this.successRate=t.successRate??this.successRate,this.isGrown=t.isGrown??this.isGrown}setId(){return 0}}class En extends kn{constructor(e){super(e);d(this,"id",0);d(this,"family","planet");d(this,"title","Planet Seed");d(this,"possibleOffspring",["planet"]);d(this,"possibleSeedDrop",["Water Seed"]);d(this,"numOfDays",1);d(this,"numOfDaysRemaining",1);d(this,"chanceToDropSeed",100);d(this,"minSeedDrop",1);d(this,"maxSeedDrop",1);d(this,"minExpGain",50);d(this,"maxExpGain",50);d(this,"description","Grows a planet which more seeds can be grown from.");d(this,"successRate",100);d(this,"isGrown",!1)}}const X=[];function ft(n,t=R){let e;const s=new Set;function i(a){if(Y(n,a)&&(n=a,e)){const c=!X.length;for(const l of s)l[1](),X.push(l,n);if(c){for(let l=0;l<X.length;l+=2)X[l][0](X[l+1]);X.length=0}}}function r(a){i(a(n))}function o(a,c=R){const l=[a,c];return s.add(l),s.size===1&&(e=t(i,r)||R),a(n),()=>{s.delete(l),s.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:o}}const Sn=ft(["Click 'Next' to begin."]),Cn=ft("lobby"),bt=ft("1a");function me(n={}){n.optionSelected=n.optionSelected??0;let t=["Something went wrong... This text should not display."];if(n.chapter==="lobby")switch(n.part){case"1a":t=Bt.lobby.part1a;break;case"2a":t=Bt.lobby.part2a;break;case"3a":t=Bt.lobby.part3a;break}return t}const Bt={lobby:{part1a:["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."],part2a:["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"],part3a:["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."]}};function xn(n,t,e=0){let s={};if(n==="lobby")switch(t){case"1a":s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1},bt.set("2a");break;case"2a":s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1},bt.set("3a");break;case"3a":s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0},bt.set("3a");break}return s}class Tn{constructor(t){d(this,"id",0);d(this,"worldName","World");d(this,"maxActions",1);d(this,"remainingActions",1);d(this,"dayCount",1);d(this,"currentDay","Unoni");d(this,"currentDayIndex",1);d(this,"currentWeek",1);d(this,"currentMonth","New");d(this,"currentMonthIndex",1);d(this,"currentYear","Year of the Farmer");d(this,"currentYearIndex",1);d(this,"currentSeason","Spring");d(this,"plantedSeeds",[]);d(this,"unlockedSeeds",[]);d(this,"player",new vn({playerName:"Guest"}));this.id=t.id??this.id,this.worldName=t.worldName??this.worldName,this.maxActions=t.maxActions??this.maxActions,this.remainingActions=t.remainingActions??this.remainingActions,this.dayCount=t.dayCount??this.dayCount,this.currentDay=t.currentDay??this.currentDay,this.currentDayIndex=t.currentDayIndex??this.currentDayIndex,this.currentWeek=t.currentWeek??this.currentWeek,this.currentMonth=t.currentMonth??this.currentMonth,this.currentMonthIndex=t.currentMonthIndex??this.currentMonthIndex,this.currentYear=t.currentYear??this.currentYear,this.currentYearIndex=t.currentYearIndex??this.currentYearIndex,this.currentSeason=t.currentSeason??this.currentSeason,this.plantedSeeds=t.plantedSeeds??this.plantedSeeds,this.unlockedSeeds=t.unlockedSeeds??this.unlockedSeeds,this.player=t.player??this.player,localStorage.getItem("worldCount")??localStorage.setItem("worldCount","1"),localStorage.getItem("seedCount")??localStorage.setItem("seedCount","1")}startGame(){this.newDay()}isFirstDay(){return this.dayCount===1}firstDay(){this.displayWorldStats()}newDay(){if(this.isFirstDay()){this.firstDay();return}this.remainingActions=this.maxActions,this.plantedSeeds.forEach(t=>t.numOfDaysRemaining-=1),this.harvestSeeds()}displayWorldStats(){let t=[`
      Remaining Actions: ${this.remainingActions}<br>
      Days Passed: ${this.dayCount}<br>
      Current Day: ${this.currentDay}<br>
      Day of the year: ${this.currentDayIndex}<br>
      Current Week: ${this.currentWeek}<br>
      Current Month: ${this.currentMonth} Moon<br>
      Month of the Year: ${this.currentMonthIndex}<br>
      Current Year: ${this.currentYearIndex} - ${this.currentYear}<br>
      Current Season: ${this.currentSeason}<br>
      dumy text to fill screen<br>
      for<br>
      scrollbar<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .
      `];Sn.set(t)}displayHarvestYield(){return[]}plantSeed(t){this.remainingActions-=1}harvestSeeds(){this.plantedSeeds.length!==0&&this.plantedSeeds.forEach(t=>{if(t.numOfDaysRemaining===0){t.isGrown=!0,this.player.playerInventory=[...this.player.playerInventory,{...t}];const e=this.plantedSeeds.indexOf(t);this.plantedSeeds.splice(e,1)}})}hasActionsRemaining(){return this.remainingActions>0}}function An(n){let t,e,s,i,r;const o=n[3].default,a=Lt(o,n,n[2],null);return{c(){t=T("button"),a&&a.c(),m(t,"class",e="btn "+n[0]+" svelte-1utwdw0"),t.disabled=n[1]},m(c,l){C(c,t,l),a&&a.m(t,null),s=!0,i||(r=lt(t,"click",n[4]),i=!0)},p(c,[l]){a&&a.p&&(!s||l&4)&&It(a,o,c,c[2],s?$t(o,c[2],l,null):qt(c[2]),null),(!s||l&1&&e!==(e="btn "+c[0]+" svelte-1utwdw0"))&&m(t,"class",e),(!s||l&2)&&(t.disabled=c[1])},i(c){s||(k(a,c),s=!0)},o(c){x(a,c),s=!1},d(c){c&&E(t),a&&a.d(c),i=!1,r()}}}function On(n,t,e){let{$$slots:s={},$$scope:i}=t,{btnType:r="terminal-option"}=t,{disabled:o=!1}=t;function a(c){Ie.call(this,n,c)}return n.$$set=c=>{"btnType"in c&&e(0,r=c.btnType),"disabled"in c&&e(1,o=c.disabled),"$$scope"in c&&e(2,i=c.$$scope)},[r,o,i,s,a]}class ie extends K{constructor(t){super(),G(this,t,On,An,Y,{btnType:0,disabled:1})}}const Vt=ft({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),Ft=ft({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]}),$=Object.create(null);$.open="0";$.close="1";$.ping="2";$.pong="3";$.message="4";$.upgrade="5";$.noop="6";const wt=Object.create(null);Object.keys($).forEach(n=>{wt[$[n]]=n});const Ut={type:"error",data:"parser error"},Me=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ve=typeof ArrayBuffer=="function",Fe=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,re=({type:n,data:t},e,s)=>Me&&t instanceof Blob?e?s(t):ye(t,s):Ve&&(t instanceof ArrayBuffer||Fe(t))?e?s(t):ye(new Blob([t]),s):s($[n]+(t||"")),ye=(n,t)=>{const e=new FileReader;return e.onload=function(){const s=e.result.split(",")[1];t("b"+(s||""))},e.readAsDataURL(n)};function ge(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Nt;function Rn(n,t){if(Me&&n.data instanceof Blob)return n.data.arrayBuffer().then(ge).then(t);if(Ve&&(n.data instanceof ArrayBuffer||Fe(n.data)))return t(ge(n.data));re(n,!1,e=>{Nt||(Nt=new TextEncoder),t(Nt.encode(e))})}const _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",at=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<_e.length;n++)at[_e.charCodeAt(n)]=n;const Bn=n=>{let t=n.length*.75,e=n.length,s,i=0,r,o,a,c;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);const l=new ArrayBuffer(t),h=new Uint8Array(l);for(s=0;s<e;s+=4)r=at[n.charCodeAt(s)],o=at[n.charCodeAt(s+1)],a=at[n.charCodeAt(s+2)],c=at[n.charCodeAt(s+3)],h[i++]=r<<2|o>>4,h[i++]=(o&15)<<4|a>>2,h[i++]=(a&3)<<6|c&63;return l},Nn=typeof ArrayBuffer=="function",oe=(n,t)=>{if(typeof n!="string")return{type:"message",data:Ue(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:Dn(n.substring(1),t)}:wt[e]?n.length>1?{type:wt[e],data:n.substring(1)}:{type:wt[e]}:Ut},Dn=(n,t)=>{if(Nn){const e=Bn(n);return Ue(e,t)}else return{base64:!0,data:n}},Ue=(n,t)=>{switch(t){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},He="",Pn=(n,t)=>{const e=n.length,s=new Array(e);let i=0;n.forEach((r,o)=>{re(r,!1,a=>{s[o]=a,++i===e&&t(s.join(He))})})},Ln=(n,t)=>{const e=n.split(He),s=[];for(let i=0;i<e.length;i++){const r=oe(e[i],t);if(s.push(r),r.type==="error")break}return s};function $n(){return new TransformStream({transform(n,t){Rn(n,e=>{const s=e.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let Dt;function dt(n){return n.reduce((t,e)=>t+e.length,0)}function mt(n,t){if(n[0].length===t)return n.shift();const e=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)e[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),e}function In(n,t){Dt||(Dt=new TextDecoder);const e=[];let s=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(s===0){if(dt(e)<1)break;const c=mt(e,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(dt(e)<2)break;const c=mt(e,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(dt(e)<8)break;const c=mt(e,8),l=new DataView(c.buffer,c.byteOffset,c.length),h=l.getUint32(0);if(h>Math.pow(2,21)-1){a.enqueue(Ut);break}i=h*Math.pow(2,32)+l.getUint32(4),s=3}else{if(dt(e)<i)break;const c=mt(e,i);a.enqueue(oe(r?c:Dt.decode(c),t)),s=0}if(i===0||i>n){a.enqueue(Ut);break}}}})}const We=4;function S(n){if(n)return qn(n)}function qn(n){for(var t in S.prototype)n[t]=S.prototype[t];return n}S.prototype.on=S.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};S.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<e.length;i++)if(s=e[i],s===t||s.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+n],this};S.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,i=e.length;s<i;++s)e[s].apply(this,t)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};S.prototype.hasListeners=function(n){return!!this.listeners(n).length};const At=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),B=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Mn="arraybuffer";function Ye(n,...t){return t.reduce((e,s)=>(n.hasOwnProperty(s)&&(e[s]=n[s]),e),{})}const Vn=B.setTimeout,Fn=B.clearTimeout;function Ot(n,t){t.useNativeTimers?(n.setTimeoutFn=Vn.bind(B),n.clearTimeoutFn=Fn.bind(B)):(n.setTimeoutFn=B.setTimeout.bind(B),n.clearTimeoutFn=B.clearTimeout.bind(B))}const Un=1.33;function Hn(n){return typeof n=="string"?Wn(n):Math.ceil((n.byteLength||n.size)*Un)}function Wn(n){let t=0,e=0;for(let s=0,i=n.length;s<i;s++)t=n.charCodeAt(s),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(s++,e+=4);return e}function ze(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Yn(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function zn(n){let t={},e=n.split("&");for(let s=0,i=e.length;s<i;s++){let r=e[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class Gn extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class ae extends S{constructor(t){super(),this.writable=!1,Ot(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,s){return super.emitReserved("error",new Gn(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=oe(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=Yn(t);return e.length?"?"+e:""}}class Kn extends ae{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||e()})),this.writable||(s++,this.once("drain",function(){--s||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Ln(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Pn(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=ze()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let Ge=!1;try{Ge=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const jn=Ge;function Jn(){}class Xn extends Kn{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let s=location.port;s||(s=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,s)=>{this.onError("xhr poll error",e,s)}),this.pollXhr=t}}class P extends S{constructor(t,e,s){super(),this.createRequest=t,Ot(this,s),this._opts=s,this._method=s.method||"GET",this._uri=e,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const e=Ye(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(e);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=P.requestsCount++,P.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Jn,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete P.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}P.requestsCount=0;P.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",be);else if(typeof addEventListener=="function"){const n="onpagehide"in B?"pagehide":"unload";addEventListener(n,be,!1)}}function be(){for(let n in P.requests)P.requests.hasOwnProperty(n)&&P.requests[n].abort()}const Qn=function(){const n=Ke({xdomain:!1});return n&&n.responseType!==null}();class Zn extends Xn{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=Qn&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new P(Ke,this.uri(),t)}}function Ke(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||jn))return new XMLHttpRequest}catch{}if(!t)try{return new B[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const je=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ts extends ae{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,s=je?{}:Ye(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;re(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&At(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=ze()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const Pt=B.WebSocket||B.MozWebSocket;class es extends ts{createSocket(t,e,s){return je?new Pt(t,e,s):e?new Pt(t,e):new Pt(t)}doWrite(t,e){this.ws.send(e)}}class ns extends ae{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=In(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(e).getReader(),i=$n();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:a,value:c})=>{a||(this.onPacket(c),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;this._writer.write(s).then(()=>{i&&At(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ss={websocket:es,webtransport:ns,polling:Zn},is=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,rs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ht(n){if(n.length>8e3)throw"URI too long";const t=n,e=n.indexOf("["),s=n.indexOf("]");e!=-1&&s!=-1&&(n=n.substring(0,e)+n.substring(e,s).replace(/:/g,";")+n.substring(s,n.length));let i=is.exec(n||""),r={},o=14;for(;o--;)r[rs[o]]=i[o]||"";return e!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=os(r,r.path),r.queryKey=as(r,r.query),r}function os(n,t){const e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function as(n,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(e[i]=r)}),e}const Wt=typeof addEventListener=="function"&&typeof removeEventListener=="function",vt=[];Wt&&addEventListener("offline",()=>{vt.forEach(n=>n())},!1);class U extends S{constructor(t,e){if(super(),this.binaryType=Mn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const s=Ht(t);e.hostname=s.host,e.secure=s.protocol==="https"||s.protocol==="wss",e.port=s.port,s.query&&(e.query=s.query)}else e.host&&(e.hostname=Ht(e.host).host);Ot(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zn(this.opts.query)),Wt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=We,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&U.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",U.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(e+=Hn(i)),s>0&&e>this._maxPayload)return this.writeBuffer.slice(0,s);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,At(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,s){return this._sendPacket("message",t,e,s),this}send(t,e,s){return this._sendPacket("message",t,e,s),this}_sendPacket(t,e,s,i){if(typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:e,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(U.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Wt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=vt.indexOf(this._offlineEventListener);s!==-1&&vt.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}U.protocol=We;class cs extends U{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),s=!1;U.priorWebsocketSuccess=!1;const i=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",u=>{if(!s)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;U.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=e.name,this.emitReserved("upgradeError",p)}}))};function r(){s||(s=!0,h(),e.close(),e=null)}const o=u=>{const p=new Error("probe error: "+u);p.transport=e.name,r(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function c(){o("socket closed")}function l(u){e&&u.name!==e.name&&r()}const h=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};e.once("open",i),e.once("error",o),e.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}let ls=class extends cs{constructor(t,e={}){const s=typeof t=="object"?t:e;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>ss[i]).filter(i=>!!i)),super(t,s)}};function us(n,t="",e){let s=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),s=Ht(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(e&&e.port===s.port?"":":"+s.port),s}const hs=typeof ArrayBuffer=="function",fs=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Je=Object.prototype.toString,ps=typeof Blob=="function"||typeof Blob<"u"&&Je.call(Blob)==="[object BlobConstructor]",ds=typeof File=="function"||typeof File<"u"&&Je.call(File)==="[object FileConstructor]";function ce(n){return hs&&(n instanceof ArrayBuffer||fs(n))||ps&&n instanceof Blob||ds&&n instanceof File}function kt(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,s=n.length;e<s;e++)if(kt(n[e]))return!0;return!1}if(ce(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return kt(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&kt(n[e]))return!0;return!1}function ms(n){const t=[],e=n.data,s=n;return s.data=Yt(e,t),s.attachments=t.length,{packet:s,buffers:t}}function Yt(n,t){if(!n)return n;if(ce(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let s=0;s<n.length;s++)e[s]=Yt(n[s],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=Yt(n[s],t));return e}return n}function ys(n,t){return n.data=zt(n.data,t),delete n.attachments,n}function zt(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=zt(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=zt(n[e],t));return n}const gs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_s=5;var _;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(_||(_={}));class bs{constructor(t){this.replacer=t}encode(t){return(t.type===_.EVENT||t.type===_.ACK)&&kt(t)?this.encodeAsBinary({type:t.type===_.EVENT?_.BINARY_EVENT:_.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===_.BINARY_EVENT||t.type===_.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=ms(t),s=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(s),i}}function we(n){return Object.prototype.toString.call(n)==="[object Object]"}class le extends S{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const s=e.type===_.BINARY_EVENT;s||e.type===_.BINARY_ACK?(e.type=s?_.EVENT:_.ACK,this.reconstructor=new ws(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ce(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(_[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===_.BINARY_EVENT||s.type===_.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(r,e)}else s.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}s.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(le.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case _.CONNECT:return we(e);case _.DISCONNECT:return e===void 0;case _.CONNECT_ERROR:return typeof e=="string"||we(e);case _.EVENT:case _.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&gs.indexOf(e[0])===-1);case _.ACK:case _.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ws{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=ys(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const vs=Object.freeze(Object.defineProperty({__proto__:null,Decoder:le,Encoder:bs,get PacketType(){return _},protocol:_s},Symbol.toStringTag,{value:"Module"}));function N(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const ks=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xe extends S{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[N(t,"open",this.onopen.bind(this)),N(t,"packet",this.onpacket.bind(this)),N(t,"error",this.onerror.bind(this)),N(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var s,i,r;if(ks.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:_.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const h=this.ids++,u=e.pop();this._registerAckCallback(h,u),o.id=h}const a=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((s,i)=>{const r=(o,a)=>o?i(o):s(a);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:_.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case _.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _.EVENT:case _.BINARY_EVENT:this.onevent(t);break;case _.ACK:case _.BINARY_ACK:this.onack(t);break;case _.DISCONNECT:this.ondisconnect();break;case _.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:_.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function it(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}it.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};it.prototype.reset=function(){this.attempts=0};it.prototype.setMin=function(n){this.ms=n};it.prototype.setMax=function(n){this.max=n};it.prototype.setJitter=function(n){this.jitter=n};class Gt extends S{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Ot(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new it({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||vs;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ls(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=N(e,"open",function(){s.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=N(e,"error",r);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(N(t,"ping",this.onping.bind(this)),N(t,"data",this.ondata.bind(this)),N(t,"error",this.onerror.bind(this)),N(t,"close",this.onclose.bind(this)),N(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){At(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Xe(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const s of e)if(this.nsps[s].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ot={};function Et(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=us(n,t.path||"/socket.io"),s=e.source,i=e.id,r=e.path,o=ot[i]&&r in ot[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return a?c=new Gt(s,t):(ot[i]||(ot[i]=new Gt(s,t)),c=ot[i]),e.query&&!t.query&&(t.query=e.queryKey),c.socket(e.path,t)}Object.assign(Et,{Manager:Gt,Socket:Xe,io:Et,connect:Et});function Es(n){let t,e,s,i;return e=new Qs({props:{bothPlayersJoined:n[0],playingAs:n[1](),terminalColor:"grey"}}),{c(){t=T("div"),H(e.$$.fragment),m(t,"class","main-content svelte-abemhi")},m(r,o){C(r,t,o),I(e,t,null),i=!0},p(r,[o]){const a={};o&1&&(a.bothPlayersJoined=r[0]),e.$set(a)},i(r){i||(k(e.$$.fragment,r),r&&(s||L(()=>{s=se(t,nt,{}),s.start()})),i=!0)},o(r){x(e.$$.fragment,r),i=!1},d(r){r&&E(t),q(e)}}}function Ss(n,t,e){let s,i;Z(n,Ft,c=>e(2,s=c)),Z(n,Vt,c=>e(3,i=c));let r=Et("http://192.168.2.10:6912"),o=!1;te(()=>{r.on("connect",()=>console.log(`User ID: ${r.id} connected!`)),r.on("connect_error",c=>console.error("Connection error:",c)),r.on("set-users",c=>{Object.entries(c).forEach(([l,h])=>{Vt.update(u=>(u.id=c.p1,u)),Ft.update(u=>(u.id=c.p2,u))})}),r.on("p2-joined",c=>{e(0,o=!0)}),r.emit("client-ready")});function a(){if(i.id===r.id)return"male";if(s.id===r.id)return"female"}return[o,a]}class Cs extends K{constructor(t){super(),G(this,t,Ss,Es,Y,{})}}function xs(n){let t,e,s,i,r,o,a;return e=new Ws({props:{sidebarExpanded:n[0]}}),e.$on("select",n[1]),e.$on("toggle-sidebar",n[2]),r=new Cs({}),{c(){t=T("div"),H(e.$$.fragment),s=F(),i=T("div"),H(r.$$.fragment),m(i,"class","screen svelte-kvlyqv"),m(t,"class","client svelte-kvlyqv"),V(t,"client-collapsed",!n[0])},m(c,l){C(c,t,l),I(e,t,null),v(t,s),v(t,i),I(r,i,null),a=!0},p(c,[l]){const h={};l&1&&(h.sidebarExpanded=c[0]),e.$set(h),(!a||l&1)&&V(t,"client-collapsed",!c[0])},i(c){a||(k(e.$$.fragment,c),k(r.$$.fragment,c),c&&(o||L(()=>{o=se(t,nt,{duration:2e3}),o.start()})),a=!0)},o(c){x(e.$$.fragment,c),x(r.$$.fragment,c),a=!1},d(c){c&&E(t),q(e),q(r)}}}function Ts(n,t,e){let s=!1;function i(o){o.detail}return[s,i,()=>e(0,s=!s)]}class As extends K{constructor(t){super(),G(this,t,Ts,xs,Y,{})}}const Os=n=>({}),ve=n=>({}),Rs=n=>({}),ke=n=>({});function Bs(n){let t,e,s,i;return{c(){t=O("svg"),e=O("circle"),s=O("path"),i=O("path"),m(e,"cx","12"),m(e,"cy","12"),m(e,"r","10"),m(s,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),m(i,"d","M12 17h.01"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(r,o){C(r,t,o),v(t,e),v(t,s),v(t,i)},d(r){r&&E(t)}}}function Ns(n){let t,e,s;return{c(){t=O("svg"),e=O("polyline"),s=O("line"),m(e,"points","4 17 10 11 4 5"),m(s,"x1","12"),m(s,"x2","20"),m(s,"y1","19"),m(s,"y2","19"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(i,r){C(i,t,r),v(t,e),v(t,s)},d(i){i&&E(t)}}}function Ds(n){let t,e,s;return{c(){t=O("svg"),e=O("path"),s=O("circle"),m(e,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),m(s,"cx","12"),m(s,"cy","7"),m(s,"r","4"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(i,r){C(i,t,r),v(t,e),v(t,s)},d(i){i&&E(t)}}}function Ps(n){let t,e,s;return{c(){t=O("svg"),e=O("path"),s=O("path"),m(e,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),m(s,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(i,r){C(i,t,r),v(t,e),v(t,s)},d(i){i&&E(t)}}}function Ee(n){let t,e,s,i,r,o,a;const c=n[4].title,l=Lt(c,n,n[3],ke),h=l||Ls(),u=n[4].description,p=Lt(u,n,n[3],ve),g=p||$s();return{c(){t=T("div"),e=T("h2"),h&&h.c(),s=F(),i=T("p"),g&&g.c(),m(e,"class","item-title svelte-16xfpde"),m(i,"class","item-text svelte-16xfpde"),m(t,"class","item-text-wrapper svelte-16xfpde")},m(f,y){C(f,t,y),v(t,e),h&&h.m(e,null),v(t,s),v(t,i),g&&g.m(i,null),a=!0},p(f,y){l&&l.p&&(!a||y&8)&&It(l,c,f,f[3],a?$t(c,f[3],y,Rs):qt(f[3]),ke),p&&p.p&&(!a||y&8)&&It(p,u,f,f[3],a?$t(u,f[3],y,Os):qt(f[3]),ve)},i(f){a||(k(h,f),k(g,f),f&&L(()=>{a&&(o&&o.end(1),r=se(t,nt,{duration:500}),r.start())}),a=!0)},o(f){x(h,f),x(g,f),r&&r.invalidate(),f&&(o=gn(t,nt,{duration:250})),a=!1},d(f){f&&E(t),h&&h.d(f),g&&g.d(f),f&&o&&o.end()}}}function Ls(n){let t;return{c(){t=st("Title")},m(e,s){C(e,t,s)},d(e){e&&E(t)}}}function $s(n){let t;return{c(){t=st("Brief description")},m(e,s){C(e,t,s)},d(e){e&&E(t)}}}function Is(n){let t,e,s,i,r,o;function a(u,p){return u[0]==="seed"?Ps:u[0]==="player"?Ds:u[0]==="terminal"?Ns:Bs}let c=a(n),l=c(n),h=!n[2]&&Ee(n);return{c(){t=T("div"),l.c(),e=F(),h&&h.c(),m(t,"class",s="item item-color__"+n[1]+" svelte-16xfpde")},m(u,p){C(u,t,p),l.m(t,null),v(t,e),h&&h.m(t,null),i=!0,r||(o=lt(t,"click",n[5]),r=!0)},p(u,[p]){c!==(c=a(u))&&(l.d(1),l=c(u),l&&(l.c(),l.m(t,e))),u[2]?h&&(gt(),x(h,1,1,()=>{h=null}),_t()):h?(h.p(u,p),p&4&&k(h,1)):(h=Ee(u),h.c(),k(h,1),h.m(t,null)),(!i||p&2&&s!==(s="item item-color__"+u[1]+" svelte-16xfpde"))&&m(t,"class",s)},i(u){i||(k(h),i=!0)},o(u){x(h),i=!1},d(u){u&&E(t),l.d(),h&&h.d(),r=!1,o()}}}function qs(n,t,e){let{$$slots:s={},$$scope:i}=t,{iconType:r="unkown"}=t,{color:o="grey"}=t,{collapsed:a=!1}=t;function c(l){Ie.call(this,n,l)}return n.$$set=l=>{"iconType"in l&&e(0,r=l.iconType),"color"in l&&e(1,o=l.color),"collapsed"in l&&e(2,a=l.collapsed),"$$scope"in l&&e(3,i=l.$$scope)},[r,o,a,i,s,c]}class Ms extends K{constructor(t){super(),G(this,t,qs,Is,Y,{iconType:0,color:1,collapsed:2})}}function Vs(n){let t;return{c(){t=T("span"),t.textContent="Log",m(t,"slot","title")},m(e,s){C(e,t,s)},p:R,d(e){e&&E(t)}}}function Fs(n){let t;return{c(){t=T("span"),t.textContent="View logged messages",m(t,"slot","description")},m(e,s){C(e,t,s)},p:R,d(e){e&&E(t)}}}function Us(n){let t,e,s,i,r,o,a,c,l;return o=new Ms({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[Fs],title:[Vs]},$$scope:{ctx:n}}}),o.$on("click",n[3]),{c(){t=T("div"),e=O("svg"),s=O("path"),i=O("path"),r=F(),H(o.$$.fragment),m(s,"d","M19 15V9"),m(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),m(e,"class","icon collapse-icon svelte-1tpwflx"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),V(e,"rotate",!n[0]),m(t,"class","sidebar svelte-1tpwflx"),V(t,"sidebar-collapsed",!n[0]),V(t,"sidebar-expanded",n[0])},m(h,u){C(h,t,u),v(t,e),v(e,s),v(e,i),v(t,r),I(o,t,null),a=!0,c||(l=lt(e,"click",n[2]),c=!0)},p(h,[u]){(!a||u&1)&&V(e,"rotate",!h[0]);const p={};u&1&&(p.collapsed=!h[0]),u&16&&(p.$$scope={dirty:u,ctx:h}),o.$set(p),(!a||u&1)&&V(t,"sidebar-collapsed",!h[0]),(!a||u&1)&&V(t,"sidebar-expanded",h[0])},i(h){a||(k(o.$$.fragment,h),a=!0)},o(h){x(o.$$.fragment,h),a=!1},d(h){h&&E(t),q(o),c=!1,l()}}}function Hs(n,t,e){let{sidebarExpanded:s=!0}=t;const i=fn(),r=()=>i("toggle-sidebar"),o=()=>i("select","log");return n.$$set=a=>{"sidebarExpanded"in a&&e(0,s=a.sidebarExpanded)},[s,i,r,o]}class Ws extends K{constructor(t){super(),G(this,t,Hs,Us,Y,{sidebarExpanded:0})}}function Kt(){return Kt=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Kt.apply(this,arguments)}var Ys={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,t){},onStringTyped:function(n,t){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,t){},onTypingResumed:function(n,t){},onReset:function(n){},onStop:function(n,t){},onStart:function(n,t){},onDestroy:function(n){}},zs=new(function(){function n(){}var t=n.prototype;return t.load=function(e,s,i){if(e.el=typeof i=="string"?document.querySelector(i):i,e.options=Kt({},Ys,s),e.isInput=e.el.tagName.toLowerCase()==="input",e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map(function(l){return l.trim()}),e.stringsElement=typeof e.options.stringsElement=="string"?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)e.strings.push(r[a].innerHTML.trim())}for(var c in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[c]=c;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:e.contentType==="html"?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var s="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},t.appendFadeOutAnimationCss=function(e){var s="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},n}()),Se=new(function(){function n(){}var t=n.prototype;return t.typeHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";e.substring(s+1).charAt(0)!==o&&!(1+ ++s>e.length););s++}return s},t.backSpaceHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";e.substring(s-1).charAt(0)!==o&&!(--s<0););s--}return s},n}()),Ce=function(){function n(e,s){zs.load(this,s,e),this.begin()}var t=n.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){e===void 0&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){e.strPos===0?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)},this.startDelay)},t.typewrite=function(e,s){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=Se.typeHtmlChars(e,s,i);var a=0,c=e.substring(s);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,a=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),e=e.substring(0,s)+e.substring(s+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;e.substring(s+o).charAt(0)!=="`"&&(o++,!(s+o>e.length)););var h=e.substring(0,s),u=e.substring(h.length+1,s+o),p=e.substring(s+o+1);e=h+u+p,o--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),s>=e.length?i.doneTyping(e,s):i.keepTyping(e,s,o),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},r):this.setPauseStatus(e,s,!0)},t.keepTyping=function(e,s,i){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,s+=i);this.replaceText(r),this.typewrite(e,s)},t.doneTyping=function(e,s){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(e,s)},this.backDelay))},t.backspace=function(e,s){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=Se.backSpaceHtmlChars(e,s,i);var o=e.substring(0,s);if(i.replaceText(o),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&o===a.substring(0,s)?s:0}s>i.stopNum?(s--,i.backspace(e,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},r)}else this.setPauseStatus(e,s,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,s,i){this.pause.typewrite=i,this.pause.curString=e,this.pause.curStrPos=s},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:this.contentType==="html"?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",function(s){e.stop()}),this.el.addEventListener("blur",function(s){e.el.value&&e.el.value.length!==0||e.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();function xe(n){let t,e;return t=new ie({props:{btnType:"terminal-option",disabled:n[2].option1Disabled,$$slots:{default:[Gs]},$$scope:{ctx:n}}}),t.$on("click",n[9]),{c(){H(t.$$.fragment)},m(s,i){I(t,s,i),e=!0},p(s,i){const r={};i&4&&(r.disabled=s[2].option1Disabled),i&262148&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(k(t.$$.fragment,s),e=!0)},o(s){x(t.$$.fragment,s),e=!1},d(s){q(t,s)}}}function Gs(n){let t=n[2].option1+"",e;return{c(){e=st(t)},m(s,i){C(s,e,i)},p(s,i){i&4&&t!==(t=s[2].option1+"")&&Zt(e,t)},d(s){s&&E(e)}}}function Te(n){let t,e;return t=new ie({props:{btnType:"terminal-option",disabled:n[2].option2Disabled,$$slots:{default:[Ks]},$$scope:{ctx:n}}}),t.$on("click",n[10]),{c(){H(t.$$.fragment)},m(s,i){I(t,s,i),e=!0},p(s,i){const r={};i&4&&(r.disabled=s[2].option2Disabled),i&262148&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(k(t.$$.fragment,s),e=!0)},o(s){x(t.$$.fragment,s),e=!1},d(s){q(t,s)}}}function Ks(n){let t=n[2].option2+"",e;return{c(){e=st(t)},m(s,i){C(s,e,i)},p(s,i){i&4&&t!==(t=s[2].option2+"")&&Zt(e,t)},d(s){s&&E(e)}}}function Ae(n){let t,e;return t=new ie({props:{btnType:"terminal-option",disabled:n[2].option3Disabled,$$slots:{default:[js]},$$scope:{ctx:n}}}),t.$on("click",n[11]),{c(){H(t.$$.fragment)},m(s,i){I(t,s,i),e=!0},p(s,i){const r={};i&4&&(r.disabled=s[2].option3Disabled),i&262148&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(k(t.$$.fragment,s),e=!0)},o(s){x(t.$$.fragment,s),e=!1},d(s){q(t,s)}}}function js(n){let t=n[2].option3+"",e;return{c(){e=st(t)},m(s,i){C(s,e,i)},p(s,i){i&4&&t!==(t=s[2].option3+"")&&Zt(e,t)},d(s){s&&E(e)}}}function Oe(n){let t,e,s;return{c(){t=T("input"),m(t,"type","text"),m(t,"maxlength","20"),m(t,"class","terminal-input svelte-xxi6ix")},m(i,r){C(i,t,r),he(t,n[1]),e||(s=[lt(t,"input",n[12]),lt(t,"input",n[4])],e=!0)},p(i,r){r&2&&t.value!==i[1]&&he(t,i[1])},d(i){i&&E(t),e=!1,W(s)}}}function Js(n){let t,e,s,i,r,o,a,c,l,h,u=n[2].option1Visible&&xe(n),p=n[2].option2Visible&&Te(n),g=n[2].option3Visible&&Ae(n),f=n[2].inputVisible&&Oe(n);return{c(){t=T("div"),e=T("div"),e.innerHTML='<p id="terminal-text" class="svelte-xxi6ix"></p>',s=F(),i=T("div"),u&&u.c(),r=F(),p&&p.c(),o=F(),g&&g.c(),a=F(),f&&f.c(),m(e,"class","terminal-screen svelte-xxi6ix"),m(i,"class","terminal-option-flex-group"),m(t,"class",c="terminal terminal__"+n[0]+" svelte-xxi6ix")},m(y,b){C(y,t,b),v(t,e),v(t,s),v(t,i),u&&u.m(i,null),v(i,r),p&&p.m(i,null),v(i,o),g&&g.m(i,null),v(i,a),f&&f.m(i,null),h=!0},p(y,[b]){y[2].option1Visible?u?(u.p(y,b),b&4&&k(u,1)):(u=xe(y),u.c(),k(u,1),u.m(i,r)):u&&(gt(),x(u,1,1,()=>{u=null}),_t()),y[2].option2Visible?p?(p.p(y,b),b&4&&k(p,1)):(p=Te(y),p.c(),k(p,1),p.m(i,o)):p&&(gt(),x(p,1,1,()=>{p=null}),_t()),y[2].option3Visible?g?(g.p(y,b),b&4&&k(g,1)):(g=Ae(y),g.c(),k(g,1),g.m(i,a)):g&&(gt(),x(g,1,1,()=>{g=null}),_t()),y[2].inputVisible?f?f.p(y,b):(f=Oe(y),f.c(),f.m(i,null)):f&&(f.d(1),f=null),(!h||b&1&&c!==(c="terminal terminal__"+y[0]+" svelte-xxi6ix"))&&m(t,"class",c)},i(y){h||(k(u),k(p),k(g),y&&L(()=>{h&&(l||(l=de(t,nt,{duration:1e3},!0)),l.run(1))}),h=!0)},o(y){x(u),x(p),x(g),y&&(l||(l=de(t,nt,{duration:1e3},!1)),l.run(0)),h=!1},d(y){y&&E(t),u&&u.d(),p&&p.d(),g&&g.d(),f&&f.d(),y&&l&&l.end()}}}function Xs(n,t,e){let s,i;Z(n,bt,w=>e(7,s=w)),Z(n,Cn,w=>e(8,i=w)),Z(n,Ft,w=>e(14,w)),Z(n,Vt,w=>e(15,w));let{terminalColor:r="grey"}=t,{bothPlayersJoined:o=!1}=t,{playingAs:a=""}=t,c,l="",h=me({chapter:i,part:s}),u={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1};te(()=>{c=new Ce("#terminal-text",{strings:h,typeSpeed:20})});function p(w,M=!1){e(2,u=xn(i,s,w)),c.destroy(),c=new Ce("#terminal-text",{strings:me({chapter:i,part:s,optionSelected:w}),typeSpeed:20})}function g(){i==="lobby"&&s==="3a"&&console.log(l)}const f=()=>p(1),y=()=>p(2),b=()=>p(3);function A(){l=this.value,e(1,l)}return n.$$set=w=>{"terminalColor"in w&&e(0,r=w.terminalColor),"bothPlayersJoined"in w&&e(5,o=w.bothPlayersJoined),"playingAs"in w&&e(6,a=w.playingAs)},n.$$.update=()=>{n.$$.dirty&416&&o&&i==="lobby"&&s==="1a"&&(e(2,u.option1Disabled=!1,u),e(2,u.option1="Ready",u))},[r,l,u,p,g,o,a,s,i,f,y,b,A]}class Qs extends K{constructor(t){super(),G(this,t,Xs,Js,Y,{terminalColor:0,bothPlayersJoined:5,playingAs:6})}}function Zs(n){let t,e,s;return e=new As({}),{c(){t=T("main"),H(e.$$.fragment),m(t,"class","main-content svelte-kn45eq")},m(i,r){C(i,t,r),I(e,t,null),s=!0},p:R,i(i){s||(k(e.$$.fragment,i),s=!0)},o(i){x(e.$$.fragment,i),s=!1},d(i){i&&E(t),q(e)}}}function ti(n){const t=new Tn({});te(()=>{e()});function e(){t.startGame()}return[]}class ei extends K{constructor(t){super(),G(this,t,ti,Zs,Y,{})}}new ei({target:document.getElementById("app")});
