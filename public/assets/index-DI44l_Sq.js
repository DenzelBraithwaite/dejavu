var tn=Object.defineProperty;var nn=(n,e,t)=>e in n?tn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var le=(n,e,t)=>nn(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function B(){}const Qe=n=>n;function sn(n,e){for(const t in e)n[t]=e[t];return n}function Bt(n){return n()}function pt(){return Object.create(null)}function Q(n){n.forEach(Bt)}function ge(n){return typeof n=="function"}function z(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function rn(n){return Object.keys(n).length===0}function Rt(n,...e){if(n==null){for(const s of e)s(void 0);return B}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ye(n){let e;return Rt(n,t=>e=t)(),e}function J(n,e,t){n.$$.on_destroy.push(Rt(e,t))}function qe(n,e,t,s){if(n){const i=Pt(n,e,t,s);return n[0](i)}}function Pt(n,e,t,s){return n[1]&&s?sn(t.ctx.slice(),n[1](s(e))):t.ctx}function Ie(n,e,t,s){if(n[2]&&s){const i=n[2](s(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],a=Math.max(e.dirty.length,i.length);for(let o=0;o<a;o+=1)r[o]=e.dirty[o]|i[o];return r}return e.dirty|i}return e.dirty}function Me(n,e,t,s,i,r){if(i){const a=Pt(e,t,s,r);n.p(a,i)}}function Fe(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function on(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Lt=typeof window<"u";let Ge=Lt?()=>window.performance.now():()=>Date.now(),Ze=Lt?n=>requestAnimationFrame(n):B;const ie=new Set;function $t(n){ie.forEach(e=>{e.c(n)||(ie.delete(e),e.f())}),ie.size!==0&&Ze($t)}function et(n){let e;return ie.size===0&&Ze($t),{promise:new Promise(t=>{ie.add(e={c:n,f:t})}),abort(){ie.delete(e)}}}function v(n,e){n.appendChild(e)}function Vt(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function an(n){const e=C("style");return e.textContent="/* empty */",cn(Vt(n),e),e.sheet}function cn(n,e){return v(n.head||n,e),e.sheet}function O(n,e,t){n.insertBefore(e,t||null)}function E(n){n.parentNode&&n.parentNode.removeChild(n)}function C(n){return document.createElement(n)}function D(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ae(n){return document.createTextNode(n)}function I(){return ae(" ")}function de(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function p(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function ln(n){return Array.from(n.childNodes)}function tt(n,e){e=""+e,n.data!==e&&(n.data=e)}function dt(n,e){n.value=e??""}function K(n,e,t){n.classList.toggle(e,!!t)}function qt(n,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:s})}const Se=new Map;let Ae=0;function un(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function fn(n,e){const t={stylesheet:an(e),rules:{}};return Se.set(n,t),t}function Ne(n,e,t,s,i,r,a,o=0){const c=16.666/s;let l=`{
`;for(let g=0;g<=1;g+=c){const w=e+(t-e)*r(g);l+=g*100+`%{${a(w,1-w)}}
`}const u=l+`100% {${a(t,1-t)}}
}`,f=`__svelte_${un(u)}_${o}`,d=Vt(n),{stylesheet:y,rules:h}=Se.get(d)||fn(d,n);h[f]||(h[f]=!0,y.insertRule(`@keyframes ${f} ${u}`,y.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${f} ${s}ms linear ${i}ms 1 both`,Ae+=1,f}function xe(n,e){const t=(n.style.animation||"").split(", "),s=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-s.length;i&&(n.style.animation=s.join(", "),Ae-=i,Ae||hn())}function hn(){Ze(()=>{Ae||(Se.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&E(e)}),Se.clear())})}let me;function pe(n){me=n}function It(){if(!me)throw new Error("Function called outside component initialization");return me}function nt(n){It().$$.on_mount.push(n)}function pn(){const n=It();return(e,t,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[e];if(i){const r=qt(e,t,{cancelable:s});return i.slice().forEach(a=>{a.call(n,r)}),!r.defaultPrevented}return!0}}function Mt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const se=[],mt=[];let re=[];const gt=[],dn=Promise.resolve();let Ue=!1;function mn(){Ue||(Ue=!0,dn.then(Ft))}function U(n){re.push(n)}const Pe=new Set;let te=0;function Ft(){if(te!==0)return;const n=me;do{try{for(;te<se.length;){const e=se[te];te++,pe(e),gn(e.$$)}}catch(e){throw se.length=0,te=0,e}for(pe(null),se.length=0,te=0;mt.length;)mt.pop()();for(let e=0;e<re.length;e+=1){const t=re[e];Pe.has(t)||(Pe.add(t),t())}re.length=0}while(se.length);for(;gt.length;)gt.pop()();Ue=!1,Pe.clear(),pe(n)}function gn(n){if(n.fragment!==null){n.update(),Q(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(U)}}function yn(n){const e=[],t=[];re.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),re=e}let ue;function st(){return ue||(ue=Promise.resolve(),ue.then(()=>{ue=null})),ue}function G(n,e,t){n.dispatchEvent(qt(`${e?"intro":"outro"}${t}`))}const we=new Set;let M;function ve(){M={r:0,c:[],p:M}}function ke(){M.r||Q(M.c),M=M.p}function k(n,e){n&&n.i&&(we.delete(n),n.i(e))}function A(n,e,t,s){if(n&&n.o){if(we.has(n))return;we.add(n),M.c.push(()=>{we.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}const it={duration:0};function rt(n,e,t){const s={direction:"in"};let i=e(n,t,s),r=!1,a,o,c=0;function l(){a&&xe(n,a)}function u(){const{delay:d=0,duration:y=300,easing:h=Qe,tick:m=B,css:g}=i||it;g&&(a=Ne(n,0,1,y,d,h,g,c++)),m(0,1);const w=Ge()+d,b=w+y;o&&o.abort(),r=!0,U(()=>G(n,!0,"start")),o=et(S=>{if(r){if(S>=b)return m(1,0),G(n,!0,"end"),l(),r=!1;if(S>=w){const L=h((S-w)/y);m(L,1-L)}}return r})}let f=!1;return{start(){f||(f=!0,xe(n),ge(i)?(i=i(s),st().then(u)):u())},invalidate(){f=!1},end(){r&&(l(),r=!1)}}}function bn(n,e,t){const s={direction:"out"};let i=e(n,t,s),r=!0,a;const o=M;o.r+=1;let c;function l(){const{delay:u=0,duration:f=300,easing:d=Qe,tick:y=B,css:h}=i||it;h&&(a=Ne(n,1,0,f,u,d,h));const m=Ge()+u,g=m+f;U(()=>G(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),et(w=>{if(r){if(w>=g)return y(0,1),G(n,!1,"end"),--o.r||Q(o.c),!1;if(w>=m){const b=d((w-m)/f);y(1-b,b)}}return r})}return ge(i)?st().then(()=>{i=i(s),l()}):l(),{end(u){u&&"inert"in n&&(n.inert=c),u&&i.tick&&i.tick(1,0),r&&(a&&xe(n,a),r=!1)}}}function yt(n,e,t,s){let r=e(n,t,{direction:"both"}),a=s?0:1,o=null,c=null,l=null,u;function f(){l&&xe(n,l)}function d(h,m){const g=h.b-a;return m*=Math.abs(g),{a,b:h.b,d:g,duration:m,start:h.start,end:h.start+m,group:h.group}}function y(h){const{delay:m=0,duration:g=300,easing:w=Qe,tick:b=B,css:S}=r||it,L={start:Ge()+m,b:h};h||(L.group=M,M.r+=1),"inert"in n&&(h?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),o||c?c=L:(S&&(f(),l=Ne(n,a,h,g,m,w,S)),h&&b(0,1),o=d(L,g),U(()=>G(n,h,"start")),et(T=>{if(c&&T>c.start&&(o=d(c,g),c=null,G(n,o.b,"start"),S&&(f(),l=Ne(n,a,o.b,o.duration,0,w,r.css))),o){if(T>=o.end)b(a=o.b,1-a),G(n,o.b,"end"),c||(o.b?f():--o.group.r||Q(o.group.c)),o=null;else if(T>=o.start){const ht=T-o.start;a=o.a+o.d*w(ht/o.duration),b(a,1-a)}}return!!(o||c)}))}return{run(h){ge(r)?st().then(()=>{r=r({direction:h?"in":"out"}),y(h)}):y(h)},end(){f(),o=c=null}}}function H(n){n&&n.c()}function V(n,e,t){const{fragment:s,after_update:i}=n.$$;s&&s.m(e,t),U(()=>{const r=n.$$.on_mount.map(Bt).filter(ge);n.$$.on_destroy?n.$$.on_destroy.push(...r):Q(r),n.$$.on_mount=[]}),i.forEach(U)}function q(n,e){const t=n.$$;t.fragment!==null&&(yn(t.after_update),Q(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function _n(n,e){n.$$.dirty[0]===-1&&(se.push(n),mn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function j(n,e,t,s,i,r,a=null,o=[-1]){const c=me;pe(n);const l=n.$$={fragment:null,ctx:[],props:r,update:B,not_equal:i,bound:pt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:pt(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};a&&a(l.root);let u=!1;if(l.ctx=t?t(n,e.props||{},(f,d,...y)=>{const h=y.length?y[0]:d;return l.ctx&&i(l.ctx[f],l.ctx[f]=h)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](h),u&&_n(n,f)),d}):[],l.update(),u=!0,Q(l.before_update),l.fragment=s?s(l.ctx):!1,e.target){if(e.hydrate){const f=ln(e.target);l.fragment&&l.fragment.l(f),f.forEach(E)}else l.fragment&&l.fragment.c();e.intro&&k(n.$$.fragment),V(n,e.target,e.anchor),Ft()}pe(c)}class Y{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){q(this,1),this.$destroy=B}$on(e,t){if(!ge(t))return B;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const i=s.indexOf(t);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!rn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const wn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wn);function vn(n){let e,t,s,i,r;const a=n[3].default,o=qe(a,n,n[2],null);return{c(){e=C("button"),o&&o.c(),p(e,"class",t="btn "+n[0]+" svelte-1utwdw0"),e.disabled=n[1]},m(c,l){O(c,e,l),o&&o.m(e,null),s=!0,i||(r=de(e,"click",n[4]),i=!0)},p(c,[l]){o&&o.p&&(!s||l&4)&&Me(o,a,c,c[2],s?Ie(a,c[2],l,null):Fe(c[2]),null),(!s||l&1&&t!==(t="btn "+c[0]+" svelte-1utwdw0"))&&p(e,"class",t),(!s||l&2)&&(e.disabled=c[1])},i(c){s||(k(o,c),s=!0)},o(c){A(o,c),s=!1},d(c){c&&E(e),o&&o.d(c),i=!1,r()}}}function kn(n,e,t){let{$$slots:s={},$$scope:i}=e,{btnType:r="terminal-option"}=e,{disabled:a=!1}=e;function o(c){Mt.call(this,n,c)}return n.$$set=c=>{"btnType"in c&&t(0,r=c.btnType),"disabled"in c&&t(1,a=c.disabled),"$$scope"in c&&t(2,i=c.$$scope)},[r,a,i,s,o]}class ot extends Y{constructor(e){super(),j(this,e,kn,vn,z,{btnType:0,disabled:1})}}function En(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function oe(n,{delay:e=0,duration:t=400,easing:s=En,amount:i=5,opacity:r=0}={}){const a=getComputedStyle(n),o=+a.opacity,c=a.filter==="none"?"":a.filter,l=o*(1-r),[u,f]=on(i);return{delay:e,duration:t,easing:s,css:(d,y)=>`opacity: ${o-l*y}; filter: ${c} blur(${y*u}${f});`}}const W=Object.create(null);W.open="0";W.close="1";W.ping="2";W.pong="3";W.message="4";W.upgrade="5";W.noop="6";const Ee=Object.create(null);Object.keys(W).forEach(n=>{Ee[W[n]]=n});const He={type:"error",data:"parser error"},Ut=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ht=typeof ArrayBuffer=="function",Wt=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,at=({type:n,data:e},t,s)=>Ut&&e instanceof Blob?t?s(e):bt(e,s):Ht&&(e instanceof ArrayBuffer||Wt(e))?t?s(e):bt(new Blob([e]),s):s(W[n]+(e||"")),bt=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function _t(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Le;function Tn(n,e){if(Ut&&n.data instanceof Blob)return n.data.arrayBuffer().then(_t).then(e);if(Ht&&(n.data instanceof ArrayBuffer||Wt(n.data)))return e(_t(n.data));at(n,!1,t=>{Le||(Le=new TextEncoder),e(Le.encode(t))})}const wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<wt.length;n++)he[wt.charCodeAt(n)]=n;const Cn=n=>{let e=n.length*.75,t=n.length,s,i=0,r,a,o,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(s=0;s<t;s+=4)r=he[n.charCodeAt(s)],a=he[n.charCodeAt(s+1)],o=he[n.charCodeAt(s+2)],c=he[n.charCodeAt(s+3)],u[i++]=r<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|c&63;return l},On=typeof ArrayBuffer=="function",ct=(n,e)=>{if(typeof n!="string")return{type:"message",data:zt(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Sn(n.substring(1),e)}:Ee[t]?n.length>1?{type:Ee[t],data:n.substring(1)}:{type:Ee[t]}:He},Sn=(n,e)=>{if(On){const t=Cn(n);return zt(t,e)}else return{base64:!0,data:n}},zt=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},jt="",An=(n,e)=>{const t=n.length,s=new Array(t);let i=0;n.forEach((r,a)=>{at(r,!1,o=>{s[a]=o,++i===t&&e(s.join(jt))})})},Nn=(n,e)=>{const t=n.split(jt),s=[];for(let i=0;i<t.length;i++){const r=ct(t[i],e);if(s.push(r),r.type==="error")break}return s};function xn(){return new TransformStream({transform(n,e){Tn(n,t=>{const s=t.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let $e;function be(n){return n.reduce((e,t)=>e+t.length,0)}function _e(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)t[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function Dn(n,e){$e||($e=new TextDecoder);const t=[];let s=0,i=-1,r=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(s===0){if(be(t)<1)break;const c=_e(t,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(be(t)<2)break;const c=_e(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(be(t)<8)break;const c=_e(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(He);break}i=u*Math.pow(2,32)+l.getUint32(4),s=3}else{if(be(t)<i)break;const c=_e(t,i);o.enqueue(ct(r?c:$e.decode(c),e)),s=0}if(i===0||i>n){o.enqueue(He);break}}}})}const Yt=4;function N(n){if(n)return Bn(n)}function Bn(n){for(var e in N.prototype)n[e]=N.prototype[e];return n}N.prototype.on=N.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};N.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};N.prototype.off=N.prototype.removeListener=N.prototype.removeAllListeners=N.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<t.length;i++)if(s=t[i],s===e||s.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};N.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,i=t.length;s<i;++s)t[s].apply(this,e)}return this};N.prototype.emitReserved=N.prototype.emit;N.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};N.prototype.hasListeners=function(n){return!!this.listeners(n).length};const De=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),P=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Rn="arraybuffer";function Kt(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const Pn=P.setTimeout,Ln=P.clearTimeout;function Be(n,e){e.useNativeTimers?(n.setTimeoutFn=Pn.bind(P),n.clearTimeoutFn=Ln.bind(P)):(n.setTimeoutFn=P.setTimeout.bind(P),n.clearTimeoutFn=P.clearTimeout.bind(P))}const $n=1.33;function Vn(n){return typeof n=="string"?qn(n):Math.ceil((n.byteLength||n.size)*$n)}function qn(n){let e=0,t=0;for(let s=0,i=n.length;s<i;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function Jt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function In(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Mn(n){let e={},t=n.split("&");for(let s=0,i=t.length;s<i;s++){let r=t[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Fn extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class lt extends N{constructor(e){super(),this.writable=!1,Be(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Fn(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ct(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=In(e);return t.length?"?"+t:""}}class Un extends lt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Nn(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,An(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Jt()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Xt=!1;try{Xt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hn=Xt;function Wn(){}class zn extends Un{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class F extends N{constructor(e,t,s){super(),this.createRequest=e,Be(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=Kt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=F.requestsCount++,F.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Wn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete F.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}F.requestsCount=0;F.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",vt);else if(typeof addEventListener=="function"){const n="onpagehide"in P?"pagehide":"unload";addEventListener(n,vt,!1)}}function vt(){for(let n in F.requests)F.requests.hasOwnProperty(n)&&F.requests[n].abort()}const jn=function(){const n=Qt({xdomain:!1});return n&&n.responseType!==null}();class Yn extends zn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=jn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new F(Qt,this.uri(),e)}}function Qt(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Hn))return new XMLHttpRequest}catch{}if(!e)try{return new P[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Gt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Kn extends lt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Gt?{}:Kt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;at(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&De(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Jt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ve=P.WebSocket||P.MozWebSocket;class Jn extends Kn{createSocket(e,t,s){return Gt?new Ve(e,t,s):t?new Ve(e,t):new Ve(e)}doWrite(e,t){this.ws.send(t)}}class Xn extends lt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Dn(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=xn();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:o,value:c})=>{o||(this.onPacket(c),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&De(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Qn={websocket:Jn,webtransport:Xn,polling:Yn},Gn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Zn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function We(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let i=Gn.exec(n||""),r={},a=14;for(;a--;)r[Zn[a]]=i[a]||"";return t!=-1&&s!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=es(r,r.path),r.queryKey=ts(r,r.query),r}function es(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ts(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(t[i]=r)}),t}const ze=typeof addEventListener=="function"&&typeof removeEventListener=="function",Te=[];ze&&addEventListener("offline",()=>{Te.forEach(n=>n())},!1);class X extends N{constructor(e,t){if(super(),this.binaryType=Rn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=We(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=We(t.host).host);Be(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Mn(this.opts.query)),ze&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Te.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Yt,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&X.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",X.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+=Vn(i)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,De(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if(typeof t=="function"&&(i=t,t=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(X.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ze&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Te.indexOf(this._offlineEventListener);s!==-1&&Te.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}X.protocol=Yt;class ns extends X{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;X.priorWebsocketSuccess=!1;const i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!s)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;X.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function r(){s||(s=!0,u(),t.close(),t=null)}const a=f=>{const d=new Error("probe error: "+f);d.transport=t.name,r(),this.emitReserved("upgradeError",d)};function o(){a("transport closed")}function c(){a("socket closed")}function l(f){t&&f.name!==t.name&&r()}const u=()=>{t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",o),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",a),t.once("close",o),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let ss=class extends ns{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Qn[i]).filter(i=>!!i)),super(e,s)}};function is(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=We(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+e,s.href=s.protocol+"://"+r+(t&&t.port===s.port?"":":"+s.port),s}const rs=typeof ArrayBuffer=="function",os=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Zt=Object.prototype.toString,as=typeof Blob=="function"||typeof Blob<"u"&&Zt.call(Blob)==="[object BlobConstructor]",cs=typeof File=="function"||typeof File<"u"&&Zt.call(File)==="[object FileConstructor]";function ut(n){return rs&&(n instanceof ArrayBuffer||os(n))||as&&n instanceof Blob||cs&&n instanceof File}function Ce(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(Ce(n[t]))return!0;return!1}if(ut(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Ce(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Ce(n[t]))return!0;return!1}function ls(n){const e=[],t=n.data,s=n;return s.data=je(t,e),s.attachments=e.length,{packet:s,buffers:e}}function je(n,e){if(!n)return n;if(ut(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=je(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=je(n[s],e));return t}return n}function us(n,e){return n.data=Ye(n.data,e),delete n.attachments,n}function Ye(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Ye(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Ye(n[t],e));return n}const fs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hs=5;var _;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(_||(_={}));class ps{constructor(e){this.replacer=e}encode(e){return(e.type===_.EVENT||e.type===_.ACK)&&Ce(e)?this.encodeAsBinary({type:e.type===_.EVENT?_.BINARY_EVENT:_.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===_.BINARY_EVENT||e.type===_.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ls(e),s=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(s),i}}function kt(n){return Object.prototype.toString.call(n)==="[object Object]"}class ft extends N{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===_.BINARY_EVENT;s||t.type===_.BINARY_ACK?(t.type=s?_.EVENT:_.ACK,this.reconstructor=new ds(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ut(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(_[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===_.BINARY_EVENT||s.type===_.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(r,t)}else s.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(ft.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case _.CONNECT:return kt(t);case _.DISCONNECT:return t===void 0;case _.CONNECT_ERROR:return typeof t=="string"||kt(t);case _.EVENT:case _.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&fs.indexOf(t[0])===-1);case _.ACK:case _.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ds{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=us(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ms=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ft,Encoder:ps,get PacketType(){return _},protocol:hs},Symbol.toStringTag,{value:"Module"}));function $(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const gs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class en extends N{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$(e,"open",this.onopen.bind(this)),$(e,"packet",this.onpacket.bind(this)),$(e,"error",this.onerror.bind(this)),$(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,r;if(gs.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:_.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,f=t.pop();this._registerAckCallback(u,f),a.id=u}const o=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(r),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((s,i)=>{const r=(a,o)=>a?i(a):s(o);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:_.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case _.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _.EVENT:case _.BINARY_EVENT:this.onevent(e);break;case _.ACK:case _.BINARY_ACK:this.onack(e);break;case _.DISCONNECT:this.ondisconnect();break;case _.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,t.packet({type:_.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function ce(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}ce.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};ce.prototype.reset=function(){this.attempts=0};ce.prototype.setMin=function(n){this.ms=n};ce.prototype.setMax=function(n){this.max=n};ce.prototype.setJitter=function(n){this.jitter=n};class Ke extends N{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Be(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ce({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||ms;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ss(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=$(t,"open",function(){s.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=$(t,"error",r);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($(e,"ping",this.onping.bind(this)),$(e,"data",this.ondata.bind(this)),$(e,"error",this.onerror.bind(this)),$(e,"close",this.onclose.bind(this)),$(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){De(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new en(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const fe={};function Oe(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=is(n,e.path||"/socket.io"),s=t.source,i=t.id,r=t.path,a=fe[i]&&r in fe[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new Ke(s,e):(fe[i]||(fe[i]=new Ke(s,e)),c=fe[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(Oe,{Manager:Ke,Socket:en,io:Oe,connect:Oe});const x=Oe("http://10.3.112.82:6912"),ne=[];function Re(n,e=B){let t;const s=new Set;function i(o){if(z(n,o)&&(n=o,t)){const c=!ne.length;for(const l of s)l[1](),ne.push(l,n);if(c){for(let l=0;l<ne.length;l+=2)ne[l][0](ne[l+1]);ne.length=0}}}function r(o){i(o(n))}function a(o,c=B){const l=[o,c];return s.add(l),s.size===1&&(t=e(i,r)||B),o(n),()=>{s.delete(l),s.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:a}}const Z=Re({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),ee=Re({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]});function ys(n){let e,t,s,i;return t=new si({props:{gameData:n[0],dialogueOptions:n[1],terminalColor:"grey"}}),{c(){e=C("div"),H(t.$$.fragment),p(e,"class","main-content svelte-abemhi")},m(r,a){O(r,e,a),V(t,e,null),i=!0},p(r,[a]){const o={};a&1&&(o.gameData=r[0]),a&2&&(o.dialogueOptions=r[1]),t.$set(o)},i(r){i||(k(t.$$.fragment,r),r&&(s||U(()=>{s=rt(e,oe,{}),s.start()})),i=!0)},o(r){A(t.$$.fragment,r),i=!1},d(r){r&&E(e),q(t)}}}function bs(n,e,t){let s,i;J(n,ee,o=>t(2,s=o)),J(n,Z,o=>t(3,i=o));let r={playingAs:"",bothPlayersJoined:!1,chapter5NumOfReadyPlayers:0,chapter11NumOfReadyPlayers:0},a={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1};return nt(()=>{x.on("connect",()=>{x.emit("frontend-mounted"),console.log(`User ID: ${x.id} connected!`)}),x.on("playing-as",o=>{x.id===o.socketID&&o.playerCount===1&&t(0,r.playingAs="male",r),x.id===o.socketID&&o.playerCount===2&&t(0,r.playingAs="female",r),console.log("Playing as "+r.playingAs),console.log("Socket.id = "+x.id),console.log("data.socketID = "+o.socketID)}),x.on("connect_error",o=>console.error("Connection error:",o)),x.on("p2-joined",()=>t(0,r.bothPlayersJoined=!0,r)),x.on("set-users",o=>{Object.entries(o).forEach(([c,l])=>{Z.update(u=>(u.id=o.p1,u)),ee.update(u=>(u.id=o.p2,u))})}),x.on("5-player-ready",()=>{t(0,r.chapter5NumOfReadyPlayers+=1,r),r.chapter5NumOfReadyPlayers===2&&t(1,a={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("11-player-ready",()=>{t(0,r.chapter11NumOfReadyPlayers+=1,r),r.chapter11NumOfReadyPlayers===2&&t(1,a={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("set-male-player-name",o=>Z.set({...i,name:o||"Peasant Boy"})),x.on("set-female-player-name",o=>ee.set({...s,name:o||"Peasant Girl"})),x.emit("client-ready")}),[r,a]}class _s extends Y{constructor(e){super(),j(this,e,bs,ys,z,{})}}function ws(n){let e,t,s,i,r,a,o;return t=new Js({props:{sidebarExpanded:n[0]}}),t.$on("select",n[1]),t.$on("toggle-sidebar",n[2]),r=new _s({}),{c(){e=C("div"),H(t.$$.fragment),s=I(),i=C("div"),H(r.$$.fragment),p(i,"class","screen svelte-kvlyqv"),p(e,"class","client svelte-kvlyqv"),K(e,"client-collapsed",!n[0])},m(c,l){O(c,e,l),V(t,e,null),v(e,s),v(e,i),V(r,i,null),o=!0},p(c,[l]){const u={};l&1&&(u.sidebarExpanded=c[0]),t.$set(u),(!o||l&1)&&K(e,"client-collapsed",!c[0])},i(c){o||(k(t.$$.fragment,c),k(r.$$.fragment,c),c&&(a||U(()=>{a=rt(e,oe,{duration:2e3}),a.start()})),o=!0)},o(c){A(t.$$.fragment,c),A(r.$$.fragment,c),o=!1},d(c){c&&E(e),q(t),q(r)}}}function vs(n,e,t){let s=!1;function i(a){a.detail}return[s,i,()=>t(0,s=!s)]}class ks extends Y{constructor(e){super(),j(this,e,vs,ws,z,{})}}function Es(n){let e,t;return{c(){e=C("div"),p(e,"class",t="dice dice-d"+n[0].numOfSides+" svelte-w3nifx"),p(e,"role","img"),p(e,"aria-label","One 4-sided dice")},m(s,i){O(s,e,i)},p(s,[i]){i&1&&t!==(t="dice dice-d"+s[0].numOfSides+" svelte-w3nifx")&&p(e,"class",t)},i:B,o:B,d(s){s&&E(e)}}}function Ts(n,e,t){let{dice:s}=e;return n.$$set=i=>{"dice"in i&&t(0,s=i.dice)},[s]}class Cs extends Y{constructor(e){super(),j(this,e,Ts,Es,z,{dice:0})}}function Je(){return Je=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Je.apply(this,arguments)}var Os={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,e){},onStringTyped:function(n,e){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,e){},onTypingResumed:function(n,e){},onReset:function(n){},onStop:function(n,e){},onStart:function(n,e){},onDestroy:function(n){}},Ss=new(function(){function n(){}var e=n.prototype;return e.load=function(t,s,i){if(t.el=typeof i=="string"?document.querySelector(i):i,t.options=Je({},Os,s),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(l){return l.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),a=r.length;if(a)for(var o=0;o<a;o+=1)t.strings.push(r[o].innerHTML.trim())}for(var c in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[c]=c;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var s="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(t){var s="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},n}()),Et=new(function(){function n(){}var e=n.prototype;return e.typeHtmlChars=function(t,s,i){if(i.contentType!=="html")return s;var r=t.substring(s).charAt(0);if(r==="<"||r==="&"){var a;for(a=r==="<"?">":";";t.substring(s+1).charAt(0)!==a&&!(1+ ++s>t.length););s++}return s},e.backSpaceHtmlChars=function(t,s,i){if(i.contentType!=="html")return s;var r=t.substring(s).charAt(0);if(r===">"||r===";"){var a;for(a=r===">"?"<":"&";t.substring(s-1).charAt(0)!==a&&!(--s<0););s--}return s},n}()),Xe=function(){function n(t,s){Ss.load(this,s,t),this.begin()}var e=n.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,s){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),a=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=Et.typeHtmlChars(t,s,i);var o=0,c=t.substring(s);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,o=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),t=t.substring(0,s)+t.substring(s+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;t.substring(s+a).charAt(0)!=="`"&&(a++,!(s+a>t.length)););var u=t.substring(0,s),f=t.substring(u.length+1,s+a),d=t.substring(s+a+1);t=u+f+d,a--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),s>=t.length?i.doneTyping(t,s):i.keepTyping(t,s,a),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},o)},r):this.setPauseStatus(t,s,!0)},e.keepTyping=function(t,s,i){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,s+=i);this.replaceText(r),this.typewrite(t,s)},e.doneTyping=function(t,s){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(t,s)},this.backDelay))},e.backspace=function(t,s){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=Et.backSpaceHtmlChars(t,s,i);var a=t.substring(0,s);if(i.replaceText(a),i.smartBackspace){var o=i.strings[i.arrayPos+1];i.stopNum=o&&a===o.substring(0,s)?s:0}s>i.stopNum?(s--,i.backspace(t,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},r)}else this.setPauseStatus(t,s,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,s,i){this.pause.typewrite=i,this.pause.curString=t,this.pause.curStrPos=s},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(s){t.stop()}),this.el.addEventListener("blur",function(s){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();const As=Re("lobby"),R=Re("1");function Ns(n,e,t=0){let s={};if(n==="lobby")switch(e){case"1":R.set("2"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"2":R.set("3"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0};break;case"3":case"3-again":R.set("4"),s={option1Visible:!0,option1Disabled:!1,option1:"Yes",option2Visible:!0,option2Disabled:!1,option2:"No",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"4":t===1?(R.set("5"),x.emit("5-player-ready"),s={option1Visible:!0,option1Disabled:!0,option1:"Waiting",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1}):t===2&&(R.set("3-again"),s={option1Visible:!0,option1Disabled:!1,option1:"Next But For Real This Time",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0});break;case"5":R.set("6"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"6":R.set("7"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"7":R.set("8"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"8":R.set("9"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"9":R.set("10"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"10":R.set("11"),x.emit("11-player-ready"),s={option1Visible:!0,option1Disabled:!0,option1:"Waiting for your dead weight teammate",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"11":R.set("12"),s={option1Visible:!0,option1Disabled:!0,option1:"Disabled During Demo",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break}return s}function Tt(n={player:{}}){n.optionSelected=n.optionSelected??0;let e=["Something went wrong... This text should not display."];if(n.chapter==="lobby")switch(n.part){case"1":e=["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."];break;case"2":e=["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"];break;case"3":e=["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."];break;case"3-again":e=["Oh good, I was hoping I didn't hear that correctly. What did you say your name actually was?"];break;case"4":e=[`You're name is... ${n.player.name}?`];break;case"5":e=["Great! Not the name of course, the fact that you're ready. When both of you are ready the button below will say 'Next', that means you're both ready to move forward."];break;case"6":e=[`Good, now let me introduce the two of you to each other. First we have ${ye(Z).name}${ye(Z).id===n.player.id?"(you)":""} playing as the male character. Next, we have ${ye(ee).name}${ye(ee).id===n.player.id?"(you)":""} playing as the female role.`];break;case"7":e=["Next, I'll explain the mechanics of the game. This game is more like an interactive multiplayer story with some DND elements. The only actions you'll be performing are selecting answers below (like 'Next') and rolling dice to decide outcomes. Select 'Next' to learn how dice rolling works."];break;case"8":e=["Each player controls a unique character, these characters have different stats.",`For instance these are your character stats:
          <br> Name: ${n.player.name}
          <br> Gender: ${n.player.gender}
          <br> Health: ${n.player.stats.maxHealth}
          <br> Strength: ${n.player.stats.strength}
          <br> Defense: ${n.player.stats.defense}
          <br> Speed: ${n.player.stats.speed}
          <br> Intellect: ${n.player.stats.intellect}
          <br> Charisma: ${n.player.stats.charisma}
          `];break;case"9":e=["These stats play a crucial role when it comes to events. Events are things that happen that require dice rolls or decisions to be made. For example, someone blocks your path and you need to roll for charisma. You need to push a heavy box so you roll for strength. Something falls on you so you roll for defense."];break;case"10":e=["When you roll, your base stat is added to the dice roll and that final number determines the outcome of the situation. If you're charisma is too low, you won't convince the person. Strength too low means you can't push that box. If your defense is too low you your health stat will suffer when something hurts you."];break;case"11":e=["When you're both ready, we'll move on and practice some dice rolls so you grasp the core mechanics of the game."];break;case"12":e=[""];break}return e}function xs(n={player:{}}){const e=n.player.stats[n.stat],t=n.dice.roll(),s=e+t;return[`You rolled a <span class="color-green">${t}</span>, your base stat is <span class="color-green">${e}</span> for a total of <span class="color-green stat-roll-result">${s}</span>.`]}function Ds(n){let e,t,s,i,r,a;return s=new Cs({props:{dice:n[0]}}),{c(){e=C("div"),t=C("div"),H(s.$$.fragment),i=I(),r=C("p"),p(t,"class","dice-wrapper svelte-1p1ivjc"),p(r,"id","dice-terminal-text"),p(e,"class","dice-screen svelte-1p1ivjc")},m(o,c){O(o,e,c),v(e,t),V(s,t,null),v(e,i),v(e,r),r.innerHTML=n[1],a=!0},p(o,[c]){const l={};c&1&&(l.dice=o[0]),s.$set(l)},i(o){a||(k(s.$$.fragment,o),a=!0)},o(o){A(s.$$.fragment,o),a=!1},d(o){o&&E(e),q(s)}}}function Bs(n,e,t){let s,i;J(n,ee,l=>t(4,s=l)),J(n,Z,l=>t(5,i=l));let{dice:r}=e,{gameData:a}=e,o=xs({player:c(),dice:r,stat:"health"});nt(()=>{new Xe("#dice-terminal-text",{strings:o,typeSpeed:20,backSpeed:10,backDelay:2e3})});function c(){return a.playingAs==="male"?i:s}return n.$$set=l=>{"dice"in l&&t(0,r=l.dice),"gameData"in l&&t(2,a=l.gameData)},[r,o,a]}class Rs extends Y{constructor(e){super(),j(this,e,Bs,Ds,z,{dice:0,gameData:2})}}const Ps=n=>({}),Ct=n=>({}),Ls=n=>({}),Ot=n=>({});function $s(n){let e,t,s,i;return{c(){e=D("svg"),t=D("circle"),s=D("path"),i=D("path"),p(t,"cx","12"),p(t,"cy","12"),p(t,"r","10"),p(s,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),p(i,"d","M12 17h.01"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(r,a){O(r,e,a),v(e,t),v(e,s),v(e,i)},d(r){r&&E(e)}}}function Vs(n){let e,t,s;return{c(){e=D("svg"),t=D("polyline"),s=D("line"),p(t,"points","4 17 10 11 4 5"),p(s,"x1","12"),p(s,"x2","20"),p(s,"y1","19"),p(s,"y2","19"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(i,r){O(i,e,r),v(e,t),v(e,s)},d(i){i&&E(e)}}}function qs(n){let e,t,s;return{c(){e=D("svg"),t=D("path"),s=D("circle"),p(t,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),p(s,"cx","12"),p(s,"cy","7"),p(s,"r","4"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(i,r){O(i,e,r),v(e,t),v(e,s)},d(i){i&&E(e)}}}function Is(n){let e,t,s;return{c(){e=D("svg"),t=D("path"),s=D("path"),p(t,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),p(s,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(i,r){O(i,e,r),v(e,t),v(e,s)},d(i){i&&E(e)}}}function St(n){let e,t,s,i,r,a,o;const c=n[4].title,l=qe(c,n,n[3],Ot),u=l||Ms(),f=n[4].description,d=qe(f,n,n[3],Ct),y=d||Fs();return{c(){e=C("div"),t=C("h2"),u&&u.c(),s=I(),i=C("p"),y&&y.c(),p(t,"class","item-title svelte-16xfpde"),p(i,"class","item-text svelte-16xfpde"),p(e,"class","item-text-wrapper svelte-16xfpde")},m(h,m){O(h,e,m),v(e,t),u&&u.m(t,null),v(e,s),v(e,i),y&&y.m(i,null),o=!0},p(h,m){l&&l.p&&(!o||m&8)&&Me(l,c,h,h[3],o?Ie(c,h[3],m,Ls):Fe(h[3]),Ot),d&&d.p&&(!o||m&8)&&Me(d,f,h,h[3],o?Ie(f,h[3],m,Ps):Fe(h[3]),Ct)},i(h){o||(k(u,h),k(y,h),h&&U(()=>{o&&(a&&a.end(1),r=rt(e,oe,{duration:500}),r.start())}),o=!0)},o(h){A(u,h),A(y,h),r&&r.invalidate(),h&&(a=bn(e,oe,{duration:250})),o=!1},d(h){h&&E(e),u&&u.d(h),y&&y.d(h),h&&a&&a.end()}}}function Ms(n){let e;return{c(){e=ae("Title")},m(t,s){O(t,e,s)},d(t){t&&E(e)}}}function Fs(n){let e;return{c(){e=ae("Brief description")},m(t,s){O(t,e,s)},d(t){t&&E(e)}}}function Us(n){let e,t,s,i,r,a;function o(f,d){return f[0]==="seed"?Is:f[0]==="player"?qs:f[0]==="terminal"?Vs:$s}let c=o(n),l=c(n),u=!n[2]&&St(n);return{c(){e=C("div"),l.c(),t=I(),u&&u.c(),p(e,"class",s="item item-color__"+n[1]+" svelte-16xfpde")},m(f,d){O(f,e,d),l.m(e,null),v(e,t),u&&u.m(e,null),i=!0,r||(a=de(e,"click",n[5]),r=!0)},p(f,[d]){c!==(c=o(f))&&(l.d(1),l=c(f),l&&(l.c(),l.m(e,t))),f[2]?u&&(ve(),A(u,1,1,()=>{u=null}),ke()):u?(u.p(f,d),d&4&&k(u,1)):(u=St(f),u.c(),k(u,1),u.m(e,null)),(!i||d&2&&s!==(s="item item-color__"+f[1]+" svelte-16xfpde"))&&p(e,"class",s)},i(f){i||(k(u),i=!0)},o(f){A(u),i=!1},d(f){f&&E(e),l.d(),u&&u.d(),r=!1,a()}}}function Hs(n,e,t){let{$$slots:s={},$$scope:i}=e,{iconType:r="unkown"}=e,{color:a="grey"}=e,{collapsed:o=!1}=e;function c(l){Mt.call(this,n,l)}return n.$$set=l=>{"iconType"in l&&t(0,r=l.iconType),"color"in l&&t(1,a=l.color),"collapsed"in l&&t(2,o=l.collapsed),"$$scope"in l&&t(3,i=l.$$scope)},[r,a,o,i,s,c]}class Ws extends Y{constructor(e){super(),j(this,e,Hs,Us,z,{iconType:0,color:1,collapsed:2})}}function zs(n){let e;return{c(){e=C("span"),e.textContent="Log",p(e,"slot","title")},m(t,s){O(t,e,s)},p:B,d(t){t&&E(e)}}}function js(n){let e;return{c(){e=C("span"),e.textContent="View logged messages",p(e,"slot","description")},m(t,s){O(t,e,s)},p:B,d(t){t&&E(e)}}}function Ys(n){let e,t,s,i,r,a,o,c,l;return a=new Ws({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[js],title:[zs]},$$scope:{ctx:n}}}),a.$on("click",n[3]),{c(){e=C("div"),t=D("svg"),s=D("path"),i=D("path"),r=I(),H(a.$$.fragment),p(s,"d","M19 15V9"),p(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),p(t,"class","icon collapse-icon svelte-1tpwflx"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"viewBox","0 0 24 24"),K(t,"rotate",!n[0]),p(e,"class","sidebar svelte-1tpwflx"),K(e,"sidebar-collapsed",!n[0]),K(e,"sidebar-expanded",n[0])},m(u,f){O(u,e,f),v(e,t),v(t,s),v(t,i),v(e,r),V(a,e,null),o=!0,c||(l=de(t,"click",n[2]),c=!0)},p(u,[f]){(!o||f&1)&&K(t,"rotate",!u[0]);const d={};f&1&&(d.collapsed=!u[0]),f&16&&(d.$$scope={dirty:f,ctx:u}),a.$set(d),(!o||f&1)&&K(e,"sidebar-collapsed",!u[0]),(!o||f&1)&&K(e,"sidebar-expanded",u[0])},i(u){o||(k(a.$$.fragment,u),o=!0)},o(u){A(a.$$.fragment,u),o=!1},d(u){u&&E(e),q(a),c=!1,l()}}}function Ks(n,e,t){let{sidebarExpanded:s=!0}=e;const i=pn(),r=()=>i("toggle-sidebar"),a=()=>i("select","log");return n.$$set=o=>{"sidebarExpanded"in o&&t(0,s=o.sidebarExpanded)},[s,i,r,a]}class Js extends Y{constructor(e){super(),j(this,e,Ks,Ys,z,{sidebarExpanded:0})}}class Xs{constructor(e,t){le(this,"numOfSides");le(this,"imgUrl");this.numOfSides=e,this.imgUrl=t}roll(){return Math.ceil(Math.random()*this.numOfSides)}}let Qs=new Xs(8,"d8-dice.png");function At(n){let e,t;return e=new ot({props:{btnType:"terminal-option",disabled:n[0].option1Disabled,$$slots:{default:[Gs]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){H(e.$$.fragment)},m(s,i){V(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.disabled=s[0].option1Disabled),i&262145&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function Gs(n){let e=n[0].option1+"",t;return{c(){t=ae(e)},m(s,i){O(s,t,i)},p(s,i){i&1&&e!==(e=s[0].option1+"")&&tt(t,e)},d(s){s&&E(t)}}}function Nt(n){let e,t;return e=new ot({props:{btnType:"terminal-option",disabled:n[0].option2Disabled,$$slots:{default:[Zs]},$$scope:{ctx:n}}}),e.$on("click",n[10]),{c(){H(e.$$.fragment)},m(s,i){V(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.disabled=s[0].option2Disabled),i&262145&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function Zs(n){let e=n[0].option2+"",t;return{c(){t=ae(e)},m(s,i){O(s,t,i)},p(s,i){i&1&&e!==(e=s[0].option2+"")&&tt(t,e)},d(s){s&&E(t)}}}function xt(n){let e,t;return e=new ot({props:{btnType:"terminal-option",disabled:n[0].option3Disabled,$$slots:{default:[ei]},$$scope:{ctx:n}}}),e.$on("click",n[11]),{c(){H(e.$$.fragment)},m(s,i){V(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.disabled=s[0].option3Disabled),i&262145&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function ei(n){let e=n[0].option3+"",t;return{c(){t=ae(e)},m(s,i){O(s,t,i)},p(s,i){i&1&&e!==(e=s[0].option3+"")&&tt(t,e)},d(s){s&&E(t)}}}function Dt(n){let e,t,s;return{c(){e=C("input"),p(e,"type","text"),p(e,"maxlength","20"),p(e,"class","terminal-input svelte-f49isc")},m(i,r){O(i,e,r),dt(e,n[3]),t||(s=[de(e,"input",n[12]),de(e,"input",n[6])],t=!0)},p(i,r){r&8&&e.value!==i[3]&&dt(e,i[3])},d(i){i&&E(e),t=!1,Q(s)}}}function ti(n){let e,t,s,i,r,a,o,c,l,u,f,d,y;r=new Rs({props:{gameData:n[2],dice:n[4]}});let h=n[0].option1Visible&&At(n),m=n[0].option2Visible&&Nt(n),g=n[0].option3Visible&&xt(n),w=n[0].inputVisible&&Dt(n);return{c(){e=C("div"),t=C("div"),s=C("p"),i=I(),H(r.$$.fragment),a=I(),o=C("div"),h&&h.c(),c=I(),m&&m.c(),l=I(),g&&g.c(),u=I(),w&&w.c(),p(s,"id","terminal-text"),p(s,"class","svelte-f49isc"),p(t,"class","terminal-screen svelte-f49isc"),p(o,"class","terminal-option-flex-group"),p(e,"class",f="terminal terminal__"+n[1]+" svelte-f49isc")},m(b,S){O(b,e,S),v(e,t),v(t,s),v(t,i),V(r,t,null),v(e,a),v(e,o),h&&h.m(o,null),v(o,c),m&&m.m(o,null),v(o,l),g&&g.m(o,null),v(o,u),w&&w.m(o,null),y=!0},p(b,[S]){const L={};S&4&&(L.gameData=b[2]),r.$set(L),b[0].option1Visible?h?(h.p(b,S),S&1&&k(h,1)):(h=At(b),h.c(),k(h,1),h.m(o,c)):h&&(ve(),A(h,1,1,()=>{h=null}),ke()),b[0].option2Visible?m?(m.p(b,S),S&1&&k(m,1)):(m=Nt(b),m.c(),k(m,1),m.m(o,l)):m&&(ve(),A(m,1,1,()=>{m=null}),ke()),b[0].option3Visible?g?(g.p(b,S),S&1&&k(g,1)):(g=xt(b),g.c(),k(g,1),g.m(o,u)):g&&(ve(),A(g,1,1,()=>{g=null}),ke()),b[0].inputVisible?w?w.p(b,S):(w=Dt(b),w.c(),w.m(o,null)):w&&(w.d(1),w=null),(!y||S&2&&f!==(f="terminal terminal__"+b[1]+" svelte-f49isc"))&&p(e,"class",f)},i(b){y||(k(r.$$.fragment,b),k(h),k(m),k(g),b&&U(()=>{y&&(d||(d=yt(e,oe,{duration:1e3},!0)),d.run(1))}),y=!0)},o(b){A(r.$$.fragment,b),A(h),A(m),A(g),b&&(d||(d=yt(e,oe,{duration:1e3},!1)),d.run(0)),y=!1},d(b){b&&E(e),q(r),h&&h.d(),m&&m.d(),g&&g.d(),w&&w.d(),b&&d&&d.end()}}}function ni(n,e,t){let s,i,r,a;J(n,R,T=>t(7,s=T)),J(n,As,T=>t(8,i=T)),J(n,ee,T=>t(14,r=T)),J(n,Z,T=>t(15,a=T));let{terminalColor:o="grey"}=e,{gameData:c}=e,{dialogueOptions:l}=e,u,f="",d=Tt({chapter:i,part:s,player:m()}),y=Qs;nt(()=>{u=new Xe("#terminal-text",{strings:d,typeSpeed:20})});function h(T,ht=!1){t(0,l=Ns(i,s,T)),u.destroy(),u=new Xe("#terminal-text",{strings:Tt({chapter:i,part:s,player:m(),optionSelected:T}),typeSpeed:20,backSpeed:10,backDelay:2e3})}function m(){return c.playingAs==="male"?a:r}function g(){(i==="lobby"&&s==="3"||s==="3-again")&&(c.playingAs==="male"?x.emit("set-male-player-name",f.trim()):x.emit("set-female-player-name",f.trim()))}const w=()=>h(1),b=()=>h(2),S=()=>h(3);function L(){f=this.value,t(3,f)}return n.$$set=T=>{"terminalColor"in T&&t(1,o=T.terminalColor),"gameData"in T&&t(2,c=T.gameData),"dialogueOptions"in T&&t(0,l=T.dialogueOptions)},n.$$.update=()=>{n.$$.dirty&388&&c.bothPlayersJoined&&i==="lobby"&&s==="1"&&(t(0,l.option1Disabled=!1,l),t(0,l.option1="Ready",l)),n.$$.dirty&388&&c.goToChapter6&&i==="lobby"&&s==="5"&&h(0)},[l,o,c,f,y,h,g,s,i,w,b,S,L]}class si extends Y{constructor(e){super(),j(this,e,ni,ti,z,{terminalColor:1,gameData:2,dialogueOptions:0})}}function ii(n){let e,t,s;return t=new ks({}),{c(){e=C("main"),H(t.$$.fragment),p(e,"class","main-content svelte-kn45eq")},m(i,r){O(i,e,r),V(t,e,null),s=!0},p:B,i(i){s||(k(t.$$.fragment,i),s=!0)},o(i){A(t.$$.fragment,i),s=!1},d(i){i&&E(e),q(t)}}}class ri extends Y{constructor(e){super(),j(this,e,null,ii,z,{})}}new ri({target:document.getElementById("app")});
