var Ze=Object.defineProperty;var tn=(n,t,e)=>t in n?Ze(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var d=(n,t,e)=>tn(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function A(){}const zt=n=>n;function en(n,t){for(const e in t)n[e]=t[e];return n}function Re(n){return n()}function ce(){return Object.create(null)}function z(n){n.forEach(Re)}function lt(n){return typeof n=="function"}function U(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function nn(n){return Object.keys(n).length===0}function sn(n,...t){if(n==null){for(const s of t)s(void 0);return A}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function vt(n,t,e){n.$$.on_destroy.push(sn(t,e))}function Pt(n,t,e,s){if(n){const i=Be(n,t,e,s);return n[0](i)}}function Be(n,t,e,s){return n[1]&&s?en(e.ctx.slice(),n[1](s(t))):e.ctx}function $t(n,t,e,s){if(n[2]&&s){const i=n[2](s(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|i[a];return r}return t.dirty|i}return t.dirty}function Lt(n,t,e,s,i,r){if(i){const o=Be(t,e,s,r);n.p(o,i)}}function It(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function rn(n){const t=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[n,"px"]}const Ne=typeof window<"u";let Gt=Ne?()=>window.performance.now():()=>Date.now(),Kt=Ne?n=>requestAnimationFrame(n):A;const Z=new Set;function De(n){Z.forEach(t=>{t.c(n)||(Z.delete(t),t.f())}),Z.size!==0&&Kt(De)}function jt(n){let t;return Z.size===0&&Kt(De),{promise:new Promise(e=>{Z.add(t={c:n,f:e})}),abort(){Z.delete(t)}}}function b(n,t){n.appendChild(t)}function Pe(n){if(!n)return document;const t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function on(n){const t=x("style");return t.textContent="/* empty */",an(Pe(n),t),t.sheet}function an(n,t){return b(n.head||n,t),t.sheet}function S(n,t,e){n.insertBefore(t,e||null)}function v(n){n.parentNode&&n.parentNode.removeChild(n)}function x(n){return document.createElement(n)}function T(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function nt(n){return document.createTextNode(n)}function W(){return nt(" ")}function Jt(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function m(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function cn(n){return Array.from(n.childNodes)}function Xt(n,t){t=""+t,n.data!==t&&(n.data=t)}function M(n,t,e){n.classList.toggle(t,!!e)}function $e(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}const kt=new Map;let Et=0;function ln(n){let t=5381,e=n.length;for(;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function un(n,t){const e={stylesheet:on(t),rules:{}};return kt.set(n,e),e}function St(n,t,e,s,i,r,o,a=0){const c=16.666/s;let l=`{
`;for(let C=0;C<=1;C+=c){const O=t+(e-t)*r(C);l+=C*100+`%{${o(O,1-O)}}
`}const u=l+`100% {${o(e,1-e)}}
}`,h=`__svelte_${ln(u)}_${a}`,p=Pe(n),{stylesheet:g,rules:f}=kt.get(p)||un(p,n);f[h]||(f[h]=!0,g.insertRule(`@keyframes ${h} ${u}`,g.cssRules.length));const _=n.style.animation||"";return n.style.animation=`${_?`${_}, `:""}${h} ${s}ms linear ${i}ms 1 both`,Et+=1,h}function Ct(n,t){const e=(n.style.animation||"").split(", "),s=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=e.length-s.length;i&&(n.style.animation=s.join(", "),Et-=i,Et||hn())}function hn(){Kt(()=>{Et||(kt.forEach(n=>{const{ownerNode:t}=n.stylesheet;t&&v(t)}),kt.clear())})}let ct;function at(n){ct=n}function Le(){if(!ct)throw new Error("Function called outside component initialization");return ct}function Qt(n){Le().$$.on_mount.push(n)}function fn(){const n=Le();return(t,e,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[t];if(i){const r=$e(t,e,{cancelable:s});return i.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function Ie(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const Q=[],le=[];let tt=[];const ue=[],pn=Promise.resolve();let qt=!1;function dn(){qt||(qt=!0,pn.then(qe))}function P(n){tt.push(n)}const At=new Set;let J=0;function qe(){if(J!==0)return;const n=ct;do{try{for(;J<Q.length;){const t=Q[J];J++,at(t),mn(t.$$)}}catch(t){throw Q.length=0,J=0,t}for(at(null),Q.length=0,J=0;le.length;)le.pop()();for(let t=0;t<tt.length;t+=1){const e=tt[t];At.has(e)||(At.add(e),e())}tt.length=0}while(Q.length);for(;ue.length;)ue.pop()();qt=!1,At.clear(),at(n)}function mn(n){if(n.fragment!==null){n.update(),z(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(P)}}function gn(n){const t=[],e=[];tt.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),tt=t}let it;function Zt(){return it||(it=Promise.resolve(),it.then(()=>{it=null})),it}function Y(n,t,e){n.dispatchEvent($e(`${t?"intro":"outro"}${e}`))}const dt=new Set;let N;function mt(){N={r:0,c:[],p:N}}function gt(){N.r||z(N.c),N=N.p}function w(n,t){n&&n.i&&(dt.delete(n),n.i(t))}function E(n,t,e,s){if(n&&n.o){if(dt.has(n))return;dt.add(n),N.c.push(()=>{dt.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}else s&&s()}const te={duration:0};function ee(n,t,e){const s={direction:"in"};let i=t(n,e,s),r=!1,o,a,c=0;function l(){o&&Ct(n,o)}function u(){const{delay:p=0,duration:g=300,easing:f=zt,tick:_=A,css:C}=i||te;C&&(o=St(n,0,1,g,p,f,C,c++)),_(0,1);const O=Gt()+p,q=O+g;a&&a.abort(),r=!0,P(()=>Y(n,!0,"start")),a=jt(H=>{if(r){if(H>=q)return _(1,0),Y(n,!0,"end"),l(),r=!1;if(H>=O){const j=f((H-O)/g);_(j,1-j)}}return r})}let h=!1;return{start(){h||(h=!0,Ct(n),lt(i)?(i=i(s),Zt().then(u)):u())},invalidate(){h=!1},end(){r&&(l(),r=!1)}}}function yn(n,t,e){const s={direction:"out"};let i=t(n,e,s),r=!0,o;const a=N;a.r+=1;let c;function l(){const{delay:u=0,duration:h=300,easing:p=zt,tick:g=A,css:f}=i||te;f&&(o=St(n,1,0,h,u,p,f));const _=Gt()+u,C=_+h;P(()=>Y(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),jt(O=>{if(r){if(O>=C)return g(0,1),Y(n,!1,"end"),--a.r||z(a.c),!1;if(O>=_){const q=p((O-_)/h);g(1-q,q)}}return r})}return lt(i)?Zt().then(()=>{i=i(s),l()}):l(),{end(u){u&&"inert"in n&&(n.inert=c),u&&i.tick&&i.tick(1,0),r&&(o&&Ct(n,o),r=!1)}}}function he(n,t,e,s){let r=t(n,e,{direction:"both"}),o=s?0:1,a=null,c=null,l=null,u;function h(){l&&Ct(n,l)}function p(f,_){const C=f.b-o;return _*=Math.abs(C),{a:o,b:f.b,d:C,duration:_,start:f.start,end:f.start+_,group:f.group}}function g(f){const{delay:_=0,duration:C=300,easing:O=zt,tick:q=A,css:H}=r||te,j={start:Gt()+_,b:f};f||(j.group=N,N.r+=1),"inert"in n&&(f?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),a||c?c=j:(H&&(h(),l=St(n,o,f,C,_,O,H)),f&&q(0,1),a=p(j,C),P(()=>Y(n,f,"start")),jt(ht=>{if(c&&ht>c.start&&(a=p(c,C),c=null,Y(n,a.b,"start"),H&&(h(),l=St(n,o,a.b,a.duration,0,O,r.css))),a){if(ht>=a.end)q(o=a.b,1-o),Y(n,a.b,"end"),c||(a.b?h():--a.group.r||z(a.group.c)),a=null;else if(ht>=a.start){const Qe=ht-a.start;o=a.a+a.d*O(Qe/a.duration),q(o,1-o)}}return!!(a||c)}))}return{run(f){lt(r)?Zt().then(()=>{r=r({direction:f?"in":"out"}),g(f)}):g(f)},end(){h(),a=c=null}}}function F(n){n&&n.c()}function L(n,t,e){const{fragment:s,after_update:i}=n.$$;s&&s.m(t,e),P(()=>{const r=n.$$.on_mount.map(Re).filter(lt);n.$$.on_destroy?n.$$.on_destroy.push(...r):z(r),n.$$.on_mount=[]}),i.forEach(P)}function I(n,t){const e=n.$$;e.fragment!==null&&(gn(e.after_update),z(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function _n(n,t){n.$$.dirty[0]===-1&&(Q.push(n),dn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function G(n,t,e,s,i,r,o=null,a=[-1]){const c=ct;at(n);const l=n.$$={fragment:null,ctx:[],props:r,update:A,not_equal:i,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ce(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=e?e(n,t.props||{},(h,p,...g)=>{const f=g.length?g[0]:p;return l.ctx&&i(l.ctx[h],l.ctx[h]=f)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](f),u&&_n(n,h)),p}):[],l.update(),u=!0,z(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const h=cn(t.target);l.fragment&&l.fragment.l(h),h.forEach(v)}else l.fragment&&l.fragment.c();t.intro&&w(n.$$.fragment),L(n,t.target,t.anchor),qe()}at(c)}class K{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){I(this,1),this.$destroy=A}$on(t,e){if(!lt(e))return A;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const i=s.indexOf(e);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!nn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const bn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bn);function wn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function et(n,{delay:t=0,duration:e=400,easing:s=wn,amount:i=5,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-r),[u,h]=rn(i);return{delay:t,duration:e,easing:s,css:(p,g)=>`opacity: ${a-l*g}; filter: ${c} blur(${g*u}${h});`}}class vn{constructor(t){d(this,"id",0);d(this,"playerName","Player");d(this,"playerLevel",1);d(this,"playerExp",0);d(this,"playerInventory",[new En({})]);this.id=t.id??this.id,this.playerName=t.playerName??this.playerName,this.playerLevel=t.playerLevel??this.playerLevel,this.playerExp=t.playerExp??this.playerExp,this.playerInventory=t.playerInventory??this.playerInventory}}class kn{constructor(t){d(this,"id",0);d(this,"family","");d(this,"title","");d(this,"possibleOffspring",[]);d(this,"possibleSeedDrop",[]);d(this,"numOfDays",0);d(this,"numOfDaysRemaining",0);d(this,"chanceToDropSeed",100);d(this,"minSeedDrop",1);d(this,"maxSeedDrop",1);d(this,"minExpGain",0);d(this,"maxExpGain",0);d(this,"description","");d(this,"successRate",100);d(this,"isGrown",!1);this.family=t.family??this.family,this.title=t.title??this.title,this.possibleOffspring=t.possibleOffspring??this.possibleOffspring,this.possibleSeedDrop=t.possibleSeedDrop??this.possibleSeedDrop,this.numOfDays=t.numOfDays??this.numOfDays,this.numOfDaysRemaining=t.numOfDaysRemaining??this.numOfDaysRemaining,this.chanceToDropSeed=t.chanceToDropSeed??this.chanceToDropSeed,this.minSeedDrop=t.minSeedDrop??this.minSeedDrop,this.maxSeedDrop=t.maxSeedDrop??this.maxSeedDrop,this.maxExpGain=t.maxExpGain??this.maxExpGain,this.minExpGain=t.minExpGain??this.minExpGain,this.description=t.description??this.description,this.successRate=t.successRate??this.successRate,this.isGrown=t.isGrown??this.isGrown}setId(){return 0}}class En extends kn{constructor(e){super(e);d(this,"id",0);d(this,"family","planet");d(this,"title","Planet Seed");d(this,"possibleOffspring",["planet"]);d(this,"possibleSeedDrop",["Water Seed"]);d(this,"numOfDays",1);d(this,"numOfDaysRemaining",1);d(this,"chanceToDropSeed",100);d(this,"minSeedDrop",1);d(this,"maxSeedDrop",1);d(this,"minExpGain",50);d(this,"maxExpGain",50);d(this,"description","Grows a planet which more seeds can be grown from.");d(this,"successRate",100);d(this,"isGrown",!1)}}const X=[];function ut(n,t=A){let e;const s=new Set;function i(a){if(U(n,a)&&(n=a,e)){const c=!X.length;for(const l of s)l[1](),X.push(l,n);if(c){for(let l=0;l<X.length;l+=2)X[l][0](X[l+1]);X.length=0}}}function r(a){i(a(n))}function o(a,c=A){const l=[a,c];return s.add(l),s.size===1&&(e=t(i,r)||A),a(n),()=>{s.delete(l),s.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:o}}const Sn=ut(["Click 'Next' to begin."]),fe=ut("lobby"),Tt=ut("1a");function pe(n,t,e=0){let s=["Something went wrong... This text should not display."];return n==="lobby"&&t==="1a"&&(s=Rt.lobby.part1a),n==="1"&&(t==="1a"&&(s=Rt.chapter1.part1a),t==="2a"&&(s=Rt.chapter1.part2a)),s}const Rt={lobby:{part1a:["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."]},chapter1:{part1a:["Looks like we found 2 trusty adventurers. Click Ready to begin!"],part2a:["So now let us differntiate player 1 and player 2."]}};function de(n,t,e=0){let s={};if(n==="lobby"&&t==="1a")s={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:""},Tt.set("1a");else if(n==="1")switch(t){case"1a":s={option1Visible:!0,option1Disabled:!1,option1:"Ready",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:""},Tt.set("2a");break;case"2a":s={option1Visible:!0,option1Disabled:!1,option1:"",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:""};break}return s}class Cn{constructor(t){d(this,"id",0);d(this,"worldName","World");d(this,"maxActions",1);d(this,"remainingActions",1);d(this,"dayCount",1);d(this,"currentDay","Unoni");d(this,"currentDayIndex",1);d(this,"currentWeek",1);d(this,"currentMonth","New");d(this,"currentMonthIndex",1);d(this,"currentYear","Year of the Farmer");d(this,"currentYearIndex",1);d(this,"currentSeason","Spring");d(this,"plantedSeeds",[]);d(this,"unlockedSeeds",[]);d(this,"player",new vn({playerName:"Guest"}));this.id=t.id??this.id,this.worldName=t.worldName??this.worldName,this.maxActions=t.maxActions??this.maxActions,this.remainingActions=t.remainingActions??this.remainingActions,this.dayCount=t.dayCount??this.dayCount,this.currentDay=t.currentDay??this.currentDay,this.currentDayIndex=t.currentDayIndex??this.currentDayIndex,this.currentWeek=t.currentWeek??this.currentWeek,this.currentMonth=t.currentMonth??this.currentMonth,this.currentMonthIndex=t.currentMonthIndex??this.currentMonthIndex,this.currentYear=t.currentYear??this.currentYear,this.currentYearIndex=t.currentYearIndex??this.currentYearIndex,this.currentSeason=t.currentSeason??this.currentSeason,this.plantedSeeds=t.plantedSeeds??this.plantedSeeds,this.unlockedSeeds=t.unlockedSeeds??this.unlockedSeeds,this.player=t.player??this.player,localStorage.getItem("worldCount")??localStorage.setItem("worldCount","1"),localStorage.getItem("seedCount")??localStorage.setItem("seedCount","1")}startGame(){this.newDay()}isFirstDay(){return this.dayCount===1}firstDay(){this.displayWorldStats()}newDay(){if(this.isFirstDay()){this.firstDay();return}this.remainingActions=this.maxActions,this.plantedSeeds.forEach(t=>t.numOfDaysRemaining-=1),this.harvestSeeds()}displayWorldStats(){let t=[`
      Remaining Actions: ${this.remainingActions}<br>
      Days Passed: ${this.dayCount}<br>
      Current Day: ${this.currentDay}<br>
      Day of the year: ${this.currentDayIndex}<br>
      Current Week: ${this.currentWeek}<br>
      Current Month: ${this.currentMonth} Moon<br>
      Month of the Year: ${this.currentMonthIndex}<br>
      Current Year: ${this.currentYearIndex} - ${this.currentYear}<br>
      Current Season: ${this.currentSeason}<br>
      dumy text to fill screen<br>
      for<br>
      scrollbar<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .
      `];Sn.set(t)}displayHarvestYield(){return[]}plantSeed(t){this.remainingActions-=1}harvestSeeds(){this.plantedSeeds.length!==0&&this.plantedSeeds.forEach(t=>{if(t.numOfDaysRemaining===0){t.isGrown=!0,this.player.playerInventory=[...this.player.playerInventory,{...t}];const e=this.plantedSeeds.indexOf(t);this.plantedSeeds.splice(e,1)}})}hasActionsRemaining(){return this.remainingActions>0}}function Tn(n){let t,e,s,i,r;const o=n[3].default,a=Pt(o,n,n[2],null);return{c(){t=x("button"),a&&a.c(),m(t,"class",e="btn "+n[0]+" svelte-1utwdw0"),t.disabled=n[1]},m(c,l){S(c,t,l),a&&a.m(t,null),s=!0,i||(r=Jt(t,"click",n[4]),i=!0)},p(c,[l]){a&&a.p&&(!s||l&4)&&Lt(a,o,c,c[2],s?$t(o,c[2],l,null):It(c[2]),null),(!s||l&1&&e!==(e="btn "+c[0]+" svelte-1utwdw0"))&&m(t,"class",e),(!s||l&2)&&(t.disabled=c[1])},i(c){s||(w(a,c),s=!0)},o(c){E(a,c),s=!1},d(c){c&&v(t),a&&a.d(c),i=!1,r()}}}function xn(n,t,e){let{$$slots:s={},$$scope:i}=t,{btnType:r="terminal-option"}=t,{disabled:o=!1}=t;function a(c){Ie.call(this,n,c)}return n.$$set=c=>{"btnType"in c&&e(0,r=c.btnType),"disabled"in c&&e(1,o=c.disabled),"$$scope"in c&&e(2,i=c.$$scope)},[r,o,i,s,a]}class ne extends K{constructor(t){super(),G(this,t,xn,Tn,U,{btnType:0,disabled:1})}}const me=ut({id:void 0,title:"Player 1",points:{beasts:0,bots:0,dwarves:0,elves:0,humans:0,goblins:0,xenos:0},highestPoints:0,wins:0,losses:0,draws:0,playedFirst:!1,playingTwice:!1,turn:!1,dwarfNextTurn:!1,drewWarchief:!1,goblinLordMarked:!1,hand:[],startingHand:[],cardsDrawn:[],discards:[],boosts:[],traps:[],neutrals:[],chargeDrawnTurns:[],infectDrawnTurns:[],hasChastity:!1,hasCorruption:!1,hasVision:!1,isExposed:!1,chargePoints:0,infectPoints:0}),ge=ut({id:void 0,title:"Player 2",points:{beasts:0,bots:0,dwarves:0,elves:0,humans:0,goblins:0,xenos:0},highestPoints:0,wins:0,losses:0,draws:0,playedFirst:!1,playingTwice:!1,turn:!1,dwarfNextTurn:!1,drewWarchief:!1,goblinLordMarked:!1,hand:[],startingHand:[],cardsDrawn:[],discards:[],boosts:[],traps:[],neutrals:[],hasChastity:!1,hasCorruption:!1,hasVision:!1,isExposed:!1,chargeDrawnTurns:[],infectDrawnTurns:[],chargePoints:0,infectPoints:0}),$=Object.create(null);$.open="0";$.close="1";$.ping="2";$.pong="3";$.message="4";$.upgrade="5";$.noop="6";const yt=Object.create(null);Object.keys($).forEach(n=>{yt[$[n]]=n});const Mt={type:"error",data:"parser error"},Me=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ve=typeof ArrayBuffer=="function",Fe=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,se=({type:n,data:t},e,s)=>Me&&t instanceof Blob?e?s(t):ye(t,s):Ve&&(t instanceof ArrayBuffer||Fe(t))?e?s(t):ye(new Blob([t]),s):s($[n]+(t||"")),ye=(n,t)=>{const e=new FileReader;return e.onload=function(){const s=e.result.split(",")[1];t("b"+(s||""))},e.readAsDataURL(n)};function _e(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Bt;function On(n,t){if(Me&&n.data instanceof Blob)return n.data.arrayBuffer().then(_e).then(t);if(Ve&&(n.data instanceof ArrayBuffer||Fe(n.data)))return t(_e(n.data));se(n,!1,e=>{Bt||(Bt=new TextEncoder),t(Bt.encode(e))})}const be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<be.length;n++)ot[be.charCodeAt(n)]=n;const An=n=>{let t=n.length*.75,e=n.length,s,i=0,r,o,a,c;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);const l=new ArrayBuffer(t),u=new Uint8Array(l);for(s=0;s<e;s+=4)r=ot[n.charCodeAt(s)],o=ot[n.charCodeAt(s+1)],a=ot[n.charCodeAt(s+2)],c=ot[n.charCodeAt(s+3)],u[i++]=r<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},Rn=typeof ArrayBuffer=="function",ie=(n,t)=>{if(typeof n!="string")return{type:"message",data:Ue(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:Bn(n.substring(1),t)}:yt[e]?n.length>1?{type:yt[e],data:n.substring(1)}:{type:yt[e]}:Mt},Bn=(n,t)=>{if(Rn){const e=An(n);return Ue(e,t)}else return{base64:!0,data:n}},Ue=(n,t)=>{switch(t){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},He="",Nn=(n,t)=>{const e=n.length,s=new Array(e);let i=0;n.forEach((r,o)=>{se(r,!1,a=>{s[o]=a,++i===e&&t(s.join(He))})})},Dn=(n,t)=>{const e=n.split(He),s=[];for(let i=0;i<e.length;i++){const r=ie(e[i],t);if(s.push(r),r.type==="error")break}return s};function Pn(){return new TransformStream({transform(n,t){On(n,e=>{const s=e.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let Nt;function ft(n){return n.reduce((t,e)=>t+e.length,0)}function pt(n,t){if(n[0].length===t)return n.shift();const e=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)e[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),e}function $n(n,t){Nt||(Nt=new TextDecoder);const e=[];let s=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(s===0){if(ft(e)<1)break;const c=pt(e,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(ft(e)<2)break;const c=pt(e,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(ft(e)<8)break;const c=pt(e,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Mt);break}i=u*Math.pow(2,32)+l.getUint32(4),s=3}else{if(ft(e)<i)break;const c=pt(e,i);a.enqueue(ie(r?c:Nt.decode(c),t)),s=0}if(i===0||i>n){a.enqueue(Mt);break}}}})}const We=4;function k(n){if(n)return Ln(n)}function Ln(n){for(var t in k.prototype)n[t]=k.prototype[t];return n}k.prototype.on=k.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};k.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};k.prototype.off=k.prototype.removeListener=k.prototype.removeAllListeners=k.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<e.length;i++)if(s=e[i],s===t||s.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+n],this};k.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,i=e.length;s<i;++s)e[s].apply(this,t)}return this};k.prototype.emitReserved=k.prototype.emit;k.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};k.prototype.hasListeners=function(n){return!!this.listeners(n).length};const xt=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),R=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),In="arraybuffer";function Ye(n,...t){return t.reduce((e,s)=>(n.hasOwnProperty(s)&&(e[s]=n[s]),e),{})}const qn=R.setTimeout,Mn=R.clearTimeout;function Ot(n,t){t.useNativeTimers?(n.setTimeoutFn=qn.bind(R),n.clearTimeoutFn=Mn.bind(R)):(n.setTimeoutFn=R.setTimeout.bind(R),n.clearTimeoutFn=R.clearTimeout.bind(R))}const Vn=1.33;function Fn(n){return typeof n=="string"?Un(n):Math.ceil((n.byteLength||n.size)*Vn)}function Un(n){let t=0,e=0;for(let s=0,i=n.length;s<i;s++)t=n.charCodeAt(s),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(s++,e+=4);return e}function ze(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Hn(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function Wn(n){let t={},e=n.split("&");for(let s=0,i=e.length;s<i;s++){let r=e[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class Yn extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class re extends k{constructor(t){super(),this.writable=!1,Ot(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,s){return super.emitReserved("error",new Yn(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=ie(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=Hn(t);return e.length?"?"+e:""}}class zn extends re{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||e()})),this.writable||(s++,this.once("drain",function(){--s||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Dn(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Nn(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=ze()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let Ge=!1;try{Ge=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Gn=Ge;function Kn(){}class jn extends zn{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let s=location.port;s||(s=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,s)=>{this.onError("xhr poll error",e,s)}),this.pollXhr=t}}class D extends k{constructor(t,e,s){super(),this.createRequest=t,Ot(this,s),this._opts=s,this._method=s.method||"GET",this._uri=e,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const e=Ye(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(e);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=D.requestsCount++,D.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Kn,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete D.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}D.requestsCount=0;D.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",we);else if(typeof addEventListener=="function"){const n="onpagehide"in R?"pagehide":"unload";addEventListener(n,we,!1)}}function we(){for(let n in D.requests)D.requests.hasOwnProperty(n)&&D.requests[n].abort()}const Jn=function(){const n=Ke({xdomain:!1});return n&&n.responseType!==null}();class Xn extends jn{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=Jn&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new D(Ke,this.uri(),t)}}function Ke(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Gn))return new XMLHttpRequest}catch{}if(!t)try{return new R[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const je=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qn extends re{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,s=je?{}:Ye(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;se(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&xt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=ze()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const Dt=R.WebSocket||R.MozWebSocket;class Zn extends Qn{createSocket(t,e,s){return je?new Dt(t,e,s):e?new Dt(t,e):new Dt(t)}doWrite(t,e){this.ws.send(e)}}class ts extends re{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=$n(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(e).getReader(),i=Pn();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:a,value:c})=>{a||(this.onPacket(c),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;this._writer.write(s).then(()=>{i&&xt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const es={websocket:Zn,webtransport:ts,polling:Xn},ns=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ss=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Vt(n){if(n.length>8e3)throw"URI too long";const t=n,e=n.indexOf("["),s=n.indexOf("]");e!=-1&&s!=-1&&(n=n.substring(0,e)+n.substring(e,s).replace(/:/g,";")+n.substring(s,n.length));let i=ns.exec(n||""),r={},o=14;for(;o--;)r[ss[o]]=i[o]||"";return e!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=is(r,r.path),r.queryKey=rs(r,r.query),r}function is(n,t){const e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function rs(n,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(e[i]=r)}),e}const Ft=typeof addEventListener=="function"&&typeof removeEventListener=="function",_t=[];Ft&&addEventListener("offline",()=>{_t.forEach(n=>n())},!1);class V extends k{constructor(t,e){if(super(),this.binaryType=In,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const s=Vt(t);e.hostname=s.host,e.secure=s.protocol==="https"||s.protocol==="wss",e.port=s.port,s.query&&(e.query=s.query)}else e.host&&(e.hostname=Vt(e.host).host);Ot(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Wn(this.opts.query)),Ft&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_t.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=We,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&V.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",V.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(e+=Fn(i)),s>0&&e>this._maxPayload)return this.writeBuffer.slice(0,s);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,xt(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,s){return this._sendPacket("message",t,e,s),this}send(t,e,s){return this._sendPacket("message",t,e,s),this}_sendPacket(t,e,s,i){if(typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:e,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(V.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ft&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=_t.indexOf(this._offlineEventListener);s!==-1&&_t.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}V.protocol=We;class os extends V{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),s=!1;V.priorWebsocketSuccess=!1;const i=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;V.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=e.name,this.emitReserved("upgradeError",p)}}))};function r(){s||(s=!0,u(),e.close(),e=null)}const o=h=>{const p=new Error("probe error: "+h);p.transport=e.name,r(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function c(){o("socket closed")}function l(h){e&&h.name!==e.name&&r()}const u=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};e.once("open",i),e.once("error",o),e.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}let as=class extends os{constructor(t,e={}){const s=typeof t=="object"?t:e;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>es[i]).filter(i=>!!i)),super(t,s)}};function cs(n,t="",e){let s=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),s=Vt(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(e&&e.port===s.port?"":":"+s.port),s}const ls=typeof ArrayBuffer=="function",us=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Je=Object.prototype.toString,hs=typeof Blob=="function"||typeof Blob<"u"&&Je.call(Blob)==="[object BlobConstructor]",fs=typeof File=="function"||typeof File<"u"&&Je.call(File)==="[object FileConstructor]";function oe(n){return ls&&(n instanceof ArrayBuffer||us(n))||hs&&n instanceof Blob||fs&&n instanceof File}function bt(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,s=n.length;e<s;e++)if(bt(n[e]))return!0;return!1}if(oe(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return bt(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&bt(n[e]))return!0;return!1}function ps(n){const t=[],e=n.data,s=n;return s.data=Ut(e,t),s.attachments=t.length,{packet:s,buffers:t}}function Ut(n,t){if(!n)return n;if(oe(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let s=0;s<n.length;s++)e[s]=Ut(n[s],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=Ut(n[s],t));return e}return n}function ds(n,t){return n.data=Ht(n.data,t),delete n.attachments,n}function Ht(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=Ht(n[e],t);else if(typeof n=="object")for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=Ht(n[e],t));return n}const ms=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gs=5;var y;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(y||(y={}));class ys{constructor(t){this.replacer=t}encode(t){return(t.type===y.EVENT||t.type===y.ACK)&&bt(t)?this.encodeAsBinary({type:t.type===y.EVENT?y.BINARY_EVENT:y.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===y.BINARY_EVENT||t.type===y.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=ps(t),s=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(s),i}}function ve(n){return Object.prototype.toString.call(n)==="[object Object]"}class ae extends k{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const s=e.type===y.BINARY_EVENT;s||e.type===y.BINARY_ACK?(e.type=s?y.EVENT:y.ACK,this.reconstructor=new _s(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(oe(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(y[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===y.BINARY_EVENT||s.type===y.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(r,e)}else s.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}s.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(ae.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case y.CONNECT:return ve(e);case y.DISCONNECT:return e===void 0;case y.CONNECT_ERROR:return typeof e=="string"||ve(e);case y.EVENT:case y.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&ms.indexOf(e[0])===-1);case y.ACK:case y.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _s{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=ds(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const bs=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ae,Encoder:ys,get PacketType(){return y},protocol:gs},Symbol.toStringTag,{value:"Module"}));function B(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const ws=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xe extends k{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[B(t,"open",this.onopen.bind(this)),B(t,"packet",this.onpacket.bind(this)),B(t,"error",this.onerror.bind(this)),B(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var s,i,r;if(ws.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:y.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,h=e.pop();this._registerAckCallback(u,h),o.id=u}const a=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((s,i)=>{const r=(o,a)=>o?i(o):s(a);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:y.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case y.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case y.EVENT:case y.BINARY_EVENT:this.onevent(t);break;case y.ACK:case y.BINARY_ACK:this.onack(t);break;case y.DISCONNECT:this.ondisconnect();break;case y.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:y.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function st(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}st.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};st.prototype.reset=function(){this.attempts=0};st.prototype.setMin=function(n){this.ms=n};st.prototype.setMax=function(n){this.max=n};st.prototype.setJitter=function(n){this.jitter=n};class Wt extends k{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Ot(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new st({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||bs;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new as(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=B(e,"open",function(){s.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=B(e,"error",r);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(B(t,"ping",this.onping.bind(this)),B(t,"data",this.ondata.bind(this)),B(t,"error",this.onerror.bind(this)),B(t,"close",this.onclose.bind(this)),B(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){xt(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Xe(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const s of e)if(this.nsps[s].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const rt={};function wt(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=cs(n,t.path||"/socket.io"),s=e.source,i=e.id,r=e.path,o=rt[i]&&r in rt[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return a?c=new Wt(s,t):(rt[i]||(rt[i]=new Wt(s,t)),c=rt[i]),e.query&&!t.query&&(t.query=e.queryKey),c.socket(e.path,t)}Object.assign(wt,{Manager:Wt,Socket:Xe,io:wt,connect:wt});function vs(n){let t,e,s,i;return e=new Js({props:{gameStarted:n[0],terminalColor:"grey"}}),{c(){t=x("div"),F(e.$$.fragment),m(t,"class","main-content svelte-abemhi")},m(r,o){S(r,t,o),L(e,t,null),i=!0},p(r,[o]){const a={};o&1&&(a.gameStarted=r[0]),e.$set(a)},i(r){i||(w(e.$$.fragment,r),r&&(s||P(()=>{s=ee(t,et,{}),s.start()})),i=!0)},o(r){E(e.$$.fragment,r),i=!1},d(r){r&&v(t),I(e)}}}function ks(n,t,e){vt(n,ge,r=>e(1,r)),vt(n,me,r=>e(2,r));let s=wt("http://192.168.2.10:6912"),i=!1;return Qt(()=>{s.on("connect",()=>console.log(`User ID: ${s.id} connected!`)),s.on("connect_error",r=>console.error("Connection error:",r)),s.on("set-users",r=>{Object.entries(r).forEach(([o,a])=>{me.update(c=>(c.id=r.p1,c)),ge.update(c=>(c.id=r.p2,c))})}),s.on("p2-joined",r=>{e(0,i=!0)}),s.emit("client-ready")}),[i]}class Es extends K{constructor(t){super(),G(this,t,ks,vs,U,{})}}function Ss(n){let t,e,s,i,r,o,a;return e=new Us({props:{sidebarExpanded:n[0]}}),e.$on("select",n[1]),e.$on("toggle-sidebar",n[2]),r=new Es({}),{c(){t=x("div"),F(e.$$.fragment),s=W(),i=x("div"),F(r.$$.fragment),m(i,"class","screen svelte-kvlyqv"),m(t,"class","client svelte-kvlyqv"),M(t,"client-collapsed",!n[0])},m(c,l){S(c,t,l),L(e,t,null),b(t,s),b(t,i),L(r,i,null),a=!0},p(c,[l]){const u={};l&1&&(u.sidebarExpanded=c[0]),e.$set(u),(!a||l&1)&&M(t,"client-collapsed",!c[0])},i(c){a||(w(e.$$.fragment,c),w(r.$$.fragment,c),c&&(o||P(()=>{o=ee(t,et,{duration:2e3}),o.start()})),a=!0)},o(c){E(e.$$.fragment,c),E(r.$$.fragment,c),a=!1},d(c){c&&v(t),I(e),I(r)}}}function Cs(n,t,e){let s=!1;function i(o){o.detail}return[s,i,()=>e(0,s=!s)]}class Ts extends K{constructor(t){super(),G(this,t,Cs,Ss,U,{})}}const xs=n=>({}),ke=n=>({}),Os=n=>({}),Ee=n=>({});function As(n){let t,e,s,i;return{c(){t=T("svg"),e=T("circle"),s=T("path"),i=T("path"),m(e,"cx","12"),m(e,"cy","12"),m(e,"r","10"),m(s,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),m(i,"d","M12 17h.01"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(r,o){S(r,t,o),b(t,e),b(t,s),b(t,i)},d(r){r&&v(t)}}}function Rs(n){let t,e,s;return{c(){t=T("svg"),e=T("polyline"),s=T("line"),m(e,"points","4 17 10 11 4 5"),m(s,"x1","12"),m(s,"x2","20"),m(s,"y1","19"),m(s,"y2","19"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(i,r){S(i,t,r),b(t,e),b(t,s)},d(i){i&&v(t)}}}function Bs(n){let t,e,s;return{c(){t=T("svg"),e=T("path"),s=T("circle"),m(e,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),m(s,"cx","12"),m(s,"cy","7"),m(s,"r","4"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(i,r){S(i,t,r),b(t,e),b(t,s)},d(i){i&&v(t)}}}function Ns(n){let t,e,s;return{c(){t=T("svg"),e=T("path"),s=T("path"),m(e,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),m(s,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),m(t,"class","icon svelte-16xfpde")},m(i,r){S(i,t,r),b(t,e),b(t,s)},d(i){i&&v(t)}}}function Se(n){let t,e,s,i,r,o,a;const c=n[4].title,l=Pt(c,n,n[3],Ee),u=l||Ds(),h=n[4].description,p=Pt(h,n,n[3],ke),g=p||Ps();return{c(){t=x("div"),e=x("h2"),u&&u.c(),s=W(),i=x("p"),g&&g.c(),m(e,"class","item-title svelte-16xfpde"),m(i,"class","item-text svelte-16xfpde"),m(t,"class","item-text-wrapper svelte-16xfpde")},m(f,_){S(f,t,_),b(t,e),u&&u.m(e,null),b(t,s),b(t,i),g&&g.m(i,null),a=!0},p(f,_){l&&l.p&&(!a||_&8)&&Lt(l,c,f,f[3],a?$t(c,f[3],_,Os):It(f[3]),Ee),p&&p.p&&(!a||_&8)&&Lt(p,h,f,f[3],a?$t(h,f[3],_,xs):It(f[3]),ke)},i(f){a||(w(u,f),w(g,f),f&&P(()=>{a&&(o&&o.end(1),r=ee(t,et,{duration:500}),r.start())}),a=!0)},o(f){E(u,f),E(g,f),r&&r.invalidate(),f&&(o=yn(t,et,{duration:250})),a=!1},d(f){f&&v(t),u&&u.d(f),g&&g.d(f),f&&o&&o.end()}}}function Ds(n){let t;return{c(){t=nt("Title")},m(e,s){S(e,t,s)},d(e){e&&v(t)}}}function Ps(n){let t;return{c(){t=nt("Brief description")},m(e,s){S(e,t,s)},d(e){e&&v(t)}}}function $s(n){let t,e,s,i,r,o;function a(h,p){return h[0]==="seed"?Ns:h[0]==="player"?Bs:h[0]==="terminal"?Rs:As}let c=a(n),l=c(n),u=!n[2]&&Se(n);return{c(){t=x("div"),l.c(),e=W(),u&&u.c(),m(t,"class",s="item item-color__"+n[1]+" svelte-16xfpde")},m(h,p){S(h,t,p),l.m(t,null),b(t,e),u&&u.m(t,null),i=!0,r||(o=Jt(t,"click",n[5]),r=!0)},p(h,[p]){c!==(c=a(h))&&(l.d(1),l=c(h),l&&(l.c(),l.m(t,e))),h[2]?u&&(mt(),E(u,1,1,()=>{u=null}),gt()):u?(u.p(h,p),p&4&&w(u,1)):(u=Se(h),u.c(),w(u,1),u.m(t,null)),(!i||p&2&&s!==(s="item item-color__"+h[1]+" svelte-16xfpde"))&&m(t,"class",s)},i(h){i||(w(u),i=!0)},o(h){E(u),i=!1},d(h){h&&v(t),l.d(),u&&u.d(),r=!1,o()}}}function Ls(n,t,e){let{$$slots:s={},$$scope:i}=t,{iconType:r="unkown"}=t,{color:o="grey"}=t,{collapsed:a=!1}=t;function c(l){Ie.call(this,n,l)}return n.$$set=l=>{"iconType"in l&&e(0,r=l.iconType),"color"in l&&e(1,o=l.color),"collapsed"in l&&e(2,a=l.collapsed),"$$scope"in l&&e(3,i=l.$$scope)},[r,o,a,i,s,c]}class Is extends K{constructor(t){super(),G(this,t,Ls,$s,U,{iconType:0,color:1,collapsed:2})}}function qs(n){let t;return{c(){t=x("span"),t.textContent="Log",m(t,"slot","title")},m(e,s){S(e,t,s)},p:A,d(e){e&&v(t)}}}function Ms(n){let t;return{c(){t=x("span"),t.textContent="View logged messages",m(t,"slot","description")},m(e,s){S(e,t,s)},p:A,d(e){e&&v(t)}}}function Vs(n){let t,e,s,i,r,o,a,c,l;return o=new Is({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[Ms],title:[qs]},$$scope:{ctx:n}}}),o.$on("click",n[3]),{c(){t=x("div"),e=T("svg"),s=T("path"),i=T("path"),r=W(),F(o.$$.fragment),m(s,"d","M19 15V9"),m(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),m(e,"class","icon collapse-icon svelte-1tpwflx"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),M(e,"rotate",!n[0]),m(t,"class","sidebar svelte-1tpwflx"),M(t,"sidebar-collapsed",!n[0]),M(t,"sidebar-expanded",n[0])},m(u,h){S(u,t,h),b(t,e),b(e,s),b(e,i),b(t,r),L(o,t,null),a=!0,c||(l=Jt(e,"click",n[2]),c=!0)},p(u,[h]){(!a||h&1)&&M(e,"rotate",!u[0]);const p={};h&1&&(p.collapsed=!u[0]),h&16&&(p.$$scope={dirty:h,ctx:u}),o.$set(p),(!a||h&1)&&M(t,"sidebar-collapsed",!u[0]),(!a||h&1)&&M(t,"sidebar-expanded",u[0])},i(u){a||(w(o.$$.fragment,u),a=!0)},o(u){E(o.$$.fragment,u),a=!1},d(u){u&&v(t),I(o),c=!1,l()}}}function Fs(n,t,e){let{sidebarExpanded:s=!0}=t;const i=fn(),r=()=>i("toggle-sidebar"),o=()=>i("select","log");return n.$$set=a=>{"sidebarExpanded"in a&&e(0,s=a.sidebarExpanded)},[s,i,r,o]}class Us extends K{constructor(t){super(),G(this,t,Fs,Vs,U,{sidebarExpanded:0})}}function Yt(){return Yt=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Yt.apply(this,arguments)}var Hs={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,t){},onStringTyped:function(n,t){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,t){},onTypingResumed:function(n,t){},onReset:function(n){},onStop:function(n,t){},onStart:function(n,t){},onDestroy:function(n){}},Ws=new(function(){function n(){}var t=n.prototype;return t.load=function(e,s,i){if(e.el=typeof i=="string"?document.querySelector(i):i,e.options=Yt({},Hs,s),e.isInput=e.el.tagName.toLowerCase()==="input",e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map(function(l){return l.trim()}),e.stringsElement=typeof e.options.stringsElement=="string"?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)e.strings.push(r[a].innerHTML.trim())}for(var c in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[c]=c;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:e.contentType==="html"?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var s="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},t.appendFadeOutAnimationCss=function(e){var s="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},n}()),Ce=new(function(){function n(){}var t=n.prototype;return t.typeHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";e.substring(s+1).charAt(0)!==o&&!(1+ ++s>e.length););s++}return s},t.backSpaceHtmlChars=function(e,s,i){if(i.contentType!=="html")return s;var r=e.substring(s).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";e.substring(s-1).charAt(0)!==o&&!(--s<0););s--}return s},n}()),Te=function(){function n(e,s){Ws.load(this,s,e),this.begin()}var t=n.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){e===void 0&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){e.strPos===0?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)},this.startDelay)},t.typewrite=function(e,s){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=Ce.typeHtmlChars(e,s,i);var a=0,c=e.substring(s);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,a=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),e=e.substring(0,s)+e.substring(s+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;e.substring(s+o).charAt(0)!=="`"&&(o++,!(s+o>e.length)););var u=e.substring(0,s),h=e.substring(u.length+1,s+o),p=e.substring(s+o+1);e=u+h+p,o--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),s>=e.length?i.doneTyping(e,s):i.keepTyping(e,s,o),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},r):this.setPauseStatus(e,s,!0)},t.keepTyping=function(e,s,i){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,s+=i);this.replaceText(r),this.typewrite(e,s)},t.doneTyping=function(e,s){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(e,s)},this.backDelay))},t.backspace=function(e,s){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=Ce.backSpaceHtmlChars(e,s,i);var o=e.substring(0,s);if(i.replaceText(o),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&o===a.substring(0,s)?s:0}s>i.stopNum?(s--,i.backspace(e,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},r)}else this.setPauseStatus(e,s,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,s,i){this.pause.typewrite=i,this.pause.curString=e,this.pause.curStrPos=s},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:this.contentType==="html"?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",function(s){e.stop()}),this.el.addEventListener("blur",function(s){e.el.value&&e.el.value.length!==0||e.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();function xe(n){let t,e;return t=new ne({props:{btnType:"terminal-option",$$slots:{default:[Ys]},$$scope:{ctx:n}}}),t.$on("click",n[6]),{c(){F(t.$$.fragment)},m(s,i){L(t,s,i),e=!0},p(s,i){const r={};i&2050&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(w(t.$$.fragment,s),e=!0)},o(s){E(t.$$.fragment,s),e=!1},d(s){I(t,s)}}}function Ys(n){let t=n[1].option1+"",e;return{c(){e=nt(t)},m(s,i){S(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option1+"")&&Xt(e,t)},d(s){s&&v(e)}}}function Oe(n){let t,e;return t=new ne({props:{btnType:"terminal-option",$$slots:{default:[zs]},$$scope:{ctx:n}}}),t.$on("click",n[7]),{c(){F(t.$$.fragment)},m(s,i){L(t,s,i),e=!0},p(s,i){const r={};i&2050&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(w(t.$$.fragment,s),e=!0)},o(s){E(t.$$.fragment,s),e=!1},d(s){I(t,s)}}}function zs(n){let t=n[1].option2+"",e;return{c(){e=nt(t)},m(s,i){S(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option2+"")&&Xt(e,t)},d(s){s&&v(e)}}}function Ae(n){let t,e;return t=new ne({props:{btnType:"terminal-option",$$slots:{default:[Gs]},$$scope:{ctx:n}}}),t.$on("click",n[8]),{c(){F(t.$$.fragment)},m(s,i){L(t,s,i),e=!0},p(s,i){const r={};i&2050&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(w(t.$$.fragment,s),e=!0)},o(s){E(t.$$.fragment,s),e=!1},d(s){I(t,s)}}}function Gs(n){let t=n[1].option3+"",e;return{c(){e=nt(t)},m(s,i){S(s,e,i)},p(s,i){i&2&&t!==(t=s[1].option3+"")&&Xt(e,t)},d(s){s&&v(e)}}}function Ks(n){let t,e,s,i,r,o,a,c,l,u=n[1].option1Visible&&xe(n),h=n[1].option2Visible&&Oe(n),p=n[1].option3Visible&&Ae(n);return{c(){t=x("div"),e=x("div"),e.innerHTML='<p id="terminal-text" class="svelte-f1npwx"></p>',s=W(),i=x("div"),u&&u.c(),r=W(),h&&h.c(),o=W(),p&&p.c(),m(e,"class","terminal-screen svelte-f1npwx"),m(i,"class","terminal-option-flex-group"),m(t,"class",a="terminal terminal__"+n[0]+" svelte-f1npwx")},m(g,f){S(g,t,f),b(t,e),b(t,s),b(t,i),u&&u.m(i,null),b(i,r),h&&h.m(i,null),b(i,o),p&&p.m(i,null),l=!0},p(g,[f]){g[1].option1Visible?u?(u.p(g,f),f&2&&w(u,1)):(u=xe(g),u.c(),w(u,1),u.m(i,r)):u&&(mt(),E(u,1,1,()=>{u=null}),gt()),g[1].option2Visible?h?(h.p(g,f),f&2&&w(h,1)):(h=Oe(g),h.c(),w(h,1),h.m(i,o)):h&&(mt(),E(h,1,1,()=>{h=null}),gt()),g[1].option3Visible?p?(p.p(g,f),f&2&&w(p,1)):(p=Ae(g),p.c(),w(p,1),p.m(i,null)):p&&(mt(),E(p,1,1,()=>{p=null}),gt()),(!l||f&1&&a!==(a="terminal terminal__"+g[0]+" svelte-f1npwx"))&&m(t,"class",a)},i(g){l||(w(u),w(h),w(p),g&&P(()=>{l&&(c||(c=he(t,et,{duration:1e3},!0)),c.run(1))}),l=!0)},o(g){E(u),E(h),E(p),g&&(c||(c=he(t,et,{duration:1e3},!1)),c.run(0)),l=!1},d(g){g&&v(t),u&&u.d(),h&&h.d(),p&&p.d(),g&&c&&c.end()}}}function js(n,t,e){let s,i;vt(n,Tt,f=>e(4,s=f)),vt(n,fe,f=>e(5,i=f));let{terminalColor:r="grey"}=t,{gameStarted:o=!1}=t,a,c=pe(i,s),l=de(i,s);Qt(()=>{a=new Te("#terminal-text",{strings:c,typeSpeed:20})});function u(f,_=!1,C=!1){e(1,l=de(i,s,f)),C&&Tt.set("1a"),a.destroy(),a=new Te("#terminal-text",{strings:pe(i,s,f),typeSpeed:20})}const h=()=>u(1),p=()=>u(2),g=()=>u(3);return n.$$set=f=>{"terminalColor"in f&&e(0,r=f.terminalColor),"gameStarted"in f&&e(3,o=f.gameStarted)},n.$$.update=()=>{n.$$.dirty&56&&o&&i==="lobby"&&s==="1a"&&(fe.set("1"),u(0,!1,!0))},[r,l,u,o,s,i,h,p,g]}class Js extends K{constructor(t){super(),G(this,t,js,Ks,U,{terminalColor:0,gameStarted:3})}}function Xs(n){let t,e,s;return e=new Ts({}),{c(){t=x("main"),F(e.$$.fragment),m(t,"class","main-content svelte-kn45eq")},m(i,r){S(i,t,r),L(e,t,null),s=!0},p:A,i(i){s||(w(e.$$.fragment,i),s=!0)},o(i){E(e.$$.fragment,i),s=!1},d(i){i&&v(t),I(e)}}}function Qs(n){const t=new Cn({});Qt(()=>{e()});function e(){t.startGame()}return[]}class Zs extends K{constructor(t){super(),G(this,t,Qs,Xs,U,{})}}new Zs({target:document.getElementById("app")});
