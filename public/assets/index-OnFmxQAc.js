var tn=Object.defineProperty;var nn=(n,e,t)=>e in n?tn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>nn(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function N(){}const Je=n=>n;function sn(n,e){for(const t in e)n[t]=e[t];return n}function Nt(n){return n()}function ht(){return Object.create(null)}function z(n){n.forEach(Nt)}function ye(n){return typeof n=="function"}function K(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function rn(n){return Object.keys(n).length===0}function Rt(n,...e){if(n==null){for(const s of e)s(void 0);return N}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function be(n){let e;return Rt(n,t=>e=t)(),e}function te(n,e,t){n.$$.on_destroy.push(Rt(e,t))}function Ve(n,e,t,s){if(n){const i=Bt(n,e,t,s);return n[0](i)}}function Bt(n,e,t,s){return n[1]&&s?sn(t.ctx.slice(),n[1](s(e))):t.ctx}function qe(n,e,t,s){if(n[2]&&s){const i=n[2](s(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],a=Math.max(e.dirty.length,i.length);for(let o=0;o<a;o+=1)r[o]=e.dirty[o]|i[o];return r}return e.dirty|i}return e.dirty}function Me(n,e,t,s,i,r){if(i){const a=Bt(e,t,s,r);n.p(a,i)}}function Fe(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function on(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Pt=typeof window<"u";let Xe=Pt?()=>window.performance.now():()=>Date.now(),Qe=Pt?n=>requestAnimationFrame(n):N;const ne=new Set;function Lt(n){ne.forEach(e=>{e.c(n)||(ne.delete(e),e.f())}),ne.size!==0&&Qe(Lt)}function Ze(n){let e;return ne.size===0&&Qe(Lt),{promise:new Promise(t=>{ne.add(e={c:n,f:t})}),abort(){ne.delete(e)}}}function w(n,e){n.appendChild(e)}function $t(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function an(n){const e=O("style");return e.textContent="/* empty */",cn($t(n),e),e.sheet}function cn(n,e){return w(n.head||n,e),e.sheet}function C(n,e,t){n.insertBefore(e,t||null)}function E(n){n.parentNode&&n.parentNode.removeChild(n)}function O(n){return document.createElement(n)}function D(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ae(n){return document.createTextNode(n)}function W(){return ae(" ")}function de(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function m(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function ln(n){return Array.from(n.childNodes)}function et(n,e){e=""+e,n.data!==e&&(n.data=e)}function ft(n,e){n.value=e??""}function H(n,e,t){n.classList.toggle(e,!!t)}function It(n,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:s})}const Oe=new Map;let Ae=0;function un(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function hn(n,e){const t={stylesheet:an(e),rules:{}};return Oe.set(n,t),t}function De(n,e,t,s,i,r,a,o=0){const c=16.666/s;let l=`{
`;for(let _=0;_<=1;_+=c){const A=e+(t-e)*r(_);l+=_*100+`%{${a(A,1-A)}}
`}const u=l+`100% {${a(t,1-t)}}
}`,h=`__svelte_${un(u)}_${o}`,p=$t(n),{stylesheet:y,rules:f}=Oe.get(p)||hn(p,n);f[h]||(f[h]=!0,y.insertRule(`@keyframes ${h} ${u}`,y.cssRules.length));const g=n.style.animation||"";return n.style.animation=`${g?`${g}, `:""}${h} ${s}ms linear ${i}ms 1 both`,Ae+=1,h}function Ne(n,e){const t=(n.style.animation||"").split(", "),s=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-s.length;i&&(n.style.animation=s.join(", "),Ae-=i,Ae||fn())}function fn(){Qe(()=>{Ae||(Oe.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&E(e)}),Oe.clear())})}let me;function pe(n){me=n}function Vt(){if(!me)throw new Error("Function called outside component initialization");return me}function tt(n){Vt().$$.on_mount.push(n)}function pn(){const n=Vt();return(e,t,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[e];if(i){const r=It(e,t,{cancelable:s});return i.slice().forEach(a=>{a.call(n,r)}),!r.defaultPrevented}return!0}}function qt(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const ee=[],pt=[];let se=[];const dt=[],dn=Promise.resolve();let Ue=!1;function mn(){Ue||(Ue=!0,dn.then(Mt))}function V(n){se.push(n)}const Pe=new Set;let Q=0;function Mt(){if(Q!==0)return;const n=me;do{try{for(;Q<ee.length;){const e=ee[Q];Q++,pe(e),yn(e.$$)}}catch(e){throw ee.length=0,Q=0,e}for(pe(null),ee.length=0,Q=0;pt.length;)pt.pop()();for(let e=0;e<se.length;e+=1){const t=se[e];Pe.has(t)||(Pe.add(t),t())}se.length=0}while(ee.length);for(;dt.length;)dt.pop()();Ue=!1,Pe.clear(),pe(n)}function yn(n){if(n.fragment!==null){n.update(),z(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(V)}}function gn(n){const e=[],t=[];se.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),se=e}let ue;function nt(){return ue||(ue=Promise.resolve(),ue.then(()=>{ue=null})),ue}function j(n,e,t){n.dispatchEvent(It(`${e?"intro":"outro"}${t}`))}const ve=new Set;let $;function ke(){$={r:0,c:[],p:$}}function Ee(){$.r||z($.c),$=$.p}function k(n,e){n&&n.i&&(ve.delete(n),n.i(e))}function T(n,e,t,s){if(n&&n.o){if(ve.has(n))return;ve.add(n),$.c.push(()=>{ve.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}const st={duration:0};function it(n,e,t){const s={direction:"in"};let i=e(n,t,s),r=!1,a,o,c=0;function l(){a&&Ne(n,a)}function u(){const{delay:p=0,duration:y=300,easing:f=Je,tick:g=N,css:_}=i||st;_&&(a=De(n,0,1,y,p,f,_,c++)),g(0,1);const A=Xe()+p,L=A+y;o&&o.abort(),r=!0,V(()=>j(n,!0,"start")),o=Ze(M=>{if(r){if(M>=L)return g(1,0),j(n,!0,"end"),l(),r=!1;if(M>=A){const v=f((M-A)/y);g(v,1-v)}}return r})}let h=!1;return{start(){h||(h=!0,Ne(n),ye(i)?(i=i(s),nt().then(u)):u())},invalidate(){h=!1},end(){r&&(l(),r=!1)}}}function bn(n,e,t){const s={direction:"out"};let i=e(n,t,s),r=!0,a;const o=$;o.r+=1;let c;function l(){const{delay:u=0,duration:h=300,easing:p=Je,tick:y=N,css:f}=i||st;f&&(a=De(n,1,0,h,u,p,f));const g=Xe()+u,_=g+h;V(()=>j(n,!1,"start")),"inert"in n&&(c=n.inert,n.inert=!0),Ze(A=>{if(r){if(A>=_)return y(0,1),j(n,!1,"end"),--o.r||z(o.c),!1;if(A>=g){const L=p((A-g)/h);y(1-L,L)}}return r})}return ye(i)?nt().then(()=>{i=i(s),l()}):l(),{end(u){u&&"inert"in n&&(n.inert=c),u&&i.tick&&i.tick(1,0),r&&(a&&Ne(n,a),r=!1)}}}function mt(n,e,t,s){let r=e(n,t,{direction:"both"}),a=s?0:1,o=null,c=null,l=null,u;function h(){l&&Ne(n,l)}function p(f,g){const _=f.b-a;return g*=Math.abs(_),{a,b:f.b,d:_,duration:g,start:f.start,end:f.start+g,group:f.group}}function y(f){const{delay:g=0,duration:_=300,easing:A=Je,tick:L=N,css:M}=r||st,v={start:Xe()+g,b:f};f||(v.group=$,$.r+=1),"inert"in n&&(f?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),o||c?c=v:(M&&(h(),l=De(n,a,f,_,g,A,M)),f&&L(0,1),o=p(v,_),V(()=>j(n,f,"start")),Ze(le=>{if(c&&le>c.start&&(o=p(c,_),c=null,j(n,o.b,"start"),M&&(h(),l=De(n,a,o.b,o.duration,0,A,r.css))),o){if(le>=o.end)L(a=o.b,1-a),j(n,o.b,"end"),c||(o.b?h():--o.group.r||z(o.group.c)),o=null;else if(le>=o.start){const en=le-o.start;a=o.a+o.d*A(en/o.duration),L(a,1-a)}}return!!(o||c)}))}return{run(f){ye(r)?nt().then(()=>{r=r({direction:f?"in":"out"}),y(f)}):y(f)},end(){h(),o=c=null}}}function G(n){n&&n.c()}function F(n,e,t){const{fragment:s,after_update:i}=n.$$;s&&s.m(e,t),V(()=>{const r=n.$$.on_mount.map(Nt).filter(ye);n.$$.on_destroy?n.$$.on_destroy.push(...r):z(r),n.$$.on_mount=[]}),i.forEach(V)}function U(n,e){const t=n.$$;t.fragment!==null&&(gn(t.after_update),z(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function _n(n,e){n.$$.dirty[0]===-1&&(ee.push(n),mn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function J(n,e,t,s,i,r,a=null,o=[-1]){const c=me;pe(n);const l=n.$$={fragment:null,ctx:[],props:r,update:N,not_equal:i,bound:ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ht(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};a&&a(l.root);let u=!1;if(l.ctx=t?t(n,e.props||{},(h,p,...y)=>{const f=y.length?y[0]:p;return l.ctx&&i(l.ctx[h],l.ctx[h]=f)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](f),u&&_n(n,h)),p}):[],l.update(),u=!0,z(l.before_update),l.fragment=s?s(l.ctx):!1,e.target){if(e.hydrate){const h=ln(e.target);l.fragment&&l.fragment.l(h),h.forEach(E)}else l.fragment&&l.fragment.c();e.intro&&k(n.$$.fragment),F(n,e.target,e.anchor),Mt()}pe(c)}class X{constructor(){d(this,"$$");d(this,"$$set")}$destroy(){U(this,1),this.$destroy=N}$on(e,t){if(!ye(t))return N;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const i=s.indexOf(t);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!rn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const wn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wn);function vn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function oe(n,{delay:e=0,duration:t=400,easing:s=vn,amount:i=5,opacity:r=0}={}){const a=getComputedStyle(n),o=+a.opacity,c=a.filter==="none"?"":a.filter,l=o*(1-r),[u,h]=on(i);return{delay:e,duration:t,easing:s,css:(p,y)=>`opacity: ${o-l*y}; filter: ${c} blur(${y*u}${h});`}}class kn{constructor(e){d(this,"id",0);d(this,"playerName","Player");d(this,"playerLevel",1);d(this,"playerExp",0);d(this,"playerInventory",[new Sn({})]);this.id=e.id??this.id,this.playerName=e.playerName??this.playerName,this.playerLevel=e.playerLevel??this.playerLevel,this.playerExp=e.playerExp??this.playerExp,this.playerInventory=e.playerInventory??this.playerInventory}}class En{constructor(e){d(this,"id",0);d(this,"family","");d(this,"title","");d(this,"possibleOffspring",[]);d(this,"possibleSeedDrop",[]);d(this,"numOfDays",0);d(this,"numOfDaysRemaining",0);d(this,"chanceToDropSeed",100);d(this,"minSeedDrop",1);d(this,"maxSeedDrop",1);d(this,"minExpGain",0);d(this,"maxExpGain",0);d(this,"description","");d(this,"successRate",100);d(this,"isGrown",!1);this.family=e.family??this.family,this.title=e.title??this.title,this.possibleOffspring=e.possibleOffspring??this.possibleOffspring,this.possibleSeedDrop=e.possibleSeedDrop??this.possibleSeedDrop,this.numOfDays=e.numOfDays??this.numOfDays,this.numOfDaysRemaining=e.numOfDaysRemaining??this.numOfDaysRemaining,this.chanceToDropSeed=e.chanceToDropSeed??this.chanceToDropSeed,this.minSeedDrop=e.minSeedDrop??this.minSeedDrop,this.maxSeedDrop=e.maxSeedDrop??this.maxSeedDrop,this.maxExpGain=e.maxExpGain??this.maxExpGain,this.minExpGain=e.minExpGain??this.minExpGain,this.description=e.description??this.description,this.successRate=e.successRate??this.successRate,this.isGrown=e.isGrown??this.isGrown}setId(){return 0}}class Sn extends En{constructor(t){super(t);d(this,"id",0);d(this,"family","planet");d(this,"title","Planet Seed");d(this,"possibleOffspring",["planet"]);d(this,"possibleSeedDrop",["Water Seed"]);d(this,"numOfDays",1);d(this,"numOfDaysRemaining",1);d(this,"chanceToDropSeed",100);d(this,"minSeedDrop",1);d(this,"maxSeedDrop",1);d(this,"minExpGain",50);d(this,"maxExpGain",50);d(this,"description","Grows a planet which more seeds can be grown from.");d(this,"successRate",100);d(this,"isGrown",!1)}}const Z=[];function ge(n,e=N){let t;const s=new Set;function i(o){if(K(n,o)&&(n=o,t)){const c=!Z.length;for(const l of s)l[1](),Z.push(l,n);if(c){for(let l=0;l<Z.length;l+=2)Z[l][0](Z[l+1]);Z.length=0}}}function r(o){i(o(n))}function a(o,c=N){const l=[o,c];return s.add(l),s.size===1&&(t=e(i,r)||N),o(n),()=>{s.delete(l),s.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:a}}const ie=ge({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),re=ge({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]}),q=Object.create(null);q.open="0";q.close="1";q.ping="2";q.pong="3";q.message="4";q.upgrade="5";q.noop="6";const Se=Object.create(null);Object.keys(q).forEach(n=>{Se[q[n]]=n});const He={type:"error",data:"parser error"},Ft=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ut=typeof ArrayBuffer=="function",Ht=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,rt=({type:n,data:e},t,s)=>Ft&&e instanceof Blob?t?s(e):yt(e,s):Ut&&(e instanceof ArrayBuffer||Ht(e))?t?s(e):yt(new Blob([e]),s):s(q[n]+(e||"")),yt=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function gt(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Le;function Cn(n,e){if(Ft&&n.data instanceof Blob)return n.data.arrayBuffer().then(gt).then(e);if(Ut&&(n.data instanceof ArrayBuffer||Ht(n.data)))return e(gt(n.data));rt(n,!1,t=>{Le||(Le=new TextEncoder),e(Le.encode(t))})}const bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<bt.length;n++)fe[bt.charCodeAt(n)]=n;const xn=n=>{let e=n.length*.75,t=n.length,s,i=0,r,a,o,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(s=0;s<t;s+=4)r=fe[n.charCodeAt(s)],a=fe[n.charCodeAt(s+1)],o=fe[n.charCodeAt(s+2)],c=fe[n.charCodeAt(s+3)],u[i++]=r<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|c&63;return l},Tn=typeof ArrayBuffer=="function",ot=(n,e)=>{if(typeof n!="string")return{type:"message",data:Wt(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:On(n.substring(1),e)}:Se[t]?n.length>1?{type:Se[t],data:n.substring(1)}:{type:Se[t]}:He},On=(n,e)=>{if(Tn){const t=xn(n);return Wt(t,e)}else return{base64:!0,data:n}},Wt=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Yt="",An=(n,e)=>{const t=n.length,s=new Array(t);let i=0;n.forEach((r,a)=>{rt(r,!1,o=>{s[a]=o,++i===t&&e(s.join(Yt))})})},Dn=(n,e)=>{const t=n.split(Yt),s=[];for(let i=0;i<t.length;i++){const r=ot(t[i],e);if(s.push(r),r.type==="error")break}return s};function Nn(){return new TransformStream({transform(n,e){Cn(n,t=>{const s=t.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let $e;function _e(n){return n.reduce((e,t)=>e+t.length,0)}function we(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)t[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function Rn(n,e){$e||($e=new TextDecoder);const t=[];let s=0,i=-1,r=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(s===0){if(_e(t)<1)break;const c=we(t,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(_e(t)<2)break;const c=we(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(_e(t)<8)break;const c=we(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(He);break}i=u*Math.pow(2,32)+l.getUint32(4),s=3}else{if(_e(t)<i)break;const c=we(t,i);o.enqueue(ot(r?c:$e.decode(c),e)),s=0}if(i===0||i>n){o.enqueue(He);break}}}})}const Gt=4;function S(n){if(n)return Bn(n)}function Bn(n){for(var e in S.prototype)n[e]=S.prototype[e];return n}S.prototype.on=S.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};S.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<t.length;i++)if(s=t[i],s===e||s.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};S.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,i=t.length;s<i;++s)t[s].apply(this,e)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};S.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Re=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),B=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Pn="arraybuffer";function zt(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const Ln=B.setTimeout,$n=B.clearTimeout;function Be(n,e){e.useNativeTimers?(n.setTimeoutFn=Ln.bind(B),n.clearTimeoutFn=$n.bind(B)):(n.setTimeoutFn=B.setTimeout.bind(B),n.clearTimeoutFn=B.clearTimeout.bind(B))}const In=1.33;function Vn(n){return typeof n=="string"?qn(n):Math.ceil((n.byteLength||n.size)*In)}function qn(n){let e=0,t=0;for(let s=0,i=n.length;s<i;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function Kt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Mn(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Fn(n){let e={},t=n.split("&");for(let s=0,i=t.length;s<i;s++){let r=t[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Un extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class at extends S{constructor(e){super(),this.writable=!1,Be(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Un(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ot(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Mn(e);return t.length?"?"+t:""}}class Hn extends at{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Dn(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,An(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Kt()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let jt=!1;try{jt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wn=jt;function Yn(){}class Gn extends Hn{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class I extends S{constructor(e,t,s){super(),this.createRequest=e,Be(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=zt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=I.requestsCount++,I.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Yn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete I.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}I.requestsCount=0;I.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_t);else if(typeof addEventListener=="function"){const n="onpagehide"in B?"pagehide":"unload";addEventListener(n,_t,!1)}}function _t(){for(let n in I.requests)I.requests.hasOwnProperty(n)&&I.requests[n].abort()}const zn=function(){const n=Jt({xdomain:!1});return n&&n.responseType!==null}();class Kn extends Gn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=zn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new I(Jt,this.uri(),e)}}function Jt(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wn))return new XMLHttpRequest}catch{}if(!e)try{return new B[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Xt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class jn extends at{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Xt?{}:zt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;rt(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Re(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Kt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ie=B.WebSocket||B.MozWebSocket;class Jn extends jn{createSocket(e,t,s){return Xt?new Ie(e,t,s):t?new Ie(e,t):new Ie(e)}doWrite(e,t){this.ws.send(t)}}class Xn extends at{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Rn(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=Nn();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:o,value:c})=>{o||(this.onPacket(c),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&Re(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Qn={websocket:Jn,webtransport:Xn,polling:Kn},Zn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,es=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function We(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let i=Zn.exec(n||""),r={},a=14;for(;a--;)r[es[a]]=i[a]||"";return t!=-1&&s!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=ts(r,r.path),r.queryKey=ns(r,r.query),r}function ts(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ns(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(t[i]=r)}),t}const Ye=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ce=[];Ye&&addEventListener("offline",()=>{Ce.forEach(n=>n())},!1);class Y extends S{constructor(e,t){if(super(),this.binaryType=Pn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=We(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=We(t.host).host);Be(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Fn(this.opts.query)),Ye&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ce.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Gt,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Y.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Y.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+=Vn(i)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Re(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if(typeof t=="function"&&(i=t,t=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Y.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ye&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Ce.indexOf(this._offlineEventListener);s!==-1&&Ce.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Y.protocol=Gt;class ss extends Y{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Y.priorWebsocketSuccess=!1;const i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Y.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=t.name,this.emitReserved("upgradeError",p)}}))};function r(){s||(s=!0,u(),t.close(),t=null)}const a=h=>{const p=new Error("probe error: "+h);p.transport=t.name,r(),this.emitReserved("upgradeError",p)};function o(){a("transport closed")}function c(){a("socket closed")}function l(h){t&&h.name!==t.name&&r()}const u=()=>{t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",o),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",a),t.once("close",o),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let is=class extends ss{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Qn[i]).filter(i=>!!i)),super(e,s)}};function rs(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=We(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+e,s.href=s.protocol+"://"+r+(t&&t.port===s.port?"":":"+s.port),s}const os=typeof ArrayBuffer=="function",as=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Qt=Object.prototype.toString,cs=typeof Blob=="function"||typeof Blob<"u"&&Qt.call(Blob)==="[object BlobConstructor]",ls=typeof File=="function"||typeof File<"u"&&Qt.call(File)==="[object FileConstructor]";function ct(n){return os&&(n instanceof ArrayBuffer||as(n))||cs&&n instanceof Blob||ls&&n instanceof File}function xe(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(xe(n[t]))return!0;return!1}if(ct(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return xe(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&xe(n[t]))return!0;return!1}function us(n){const e=[],t=n.data,s=n;return s.data=Ge(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Ge(n,e){if(!n)return n;if(ct(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Ge(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Ge(n[s],e));return t}return n}function hs(n,e){return n.data=ze(n.data,e),delete n.attachments,n}function ze(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=ze(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=ze(n[t],e));return n}const fs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ps=5;var b;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(b||(b={}));class ds{constructor(e){this.replacer=e}encode(e){return(e.type===b.EVENT||e.type===b.ACK)&&xe(e)?this.encodeAsBinary({type:e.type===b.EVENT?b.BINARY_EVENT:b.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===b.BINARY_EVENT||e.type===b.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=us(e),s=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(s),i}}function wt(n){return Object.prototype.toString.call(n)==="[object Object]"}class lt extends S{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===b.BINARY_EVENT;s||t.type===b.BINARY_ACK?(t.type=s?b.EVENT:b.ACK,this.reconstructor=new ms(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ct(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(b[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===b.BINARY_EVENT||s.type===b.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(r,t)}else s.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(lt.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case b.CONNECT:return wt(t);case b.DISCONNECT:return t===void 0;case b.CONNECT_ERROR:return typeof t=="string"||wt(t);case b.EVENT:case b.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&fs.indexOf(t[0])===-1);case b.ACK:case b.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ms{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=hs(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ys=Object.freeze(Object.defineProperty({__proto__:null,Decoder:lt,Encoder:ds,get PacketType(){return b},protocol:ps},Symbol.toStringTag,{value:"Module"}));function P(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const gs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Zt extends S{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[P(e,"open",this.onopen.bind(this)),P(e,"packet",this.onpacket.bind(this)),P(e,"error",this.onerror.bind(this)),P(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,r;if(gs.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:b.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,h=t.pop();this._registerAckCallback(u,h),a.id=u}const o=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(r),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((s,i)=>{const r=(a,o)=>a?i(a):s(o);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:b.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case b.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case b.EVENT:case b.BINARY_EVENT:this.onevent(e);break;case b.ACK:case b.BINARY_ACK:this.onack(e);break;case b.DISCONNECT:this.ondisconnect();break;case b.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,t.packet({type:b.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:b.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function ce(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}ce.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};ce.prototype.reset=function(){this.attempts=0};ce.prototype.setMin=function(n){this.ms=n};ce.prototype.setMax=function(n){this.max=n};ce.prototype.setJitter=function(n){this.jitter=n};class Ke extends S{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Be(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ce({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||ys;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new is(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=P(t,"open",function(){s.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=P(t,"error",r);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(P(e,"ping",this.onping.bind(this)),P(e,"data",this.ondata.bind(this)),P(e,"error",this.onerror.bind(this)),P(e,"close",this.onclose.bind(this)),P(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Re(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Zt(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const he={};function Te(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=rs(n,e.path||"/socket.io"),s=t.source,i=t.id,r=t.path,a=he[i]&&r in he[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new Ke(s,e):(he[i]||(he[i]=new Ke(s,e)),c=he[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(Te,{Manager:Ke,Socket:Zt,io:Te,connect:Te});const x=Te("http://10.3.112.82:6912"),bs=ge(["Click 'Next' to begin."]),_s=ge("lobby"),R=ge("1a");function ws(n,e,t=0){let s={};if(n==="lobby")switch(e){case"1a":R.set("2a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"2a":R.set("3a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0};break;case"3a":case"3a-again":R.set("4a"),s={option1Visible:!0,option1Disabled:!1,option1:"Yes",option2Visible:!0,option2Disabled:!1,option2:"No",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"4a":t===1?(R.set("5a"),x.emit("5a-player-ready"),s={option1Visible:!0,option1Disabled:!0,option1:"Waiting",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1}):t===2&&(R.set("3a-again"),s={option1Visible:!0,option1Disabled:!1,option1:"Next But For Real This Time",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0});break;case"5a":R.set("6a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"6a":R.set("7a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"7a":R.set("8a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"8a":R.set("9a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"9a":R.set("10a"),s={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"10a":R.set("11a"),x.emit("11a-player-ready"),s={option1Visible:!0,option1Disabled:!0,option1:"Waiting for your dead weight teammate",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break}return s}function vt(n={player:{}}){n.optionSelected=n.optionSelected??0;let e=["Something went wrong... This text should not display."];if(n.chapter==="lobby")switch(n.part){case"1a":e=["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."];break;case"2a":e=["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"];break;case"3a":e=["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."];break;case"3a-again":e=["Oh good, I was hoping I didn't hear that correctly. What did you say your name actually was?"];break;case"4a":e=[`You're name is... ${n.player.name}?`];break;case"5a":e=["Great! Not the name of course, the fact that you're ready. When both of you are ready the button below will say 'Next', that means you're both ready to move forward."];break;case"6a":e=[`Good, now let me introduce the two of you to each other. First we have ${be(ie).name}${be(ie).id===n.player.id?"(you)":""} playing as the male character. Next, we have ${be(re).name}${be(re).id===n.player.id?"(you)":""} playing as the female role.`];break;case"7a":e=["Next, I'll explain the mechanics of the game. This game is more like an interactive multiplayer story with some DND elements. The only actions you'll be performing are selecting answers below (like 'Next') and rolling dice to decide outcomes. Select 'Next' to learn how dice rolling works."];break;case"8a":e=["Each player controls a unique character, these characters have different stats.",`For instance these are your character stats:
          <br> Name: ${n.player.name}
          <br> Gender: ${n.player.gender}
          <br> Health: ${n.player.stats.maxHealth}
          <br> Strength: ${n.player.stats.strength}
          <br> Defense: ${n.player.stats.defense}
          <br> Speed: ${n.player.stats.speed}
          <br> Intellect: ${n.player.stats.intellect}
          <br> Charisma: ${n.player.stats.charisma}
          `];break;case"9a":e=["These stats play a crucial role when it comes to events. Events are things that happen that require dice rolls or decisions to be made. For example, someone blocks your path and you need to roll for charisma. You need to push a heavy box so you roll for strength. Something falls on you so you roll for defense."];break;case"10a":e=["When you roll, your base stat is added to the dice roll and that final number determines the outcome of the situation. If you're charisma is too low, you won't convince the person. Strength too low means you can't push that box. If your defense is too low you your health stat will suffer when something hurts you."];break;case"11a":e=["When you're both ready, we'll move on and practice some dice rolls so you grasp the core mechanics of the game."];break}return e}class vs{constructor(e){d(this,"id",0);d(this,"worldName","World");d(this,"maxActions",1);d(this,"remainingActions",1);d(this,"dayCount",1);d(this,"currentDay","Unoni");d(this,"currentDayIndex",1);d(this,"currentWeek",1);d(this,"currentMonth","New");d(this,"currentMonthIndex",1);d(this,"currentYear","Year of the Farmer");d(this,"currentYearIndex",1);d(this,"currentSeason","Spring");d(this,"plantedSeeds",[]);d(this,"unlockedSeeds",[]);d(this,"player",new kn({playerName:"Guest"}));this.id=e.id??this.id,this.worldName=e.worldName??this.worldName,this.maxActions=e.maxActions??this.maxActions,this.remainingActions=e.remainingActions??this.remainingActions,this.dayCount=e.dayCount??this.dayCount,this.currentDay=e.currentDay??this.currentDay,this.currentDayIndex=e.currentDayIndex??this.currentDayIndex,this.currentWeek=e.currentWeek??this.currentWeek,this.currentMonth=e.currentMonth??this.currentMonth,this.currentMonthIndex=e.currentMonthIndex??this.currentMonthIndex,this.currentYear=e.currentYear??this.currentYear,this.currentYearIndex=e.currentYearIndex??this.currentYearIndex,this.currentSeason=e.currentSeason??this.currentSeason,this.plantedSeeds=e.plantedSeeds??this.plantedSeeds,this.unlockedSeeds=e.unlockedSeeds??this.unlockedSeeds,this.player=e.player??this.player,localStorage.getItem("worldCount")??localStorage.setItem("worldCount","1"),localStorage.getItem("seedCount")??localStorage.setItem("seedCount","1")}startGame(){this.newDay()}isFirstDay(){return this.dayCount===1}firstDay(){this.displayWorldStats()}newDay(){if(this.isFirstDay()){this.firstDay();return}this.remainingActions=this.maxActions,this.plantedSeeds.forEach(e=>e.numOfDaysRemaining-=1),this.harvestSeeds()}displayWorldStats(){let e=[`
      Remaining Actions: ${this.remainingActions}<br>
      Days Passed: ${this.dayCount}<br>
      Current Day: ${this.currentDay}<br>
      Day of the year: ${this.currentDayIndex}<br>
      Current Week: ${this.currentWeek}<br>
      Current Month: ${this.currentMonth} Moon<br>
      Month of the Year: ${this.currentMonthIndex}<br>
      Current Year: ${this.currentYearIndex} - ${this.currentYear}<br>
      Current Season: ${this.currentSeason}<br>
      dumy text to fill screen<br>
      for<br>
      scrollbar<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .<br>
      .
      `];bs.set(e)}displayHarvestYield(){return[]}plantSeed(e){this.remainingActions-=1}harvestSeeds(){this.plantedSeeds.length!==0&&this.plantedSeeds.forEach(e=>{if(e.numOfDaysRemaining===0){e.isGrown=!0,this.player.playerInventory=[...this.player.playerInventory,{...e}];const t=this.plantedSeeds.indexOf(e);this.plantedSeeds.splice(t,1)}})}hasActionsRemaining(){return this.remainingActions>0}}function ks(n){let e,t,s,i,r;const a=n[3].default,o=Ve(a,n,n[2],null);return{c(){e=O("button"),o&&o.c(),m(e,"class",t="btn "+n[0]+" svelte-1utwdw0"),e.disabled=n[1]},m(c,l){C(c,e,l),o&&o.m(e,null),s=!0,i||(r=de(e,"click",n[4]),i=!0)},p(c,[l]){o&&o.p&&(!s||l&4)&&Me(o,a,c,c[2],s?qe(a,c[2],l,null):Fe(c[2]),null),(!s||l&1&&t!==(t="btn "+c[0]+" svelte-1utwdw0"))&&m(e,"class",t),(!s||l&2)&&(e.disabled=c[1])},i(c){s||(k(o,c),s=!0)},o(c){T(o,c),s=!1},d(c){c&&E(e),o&&o.d(c),i=!1,r()}}}function Es(n,e,t){let{$$slots:s={},$$scope:i}=e,{btnType:r="terminal-option"}=e,{disabled:a=!1}=e;function o(c){qt.call(this,n,c)}return n.$$set=c=>{"btnType"in c&&t(0,r=c.btnType),"disabled"in c&&t(1,a=c.disabled),"$$scope"in c&&t(2,i=c.$$scope)},[r,a,i,s,o]}class ut extends X{constructor(e){super(),J(this,e,Es,ks,K,{btnType:0,disabled:1})}}function Ss(n){let e,t,s,i;return t=new Zs({props:{gameData:n[0],dialogueOptions:n[1],terminalColor:"grey"}}),{c(){e=O("div"),G(t.$$.fragment),m(e,"class","main-content svelte-abemhi")},m(r,a){C(r,e,a),F(t,e,null),i=!0},p(r,[a]){const o={};a&1&&(o.gameData=r[0]),a&2&&(o.dialogueOptions=r[1]),t.$set(o)},i(r){i||(k(t.$$.fragment,r),r&&(s||V(()=>{s=it(e,oe,{}),s.start()})),i=!0)},o(r){T(t.$$.fragment,r),i=!1},d(r){r&&E(e),U(t)}}}function Cs(n,e,t){let s,i;te(n,re,o=>t(2,s=o)),te(n,ie,o=>t(3,i=o));let r={playingAs:"",bothPlayersJoined:!1,chapter5aNumOfReadyPlayers:0,chapter11aNumOfReadyPlayers:0},a={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1};return tt(()=>{x.on("connect",()=>{x.emit("frontend-mounted"),console.log(`User ID: ${x.id} connected!`)}),x.on("playing-as",o=>{x.id===o.socketID&&o.playerCount===1&&t(0,r.playingAs="male",r),x.id===o.socketID&&o.playerCount===2&&t(0,r.playingAs="female",r),console.log("Playing as "+r.playingAs),console.log("Socket.id = "+x.id),console.log("data.socketID = "+o.socketID)}),x.on("connect_error",o=>console.error("Connection error:",o)),x.on("p2-joined",o=>{t(0,r.bothPlayersJoined=!0,r)}),x.on("set-users",o=>{Object.entries(o).forEach(([c,l])=>{ie.update(u=>(u.id=o.p1,u)),re.update(u=>(u.id=o.p2,u))})}),x.on("5a-player-ready",()=>{t(0,r.chapter5aNumOfReadyPlayers+=1,r),r.chapter5aNumOfReadyPlayers===2&&t(1,a={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("11a-player-ready",()=>{t(0,r.chapter11aNumOfReadyPlayers+=1,r),r.chapter11aNumOfReadyPlayers===2&&t(1,a={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("set-male-player-name",o=>ie.set({...i,name:o||"Peasant Boy"})),x.on("set-female-player-name",o=>re.set({...s,name:o||"Peasant Girl"})),x.emit("client-ready")}),[r,a]}class xs extends X{constructor(e){super(),J(this,e,Cs,Ss,K,{})}}function Ts(n){let e,t,s,i,r,a,o;return t=new Ys({props:{sidebarExpanded:n[0]}}),t.$on("select",n[1]),t.$on("toggle-sidebar",n[2]),r=new xs({}),{c(){e=O("div"),G(t.$$.fragment),s=W(),i=O("div"),G(r.$$.fragment),m(i,"class","screen svelte-kvlyqv"),m(e,"class","client svelte-kvlyqv"),H(e,"client-collapsed",!n[0])},m(c,l){C(c,e,l),F(t,e,null),w(e,s),w(e,i),F(r,i,null),o=!0},p(c,[l]){const u={};l&1&&(u.sidebarExpanded=c[0]),t.$set(u),(!o||l&1)&&H(e,"client-collapsed",!c[0])},i(c){o||(k(t.$$.fragment,c),k(r.$$.fragment,c),c&&(a||V(()=>{a=it(e,oe,{duration:2e3}),a.start()})),o=!0)},o(c){T(t.$$.fragment,c),T(r.$$.fragment,c),o=!1},d(c){c&&E(e),U(t),U(r)}}}function Os(n,e,t){let s=!1;function i(a){a.detail}return[s,i,()=>t(0,s=!s)]}class As extends X{constructor(e){super(),J(this,e,Os,Ts,K,{})}}const Ds=n=>({}),kt=n=>({}),Ns=n=>({}),Et=n=>({});function Rs(n){let e,t,s,i;return{c(){e=D("svg"),t=D("circle"),s=D("path"),i=D("path"),m(t,"cx","12"),m(t,"cy","12"),m(t,"r","10"),m(s,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),m(i,"d","M12 17h.01"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(r,a){C(r,e,a),w(e,t),w(e,s),w(e,i)},d(r){r&&E(e)}}}function Bs(n){let e,t,s;return{c(){e=D("svg"),t=D("polyline"),s=D("line"),m(t,"points","4 17 10 11 4 5"),m(s,"x1","12"),m(s,"x2","20"),m(s,"y1","19"),m(s,"y2","19"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(i,r){C(i,e,r),w(e,t),w(e,s)},d(i){i&&E(e)}}}function Ps(n){let e,t,s;return{c(){e=D("svg"),t=D("path"),s=D("circle"),m(t,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),m(s,"cx","12"),m(s,"cy","7"),m(s,"r","4"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(i,r){C(i,e,r),w(e,t),w(e,s)},d(i){i&&E(e)}}}function Ls(n){let e,t,s;return{c(){e=D("svg"),t=D("path"),s=D("path"),m(t,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),m(s,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(i,r){C(i,e,r),w(e,t),w(e,s)},d(i){i&&E(e)}}}function St(n){let e,t,s,i,r,a,o;const c=n[4].title,l=Ve(c,n,n[3],Et),u=l||$s(),h=n[4].description,p=Ve(h,n,n[3],kt),y=p||Is();return{c(){e=O("div"),t=O("h2"),u&&u.c(),s=W(),i=O("p"),y&&y.c(),m(t,"class","item-title svelte-16xfpde"),m(i,"class","item-text svelte-16xfpde"),m(e,"class","item-text-wrapper svelte-16xfpde")},m(f,g){C(f,e,g),w(e,t),u&&u.m(t,null),w(e,s),w(e,i),y&&y.m(i,null),o=!0},p(f,g){l&&l.p&&(!o||g&8)&&Me(l,c,f,f[3],o?qe(c,f[3],g,Ns):Fe(f[3]),Et),p&&p.p&&(!o||g&8)&&Me(p,h,f,f[3],o?qe(h,f[3],g,Ds):Fe(f[3]),kt)},i(f){o||(k(u,f),k(y,f),f&&V(()=>{o&&(a&&a.end(1),r=it(e,oe,{duration:500}),r.start())}),o=!0)},o(f){T(u,f),T(y,f),r&&r.invalidate(),f&&(a=bn(e,oe,{duration:250})),o=!1},d(f){f&&E(e),u&&u.d(f),y&&y.d(f),f&&a&&a.end()}}}function $s(n){let e;return{c(){e=ae("Title")},m(t,s){C(t,e,s)},d(t){t&&E(e)}}}function Is(n){let e;return{c(){e=ae("Brief description")},m(t,s){C(t,e,s)},d(t){t&&E(e)}}}function Vs(n){let e,t,s,i,r,a;function o(h,p){return h[0]==="seed"?Ls:h[0]==="player"?Ps:h[0]==="terminal"?Bs:Rs}let c=o(n),l=c(n),u=!n[2]&&St(n);return{c(){e=O("div"),l.c(),t=W(),u&&u.c(),m(e,"class",s="item item-color__"+n[1]+" svelte-16xfpde")},m(h,p){C(h,e,p),l.m(e,null),w(e,t),u&&u.m(e,null),i=!0,r||(a=de(e,"click",n[5]),r=!0)},p(h,[p]){c!==(c=o(h))&&(l.d(1),l=c(h),l&&(l.c(),l.m(e,t))),h[2]?u&&(ke(),T(u,1,1,()=>{u=null}),Ee()):u?(u.p(h,p),p&4&&k(u,1)):(u=St(h),u.c(),k(u,1),u.m(e,null)),(!i||p&2&&s!==(s="item item-color__"+h[1]+" svelte-16xfpde"))&&m(e,"class",s)},i(h){i||(k(u),i=!0)},o(h){T(u),i=!1},d(h){h&&E(e),l.d(),u&&u.d(),r=!1,a()}}}function qs(n,e,t){let{$$slots:s={},$$scope:i}=e,{iconType:r="unkown"}=e,{color:a="grey"}=e,{collapsed:o=!1}=e;function c(l){qt.call(this,n,l)}return n.$$set=l=>{"iconType"in l&&t(0,r=l.iconType),"color"in l&&t(1,a=l.color),"collapsed"in l&&t(2,o=l.collapsed),"$$scope"in l&&t(3,i=l.$$scope)},[r,a,o,i,s,c]}class Ms extends X{constructor(e){super(),J(this,e,qs,Vs,K,{iconType:0,color:1,collapsed:2})}}function Fs(n){let e;return{c(){e=O("span"),e.textContent="Log",m(e,"slot","title")},m(t,s){C(t,e,s)},p:N,d(t){t&&E(e)}}}function Us(n){let e;return{c(){e=O("span"),e.textContent="View logged messages",m(e,"slot","description")},m(t,s){C(t,e,s)},p:N,d(t){t&&E(e)}}}function Hs(n){let e,t,s,i,r,a,o,c,l;return a=new Ms({props:{collapsed:!n[0],color:"white",iconType:"terminal",$$slots:{description:[Us],title:[Fs]},$$scope:{ctx:n}}}),a.$on("click",n[3]),{c(){e=O("div"),t=D("svg"),s=D("path"),i=D("path"),r=W(),G(a.$$.fragment),m(s,"d","M19 15V9"),m(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),m(t,"class","icon collapse-icon svelte-1tpwflx"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),H(t,"rotate",!n[0]),m(e,"class","sidebar svelte-1tpwflx"),H(e,"sidebar-collapsed",!n[0]),H(e,"sidebar-expanded",n[0])},m(u,h){C(u,e,h),w(e,t),w(t,s),w(t,i),w(e,r),F(a,e,null),o=!0,c||(l=de(t,"click",n[2]),c=!0)},p(u,[h]){(!o||h&1)&&H(t,"rotate",!u[0]);const p={};h&1&&(p.collapsed=!u[0]),h&16&&(p.$$scope={dirty:h,ctx:u}),a.$set(p),(!o||h&1)&&H(e,"sidebar-collapsed",!u[0]),(!o||h&1)&&H(e,"sidebar-expanded",u[0])},i(u){o||(k(a.$$.fragment,u),o=!0)},o(u){T(a.$$.fragment,u),o=!1},d(u){u&&E(e),U(a),c=!1,l()}}}function Ws(n,e,t){let{sidebarExpanded:s=!0}=e;const i=pn(),r=()=>i("toggle-sidebar"),a=()=>i("select","log");return n.$$set=o=>{"sidebarExpanded"in o&&t(0,s=o.sidebarExpanded)},[s,i,r,a]}class Ys extends X{constructor(e){super(),J(this,e,Ws,Hs,K,{sidebarExpanded:0})}}function je(){return je=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},je.apply(this,arguments)}var Gs={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(n){},onComplete:function(n){},preStringTyped:function(n,e){},onStringTyped:function(n,e){},onLastStringBackspaced:function(n){},onTypingPaused:function(n,e){},onTypingResumed:function(n,e){},onReset:function(n){},onStop:function(n,e){},onStart:function(n,e){},onDestroy:function(n){}},zs=new(function(){function n(){}var e=n.prototype;return e.load=function(t,s,i){if(t.el=typeof i=="string"?document.querySelector(i):i,t.options=je({},Gs,s),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(l){return l.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),a=r.length;if(a)for(var o=0;o<a;o+=1)t.strings.push(r[o].innerHTML.trim())}for(var c in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[c]=c;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var s="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(t){var s="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+s+"]")){var i=document.createElement("style");i.setAttribute(s,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},n}()),Ct=new(function(){function n(){}var e=n.prototype;return e.typeHtmlChars=function(t,s,i){if(i.contentType!=="html")return s;var r=t.substring(s).charAt(0);if(r==="<"||r==="&"){var a;for(a=r==="<"?">":";";t.substring(s+1).charAt(0)!==a&&!(1+ ++s>t.length););s++}return s},e.backSpaceHtmlChars=function(t,s,i){if(i.contentType!=="html")return s;var r=t.substring(s).charAt(0);if(r===">"||r===";"){var a;for(a=r===">"?"<":"&";t.substring(s-1).charAt(0)!==a&&!(--s<0););s--}return s},n}()),xt=function(){function n(t,s){zs.load(this,s,t),this.begin()}var e=n.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,s){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),a=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=Ct.typeHtmlChars(t,s,i);var o=0,c=t.substring(s);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,o=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),t=t.substring(0,s)+t.substring(s+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;t.substring(s+a).charAt(0)!=="`"&&(a++,!(s+a>t.length)););var u=t.substring(0,s),h=t.substring(u.length+1,s+a),p=t.substring(s+a+1);t=u+h+p,a--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),s>=t.length?i.doneTyping(t,s):i.keepTyping(t,s,a),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},o)},r):this.setPauseStatus(t,s,!0)},e.keepTyping=function(t,s,i){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,s+=i);this.replaceText(r),this.typewrite(t,s)},e.doneTyping=function(t,s){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(t,s)},this.backDelay))},e.backspace=function(t,s){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=Ct.backSpaceHtmlChars(t,s,i);var a=t.substring(0,s);if(i.replaceText(a),i.smartBackspace){var o=i.strings[i.arrayPos+1];i.stopNum=o&&a===o.substring(0,s)?s:0}s>i.stopNum?(s--,i.backspace(t,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},r)}else this.setPauseStatus(t,s,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,s,i){this.pause.typewrite=i,this.pause.curString=t,this.pause.curStrPos=s},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(s){t.stop()}),this.el.addEventListener("blur",function(s){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},n}();function Tt(n){let e,t;return e=new ut({props:{btnType:"terminal-option",disabled:n[0].option1Disabled,$$slots:{default:[Ks]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){G(e.$$.fragment)},m(s,i){F(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.disabled=s[0].option1Disabled),i&131073&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Ks(n){let e=n[0].option1+"",t;return{c(){t=ae(e)},m(s,i){C(s,t,i)},p(s,i){i&1&&e!==(e=s[0].option1+"")&&et(t,e)},d(s){s&&E(t)}}}function Ot(n){let e,t;return e=new ut({props:{btnType:"terminal-option",disabled:n[0].option2Disabled,$$slots:{default:[js]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){G(e.$$.fragment)},m(s,i){F(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.disabled=s[0].option2Disabled),i&131073&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function js(n){let e=n[0].option2+"",t;return{c(){t=ae(e)},m(s,i){C(s,t,i)},p(s,i){i&1&&e!==(e=s[0].option2+"")&&et(t,e)},d(s){s&&E(t)}}}function At(n){let e,t;return e=new ut({props:{btnType:"terminal-option",disabled:n[0].option3Disabled,$$slots:{default:[Js]},$$scope:{ctx:n}}}),e.$on("click",n[10]),{c(){G(e.$$.fragment)},m(s,i){F(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.disabled=s[0].option3Disabled),i&131073&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Js(n){let e=n[0].option3+"",t;return{c(){t=ae(e)},m(s,i){C(s,t,i)},p(s,i){i&1&&e!==(e=s[0].option3+"")&&et(t,e)},d(s){s&&E(t)}}}function Dt(n){let e,t,s;return{c(){e=O("input"),m(e,"type","text"),m(e,"maxlength","20"),m(e,"class","terminal-input svelte-1wufxol")},m(i,r){C(i,e,r),ft(e,n[2]),t||(s=[de(e,"input",n[11]),de(e,"input",n[4])],t=!0)},p(i,r){r&4&&e.value!==i[2]&&ft(e,i[2])},d(i){i&&E(e),t=!1,z(s)}}}function Xs(n){let e,t,s,i,r,a,o,c,l,u,h=n[0].option1Visible&&Tt(n),p=n[0].option2Visible&&Ot(n),y=n[0].option3Visible&&At(n),f=n[0].inputVisible&&Dt(n);return{c(){e=O("div"),t=O("div"),t.innerHTML='<p id="terminal-text" class="svelte-1wufxol"></p> <div class="dice-screen svelte-1wufxol"></div>',s=W(),i=O("div"),h&&h.c(),r=W(),p&&p.c(),a=W(),y&&y.c(),o=W(),f&&f.c(),m(t,"class","terminal-screen svelte-1wufxol"),m(i,"class","terminal-option-flex-group"),m(e,"class",c="terminal terminal__"+n[1]+" svelte-1wufxol")},m(g,_){C(g,e,_),w(e,t),w(e,s),w(e,i),h&&h.m(i,null),w(i,r),p&&p.m(i,null),w(i,a),y&&y.m(i,null),w(i,o),f&&f.m(i,null),u=!0},p(g,[_]){g[0].option1Visible?h?(h.p(g,_),_&1&&k(h,1)):(h=Tt(g),h.c(),k(h,1),h.m(i,r)):h&&(ke(),T(h,1,1,()=>{h=null}),Ee()),g[0].option2Visible?p?(p.p(g,_),_&1&&k(p,1)):(p=Ot(g),p.c(),k(p,1),p.m(i,a)):p&&(ke(),T(p,1,1,()=>{p=null}),Ee()),g[0].option3Visible?y?(y.p(g,_),_&1&&k(y,1)):(y=At(g),y.c(),k(y,1),y.m(i,o)):y&&(ke(),T(y,1,1,()=>{y=null}),Ee()),g[0].inputVisible?f?f.p(g,_):(f=Dt(g),f.c(),f.m(i,null)):f&&(f.d(1),f=null),(!u||_&2&&c!==(c="terminal terminal__"+g[1]+" svelte-1wufxol"))&&m(e,"class",c)},i(g){u||(k(h),k(p),k(y),g&&V(()=>{u&&(l||(l=mt(e,oe,{duration:1e3},!0)),l.run(1))}),u=!0)},o(g){T(h),T(p),T(y),g&&(l||(l=mt(e,oe,{duration:1e3},!1)),l.run(0)),u=!1},d(g){g&&E(e),h&&h.d(),p&&p.d(),y&&y.d(),f&&f.d(),g&&l&&l.end()}}}function Qs(n,e,t){let s,i,r,a;te(n,R,v=>t(6,s=v)),te(n,_s,v=>t(7,i=v)),te(n,re,v=>t(13,r=v)),te(n,ie,v=>t(14,a=v));let{terminalColor:o="grey"}=e,{gameData:c}=e,{dialogueOptions:l}=e,u,h="",p=vt({chapter:i,part:s,player:f()});tt(()=>{u=new xt("#terminal-text",{strings:p,typeSpeed:20})});function y(v,le=!1){t(0,l=ws(i,s,v)),u.destroy(),u=new xt("#terminal-text",{strings:vt({chapter:i,part:s,player:f(),optionSelected:v}),typeSpeed:20,backSpeed:15,backDelay:2e3})}function f(){return c.playingAs==="male"?a:r}function g(){(i==="lobby"&&s==="3a"||s==="3a-again")&&(c.playingAs==="male"?x.emit("set-male-player-name",h.trim()):x.emit("set-female-player-name",h.trim()))}const _=()=>y(1),A=()=>y(2),L=()=>y(3);function M(){h=this.value,t(2,h)}return n.$$set=v=>{"terminalColor"in v&&t(1,o=v.terminalColor),"gameData"in v&&t(5,c=v.gameData),"dialogueOptions"in v&&t(0,l=v.dialogueOptions)},n.$$.update=()=>{n.$$.dirty&224&&c.bothPlayersJoined&&i==="lobby"&&s==="1a"&&(t(0,l.option1Disabled=!1,l),t(0,l.option1="Ready",l)),n.$$.dirty&224&&c.goToChapter6a&&i==="lobby"&&s==="5a"&&y(0)},[l,o,h,y,g,c,s,i,_,A,L,M]}class Zs extends X{constructor(e){super(),J(this,e,Qs,Xs,K,{terminalColor:1,gameData:5,dialogueOptions:0})}}function ei(n){let e,t,s;return t=new As({}),{c(){e=O("main"),G(t.$$.fragment),m(e,"class","main-content svelte-kn45eq")},m(i,r){C(i,e,r),F(t,e,null),s=!0},p:N,i(i){s||(k(t.$$.fragment,i),s=!0)},o(i){T(t.$$.fragment,i),s=!1},d(i){i&&E(e),U(t)}}}function ti(n){const e=new vs({});tt(()=>{t()});function t(){e.startGame()}return[]}class ni extends X{constructor(e){super(),J(this,e,ti,ei,K,{})}}new ni({target:document.getElementById("app")});
