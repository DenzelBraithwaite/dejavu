var ps=Object.defineProperty;var ds=(s,e,t)=>e in s?ps(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var de=(s,e,t)=>ds(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function x(){}const qe=s=>s;function ms(s,e){for(const t in e)s[t]=e[t];return s}function Mt(s){return s()}function _t(){return Object.create(null)}function ee(s){s.forEach(Mt)}function Se(s){return typeof s=="function"}function z(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function ys(s){return Object.keys(s).length===0}function ke(s,...e){if(s==null){for(const n of e)n(void 0);return x}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ge(s){let e;return ke(s,t=>e=t)(),e}function K(s,e,t){s.$$.on_destroy.push(ke(e,t))}function ze(s,e,t,n){if(s){const i=Ft(s,e,t,n);return s[0](i)}}function Ft(s,e,t,n){return s[1]&&n?ms(t.ctx.slice(),s[1](n(e))):t.ctx}function Ge(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=e.dirty[a]|i[a];return r}return e.dirty|i}return e.dirty}function Ke(s,e,t,n,i,r){if(i){const o=Ft(e,t,n,r);s.p(o,i)}}function je(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function wt(s,e,t){return s.set(t),e}function gs(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const Ut=typeof window<"u";let rt=Ut?()=>window.performance.now():()=>Date.now(),ot=Ut?s=>requestAnimationFrame(s):x;const ce=new Set;function Ht(s){ce.forEach(e=>{e.c(s)||(ce.delete(e),e.f())}),ce.size!==0&&ot(Ht)}function at(s){let e;return ce.size===0&&ot(Ht),{promise:new Promise(t=>{ce.add(e={c:s,f:t})}),abort(){ce.delete(e)}}}function v(s,e){s.appendChild(e)}function Wt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function bs(s){const e=S("style");return e.textContent="/* empty */",_s(Wt(s),e),e.sheet}function _s(s,e){return v(s.head||s,e),e.sheet}function C(s,e,t){s.insertBefore(e,t||null)}function E(s){s.parentNode&&s.parentNode.removeChild(s)}function S(s){return document.createElement(s)}function R(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function re(s){return document.createTextNode(s)}function M(){return re(" ")}function Ee(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function m(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function ws(s){return Array.from(s.childNodes)}function lt(s,e){e=""+e,s.data!==e&&(s.data=e)}function vt(s,e){s.value=e??""}function Q(s,e,t){s.classList.toggle(e,!!t)}function Yt(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}const Re=new Map;let Pe=0;function vs(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function ks(s,e){const t={stylesheet:bs(e),rules:{}};return Re.set(s,t),t}function $e(s,e,t,n,i,r,o,a=0){const l=16.666/n;let c=`{
`;for(let g=0;g<=1;g+=l){const _=e+(t-e)*r(g);c+=g*100+`%{${o(_,1-_)}}
`}const u=c+`100% {${o(t,1-t)}}
}`,f=`__svelte_${vs(u)}_${a}`,p=Wt(s),{stylesheet:y,rules:h}=Re.get(p)||ks(p,s);h[f]||(h[f]=!0,y.insertRule(`@keyframes ${f} ${u}`,y.cssRules.length));const d=s.style.animation||"";return s.style.animation=`${d?`${d}, `:""}${f} ${n}ms linear ${i}ms 1 both`,Pe+=1,f}function Le(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),Pe-=i,Pe||Es())}function Es(){ot(()=>{Pe||(Re.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&E(e)}),Re.clear())})}let Te;function ve(s){Te=s}function zt(){if(!Te)throw new Error("Function called outside component initialization");return Te}function ct(s){zt().$$.on_mount.push(s)}function Ts(){const s=zt();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const r=Yt(e,t,{cancelable:n});return i.slice().forEach(o=>{o.call(s,r)}),!r.defaultPrevented}return!0}}function Gt(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const le=[],kt=[];let ue=[];const Et=[],Ss=Promise.resolve();let Je=!1;function Cs(){Je||(Je=!0,Ss.then(Kt))}function F(s){ue.push(s)}const Ue=new Set;let oe=0;function Kt(){if(oe!==0)return;const s=Te;do{try{for(;oe<le.length;){const e=le[oe];oe++,ve(e),Os(e.$$)}}catch(e){throw le.length=0,oe=0,e}for(ve(null),le.length=0,oe=0;kt.length;)kt.pop()();for(let e=0;e<ue.length;e+=1){const t=ue[e];Ue.has(t)||(Ue.add(t),t())}ue.length=0}while(le.length);for(;Et.length;)Et.pop()();Je=!1,Ue.clear(),ve(s)}function Os(s){if(s.fragment!==null){s.update(),ee(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(F)}}function As(s){const e=[],t=[];ue.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ue=e}let me;function ut(){return me||(me=Promise.resolve(),me.then(()=>{me=null})),me}function se(s,e,t){s.dispatchEvent(Yt(`${e?"intro":"outro"}${t}`))}const Ae=new Set;let H;function be(){H={r:0,c:[],p:H}}function _e(){H.r||ee(H.c),H=H.p}function k(s,e){s&&s.i&&(Ae.delete(s),s.i(e))}function T(s,e,t,n){if(s&&s.o){if(Ae.has(s))return;Ae.add(s),H.c.push(()=>{Ae.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const ft={duration:0};function ht(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,o,a,l=0;function c(){o&&Le(s,o)}function u(){const{delay:p=0,duration:y=300,easing:h=qe,tick:d=x,css:g}=i||ft;g&&(o=$e(s,0,1,y,p,h,g,l++)),d(0,1);const _=rt()+p,b=_+y;a&&a.abort(),r=!0,F(()=>se(s,!0,"start")),a=at(O=>{if(r){if(O>=b)return d(1,0),se(s,!0,"end"),c(),r=!1;if(O>=_){const G=h((O-_)/y);d(G,1-G)}}return r})}let f=!1;return{start(){f||(f=!0,Le(s),Se(i)?(i=i(n),ut().then(u)):u())},invalidate(){f=!1},end(){r&&(c(),r=!1)}}}function Ns(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,o;const a=H;a.r+=1;let l;function c(){const{delay:u=0,duration:f=300,easing:p=qe,tick:y=x,css:h}=i||ft;h&&(o=$e(s,1,0,f,u,p,h));const d=rt()+u,g=d+f;F(()=>se(s,!1,"start")),"inert"in s&&(l=s.inert,s.inert=!0),at(_=>{if(r){if(_>=g)return y(0,1),se(s,!1,"end"),--a.r||ee(a.c),!1;if(_>=d){const b=p((_-d)/f);y(1-b,b)}}return r})}return Se(i)?ut().then(()=>{i=i(n),c()}):c(),{end(u){u&&"inert"in s&&(s.inert=l),u&&i.tick&&i.tick(1,0),r&&(o&&Le(s,o),r=!1)}}}function Ve(s,e,t,n){let r=e(s,t,{direction:"both"}),o=n?0:1,a=null,l=null,c=null,u;function f(){c&&Le(s,c)}function p(h,d){const g=h.b-o;return d*=Math.abs(g),{a:o,b:h.b,d:g,duration:d,start:h.start,end:h.start+d,group:h.group}}function y(h){const{delay:d=0,duration:g=300,easing:_=qe,tick:b=x,css:O}=r||ft,G={start:rt()+d,b:h};h||(G.group=H,H.r+=1),"inert"in s&&(h?u!==void 0&&(s.inert=u):(u=s.inert,s.inert=!0)),a||l?l=G:(O&&(f(),c=$e(s,o,h,g,d,_,O)),h&&b(0,1),a=p(G,g),F(()=>se(s,h,"start")),at(te=>{if(l&&te>l.start&&(a=p(l,g),l=null,se(s,a.b,"start"),O&&(f(),c=$e(s,o,a.b,a.duration,0,_,r.css))),a){if(te>=a.end)b(o=a.b,1-o),se(s,a.b,"end"),l||(a.b?f():--a.group.r||ee(a.group.c)),a=null;else if(te>=a.start){const X=te-a.start;o=a.a+a.d*_(X/a.duration),b(o,1-o)}}return!!(a||l)}))}return{run(h){Se(r)?ut().then(()=>{r=r({direction:h?"in":"out"}),y(h)}):y(h)},end(){f(),a=l=null}}}function U(s){s&&s.c()}function L(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),F(()=>{const r=s.$$.on_mount.map(Mt).filter(Se);s.$$.on_destroy?s.$$.on_destroy.push(...r):ee(r),s.$$.on_mount=[]}),i.forEach(F)}function V(s,e){const t=s.$$;t.fragment!==null&&(As(t.after_update),ee(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xs(s,e){s.$$.dirty[0]===-1&&(le.push(s),Cs(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function j(s,e,t,n,i,r,o=null,a=[-1]){const l=Te;ve(s);const c=s.$$={fragment:null,ctx:[],props:r,update:x,not_equal:i,bound:_t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:_t(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(s,e.props||{},(f,p,...y)=>{const h=y.length?y[0]:p;return c.ctx&&i(c.ctx[f],c.ctx[f]=h)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](h),u&&xs(s,f)),p}):[],c.update(),u=!0,ee(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const f=ws(e.target);c.fragment&&c.fragment.l(f),f.forEach(E)}else c.fragment&&c.fragment.c();e.intro&&k(s.$$.fragment),L(s,e.target,e.anchor),Kt()}ve(l)}class J{constructor(){de(this,"$$");de(this,"$$set")}$destroy(){V(this,1),this.$destroy=x}$on(e,t){if(!Se(t))return x;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ys(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ds="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ds);function Bs(s){let e,t,n,i,r;const o=s[3].default,a=ze(o,s,s[2],null);return{c(){e=S("button"),a&&a.c(),m(e,"class",t="btn "+s[0]+" svelte-1utwdw0"),e.disabled=s[1]},m(l,c){C(l,e,c),a&&a.m(e,null),n=!0,i||(r=Ee(e,"click",s[4]),i=!0)},p(l,[c]){a&&a.p&&(!n||c&4)&&Ke(a,o,l,l[2],n?Ge(o,l[2],c,null):je(l[2]),null),(!n||c&1&&t!==(t="btn "+l[0]+" svelte-1utwdw0"))&&m(e,"class",t),(!n||c&2)&&(e.disabled=l[1])},i(l){n||(k(a,l),n=!0)},o(l){T(a,l),n=!1},d(l){l&&E(e),a&&a.d(l),i=!1,r()}}}function Rs(s,e,t){let{$$slots:n={},$$scope:i}=e,{btnType:r="terminal-option"}=e,{disabled:o=!1}=e;function a(l){Gt.call(this,s,l)}return s.$$set=l=>{"btnType"in l&&t(0,r=l.btnType),"disabled"in l&&t(1,o=l.disabled),"$$scope"in l&&t(2,i=l.$$scope)},[r,o,i,n,a]}class Ie extends J{constructor(e){super(),j(this,e,Rs,Bs,z,{btnType:0,disabled:1})}}function Ps(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function fe(s,{delay:e=0,duration:t=400,easing:n=Ps,amount:i=5,opacity:r=0}={}){const o=getComputedStyle(s),a=+o.opacity,l=o.filter==="none"?"":o.filter,c=a*(1-r),[u,f]=gs(i);return{delay:e,duration:t,easing:n,css:(p,y)=>`opacity: ${a-c*y}; filter: ${l} blur(${y*u}${f});`}}function Tt(s,{delay:e=0,duration:t=400,easing:n=qe}={}){const i=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:r=>`opacity: ${r*i}`}}const Y=Object.create(null);Y.open="0";Y.close="1";Y.ping="2";Y.pong="3";Y.message="4";Y.upgrade="5";Y.noop="6";const Ne=Object.create(null);Object.keys(Y).forEach(s=>{Ne[Y[s]]=s});const Xe={type:"error",data:"parser error"},jt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Jt=typeof ArrayBuffer=="function",Xt=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,pt=({type:s,data:e},t,n)=>jt&&e instanceof Blob?t?n(e):St(e,n):Jt&&(e instanceof ArrayBuffer||Xt(e))?t?n(e):St(new Blob([e]),n):n(Y[s]+(e||"")),St=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Ct(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let He;function $s(s,e){if(jt&&s.data instanceof Blob)return s.data.arrayBuffer().then(Ct).then(e);if(Jt&&(s.data instanceof ArrayBuffer||Xt(s.data)))return e(Ct(s.data));pt(s,!1,t=>{He||(He=new TextEncoder),e(He.encode(t))})}const Ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",we=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Ot.length;s++)we[Ot.charCodeAt(s)]=s;const Ls=s=>{let e=s.length*.75,t=s.length,n,i=0,r,o,a,l;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(n=0;n<t;n+=4)r=we[s.charCodeAt(n)],o=we[s.charCodeAt(n+1)],a=we[s.charCodeAt(n+2)],l=we[s.charCodeAt(n+3)],u[i++]=r<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},Vs=typeof ArrayBuffer=="function",dt=(s,e)=>{if(typeof s!="string")return{type:"message",data:Qt(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:qs(s.substring(1),e)}:Ne[t]?s.length>1?{type:Ne[t],data:s.substring(1)}:{type:Ne[t]}:Xe},qs=(s,e)=>{if(Vs){const t=Ls(s);return Qt(t,e)}else return{base64:!0,data:s}},Qt=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Zt="",Is=(s,e)=>{const t=s.length,n=new Array(t);let i=0;s.forEach((r,o)=>{pt(r,!1,a=>{n[o]=a,++i===t&&e(n.join(Zt))})})},Ms=(s,e)=>{const t=s.split(Zt),n=[];for(let i=0;i<t.length;i++){const r=dt(t[i],e);if(n.push(r),r.type==="error")break}return n};function Fs(){return new TransformStream({transform(s,e){$s(s,t=>{const n=t.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let We;function Ce(s){return s.reduce((e,t)=>e+t.length,0)}function Oe(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)t[i]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function Us(s,e){We||(We=new TextDecoder);const t=[];let n=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(n===0){if(Ce(t)<1)break;const l=Oe(t,1);r=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Ce(t)<2)break;const l=Oe(t,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Ce(t)<8)break;const l=Oe(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Xe);break}i=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(Ce(t)<i)break;const l=Oe(t,i);a.enqueue(dt(r?l:We.decode(l),e)),n=0}if(i===0||i>s){a.enqueue(Xe);break}}}})}const es=4;function N(s){if(s)return Hs(s)}function Hs(s){for(var e in N.prototype)s[e]=N.prototype[e];return s}N.prototype.on=N.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};N.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};N.prototype.off=N.prototype.removeListener=N.prototype.removeAllListeners=N.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,i=0;i<t.length;i++)if(n=t[i],n===e||n.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+s],this};N.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,i=t.length;n<i;++n)t[n].apply(this,e)}return this};N.prototype.emitReserved=N.prototype.emit;N.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};N.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Me=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ws="arraybuffer";function ts(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const Ys=$.setTimeout,zs=$.clearTimeout;function Fe(s,e){e.useNativeTimers?(s.setTimeoutFn=Ys.bind($),s.clearTimeoutFn=zs.bind($)):(s.setTimeoutFn=$.setTimeout.bind($),s.clearTimeoutFn=$.clearTimeout.bind($))}const Gs=1.33;function Ks(s){return typeof s=="string"?js(s):Math.ceil((s.byteLength||s.size)*Gs)}function js(s){let e=0,t=0;for(let n=0,i=s.length;n<i;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function ss(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Js(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function Xs(s){let e={},t=s.split("&");for(let n=0,i=t.length;n<i;n++){let r=t[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Qs extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class mt extends N{constructor(e){super(),this.writable=!1,Fe(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Qs(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=dt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Js(e);return t.length?"?"+t:""}}class Zs extends mt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ms(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Is(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=ss()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let ns=!1;try{ns=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const en=ns;function tn(){}class sn extends Zs{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class W extends N{constructor(e,t,n){super(),this.createRequest=e,Fe(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=ts(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=W.requestsCount++,W.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=tn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete W.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}W.requestsCount=0;W.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",At);else if(typeof addEventListener=="function"){const s="onpagehide"in $?"pagehide":"unload";addEventListener(s,At,!1)}}function At(){for(let s in W.requests)W.requests.hasOwnProperty(s)&&W.requests[s].abort()}const nn=function(){const s=is({xdomain:!1});return s&&s.responseType!==null}();class rn extends sn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=nn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new W(is,this.uri(),e)}}function is(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||en))return new XMLHttpRequest}catch{}if(!e)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const rs=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class on extends mt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=rs?{}:ts(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;pt(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}i&&Me(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ss()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ye=$.WebSocket||$.MozWebSocket;class an extends on{createSocket(e,t,n){return rs?new Ye(e,t,n):t?new Ye(e,t):new Ye(e)}doWrite(e,t){this.ws.send(t)}}class ln extends mt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Us(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=Fs();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then(()=>{i&&Me(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const cn={websocket:an,webtransport:ln,polling:rn},un=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Qe(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let i=un.exec(s||""),r={},o=14;for(;o--;)r[fn[o]]=i[o]||"";return t!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=hn(r,r.path),r.queryKey=pn(r,r.query),r}function hn(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function pn(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,r){i&&(t[i]=r)}),t}const Ze=typeof addEventListener=="function"&&typeof removeEventListener=="function",xe=[];Ze&&addEventListener("offline",()=>{xe.forEach(s=>s())},!1);class Z extends N{constructor(e,t){if(super(),this.binaryType=Ws,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Qe(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Qe(t.host).host);Fe(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Xs(this.opts.query)),Ze&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=es,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Z.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Z.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=Ks(i)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Me(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if(typeof t=="function"&&(i=t,t=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Z.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ze&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=xe.indexOf(this._offlineEventListener);n!==-1&&xe.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Z.protocol=es;class dn extends Z{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Z.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Z.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=t.name,this.emitReserved("upgradeError",p)}}))};function r(){n||(n=!0,u(),t.close(),t=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=t.name,r(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){t&&f.name!==t.name&&r()}const u=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let mn=class extends dn{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>cn[i]).filter(i=>!!i)),super(e,n)}};function yn(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=Qe(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}const gn=typeof ArrayBuffer=="function",bn=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,os=Object.prototype.toString,_n=typeof Blob=="function"||typeof Blob<"u"&&os.call(Blob)==="[object BlobConstructor]",wn=typeof File=="function"||typeof File<"u"&&os.call(File)==="[object FileConstructor]";function yt(s){return gn&&(s instanceof ArrayBuffer||bn(s))||_n&&s instanceof Blob||wn&&s instanceof File}function De(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(De(s[t]))return!0;return!1}if(yt(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return De(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&De(s[t]))return!0;return!1}function vn(s){const e=[],t=s.data,n=s;return n.data=et(t,e),n.attachments=e.length,{packet:n,buffers:e}}function et(s,e){if(!s)return s;if(yt(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=et(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=et(s[n],e));return t}return s}function kn(s,e){return s.data=tt(s.data,e),delete s.attachments,s}function tt(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=tt(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=tt(s[t],e));return s}const En=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Tn=5;var w;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(w||(w={}));class Sn{constructor(e){this.replacer=e}encode(e){return(e.type===w.EVENT||e.type===w.ACK)&&De(e)?this.encodeAsBinary({type:e.type===w.EVENT?w.BINARY_EVENT:w.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===w.BINARY_EVENT||e.type===w.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=vn(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function Nt(s){return Object.prototype.toString.call(s)==="[object Object]"}class gt extends N{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===w.BINARY_EVENT;n||t.type===w.BINARY_ACK?(t.type=n?w.EVENT:w.ACK,this.reconstructor=new Cn(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(yt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(w[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===w.BINARY_EVENT||n.type===w.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(r,t)}else n.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(gt.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case w.CONNECT:return Nt(t);case w.DISCONNECT:return t===void 0;case w.CONNECT_ERROR:return typeof t=="string"||Nt(t);case w.EVENT:case w.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&En.indexOf(t[0])===-1);case w.ACK:case w.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Cn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=kn(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const On=Object.freeze(Object.defineProperty({__proto__:null,Decoder:gt,Encoder:Sn,get PacketType(){return w},protocol:Tn},Symbol.toStringTag,{value:"Module"}));function I(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const An=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class as extends N{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[I(e,"open",this.onopen.bind(this)),I(e,"packet",this.onpacket.bind(this)),I(e,"error",this.onerror.bind(this)),I(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,i,r;if(An.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:w.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,f=t.pop();this._registerAckCallback(u,f),o.id=u}const a=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,i)=>{const r=(o,a)=>o?i(o):n(a);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:w.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case w.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case w.EVENT:case w.BINARY_EVENT:this.onevent(e);break;case w.ACK:case w.BINARY_ACK:this.onack(e);break;case w.DISCONNECT:this.ondisconnect();break;case w.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:w.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:w.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function he(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}he.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};he.prototype.reset=function(){this.attempts=0};he.prototype.setMin=function(s){this.ms=s};he.prototype.setMax=function(s){this.max=s};he.prototype.setJitter=function(s){this.jitter=s};class st extends N{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Fe(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new he({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||On;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new mn(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=I(t,"open",function(){n.onopen(),e&&e()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=I(t,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(I(e,"ping",this.onping.bind(this)),I(e,"data",this.ondata.bind(this)),I(e,"error",this.onerror.bind(this)),I(e,"close",this.onclose.bind(this)),I(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Me(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new as(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ye={};function Be(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=yn(s,e.path||"/socket.io"),n=t.source,i=t.id,r=t.path,o=ye[i]&&r in ye[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new st(n,e):(ye[i]||(ye[i]=new st(n,e)),l=ye[i]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(Be,{Manager:st,Socket:as,io:Be,connect:Be});const D=Be("http://10.3.112.75:6912"),ae=[];function pe(s,e=x){let t;const n=new Set;function i(a){if(z(s,a)&&(s=a,t)){const l=!ae.length;for(const c of n)c[1](),ae.push(c,s);if(l){for(let c=0;c<ae.length;c+=2)ae[c][0](ae[c+1]);ae.length=0}}}function r(a){i(a(s))}function o(a,l=x){const c=[a,l];return n.add(c),n.size===1&&(t=e(i,r)||x),a(s),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}const ne=pe({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),ie=pe({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]}),q=pe({playingAs:"",bothPlayersJoined:!1,chapter5NumOfReadyPlayers:0,chapter11NumOfReadyPlayers:0,showDiceTerminal:!1}),Nn=pe("lobby"),P=pe("1"),B=pe({option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1});function xn(s,e,t=0){if(s==="lobby")switch(e){case"1":P.set("2"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"2":P.set("3"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0});break;case"3":case"3-again":P.set("4"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Yes",option2Visible:!0,option2Disabled:!1,option2:"No",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"4":t===1?(P.set("5"),D.emit("5-player-ready"),B.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})):t===2&&(P.set("3-again"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next But For Real This Time",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0}));break;case"5":P.set("6"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"6":P.set("7"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"7":P.set("8"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"8":P.set("9"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"9":P.set("10"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"10":P.set("11"),D.emit("11-player-ready"),B.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting for your dead weight teammate",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"11":P.set("12"),q.set({...ge(q),showDiceTerminal:!0}),B.set({option1Visible:!0,option1Disabled:!0,option1:"Disabled During Demo",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"12":P.set("13"),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break}}function xt(s={player:{}}){s.optionSelected=s.optionSelected??0;let e=["Something went wrong... This text should not display."];if(s.chapter==="lobby")switch(s.part){case"1":e=["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."];break;case"2":e=["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"];break;case"3":e=["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."];break;case"3-again":e=["Oh good, I was hoping I didn't hear that correctly. What did you say your name actually was?"];break;case"4":e=[`You're name is... ${s.player.name}?`];break;case"5":e=["Great! Not the name of course, the fact that you're ready. When both of you are ready the button below will say 'Next', that means you're both ready to move forward."];break;case"6":e=[`Good, now let me introduce the two of you to each other. First we have ${ge(ne).name}${ge(ne).id===s.player.id?"(you)":""} playing as the male character. Next, we have ${ge(ie).name}${ge(ie).id===s.player.id?"(you)":""} playing as the female role.`];break;case"7":e=["Next, I'll explain the mechanics of the game. This game is more like an interactive multiplayer story with some DND elements. The only actions you'll be performing are selecting answers below (like 'Next') and rolling dice to decide outcomes. Select 'Next' to learn how dice rolling works."];break;case"8":e=["Each player controls a unique character, these characters have different stats.",`For instance these are your character stats:
          <br> Name: ${s.player.name}
          <br> Gender: ${s.player.gender}
          <br> Health: ${s.player.stats.maxHealth}
          <br> Strength: ${s.player.stats.strength}
          <br> Defense: ${s.player.stats.defense}
          <br> Speed: ${s.player.stats.speed}
          <br> Intellect: ${s.player.stats.intellect}
          <br> Charisma: ${s.player.stats.charisma}
          `];break;case"9":e=["These stats play a crucial role when it comes to events. Events are things that happen that require dice rolls or decisions to be made. For example, someone blocks your path and you need to roll for charisma. You need to push a heavy box so you roll for strength. Something falls on you so you roll for defense."];break;case"10":e=["When you roll, your base stat is added to the dice roll and that final number determines the outcome of the situation. If you're charisma is too low, you won't convince the person. Strength too low means you can't push that box. If your defense is too low you your health stat will suffer when something hurts you."];break;case"11":e=["When you're both ready, we'll move on and practice some dice rolls so you grasp the core mechanics of the game."];break;case"12":e=["Waiting for dice window to close."];break;case"13":e=["That was a quick example of a dice role..."];break}return e}function Dn(s={player:{}}){const e=s.player.stats[s.stat],t=s.dice.roll(),n=e+t,i=n-s.threshold>=0,r=i?"You were successful":"You were unsuccessful";return[`You are rolling a <span class="color-blue">d-${s.dice.numOfSides}</span> dice for your <span class="color-blue">${s.stat}</span> stat. You need at least a <span class="color-blue">${s.threshold}</span>. You roll the dice and get a <span class="color-blue">${t}</span>, your base stat is <span class="color-pink">${e}</span> for a total of <span class="color-blue stat-roll-result">${n}</span>. <span class="color-${i?"green":"red"}">${r}</span>`]}function Bn(s){let e,t,n,i;return t=new yi({props:{currentGameState:q,dialogueOptions:B,terminalColor:"grey"}}),{c(){e=S("div"),U(t.$$.fragment),m(e,"class","main-content svelte-abemhi")},m(r,o){C(r,e,o),L(t,e,null),i=!0},p:x,i(r){i||(k(t.$$.fragment,r),r&&(n||F(()=>{n=ht(e,fe,{}),n.start()})),i=!0)},o(r){T(t.$$.fragment,r),i=!1},d(r){r&&E(e),V(t)}}}function Rn(s,e,t){let n,i,r;return K(s,ie,o=>t(0,n=o)),K(s,ne,o=>t(1,i=o)),K(s,q,o=>t(2,r=o)),ct(()=>{D.on("connect",()=>{D.emit("frontend-mounted"),console.log(`User ID: ${D.id} connected!`)}),D.on("playing-as",o=>{D.id===o.socketID&&o.playerCount===1&&q.set({...r,playingAs:"male"}),D.id===o.socketID&&o.playerCount===2&&q.set({...r,playingAs:"female"}),console.log("Playing as "+r.playingAs),console.log("Socket.id = "+D.id),console.log("data.socketID = "+o.socketID)}),D.on("connect_error",o=>console.error("Connection error:",o)),D.on("p2-joined",()=>q.set({...r,bothPlayersJoined:!0})),D.on("set-users",o=>{Object.entries(o).forEach(([a,l])=>{ne.update(c=>(c.id=o.p1,c)),ie.update(c=>(c.id=o.p2,c))})}),D.on("5-player-ready",()=>{q.set({...r,chapter5NumOfReadyPlayers:wt(q,r.chapter5NumOfReadyPlayers+=1,r)}),r.chapter5NumOfReadyPlayers===2&&B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),D.on("11-player-ready",()=>{q.set({...r,chapter11NumOfReadyPlayers:wt(q,r.chapter11NumOfReadyPlayers+=1,r)}),r.chapter11NumOfReadyPlayers===2&&B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),D.on("set-male-player-name",o=>ne.set({...i,name:o||"Peasant Boy"})),D.on("set-female-player-name",o=>ie.set({...n,name:o||"Peasant Girl"})),D.emit("client-ready")}),[]}class Pn extends J{constructor(e){super(),j(this,e,Rn,Bn,z,{})}}function $n(s){let e,t,n,i,r,o,a;return t=new li({props:{sidebarExpanded:s[0]}}),t.$on("select",s[1]),t.$on("toggle-sidebar",s[2]),r=new Pn({}),{c(){e=S("div"),U(t.$$.fragment),n=M(),i=S("div"),U(r.$$.fragment),m(i,"class","screen svelte-kvlyqv"),m(e,"class","client svelte-kvlyqv"),Q(e,"client-collapsed",!s[0])},m(l,c){C(l,e,c),L(t,e,null),v(e,n),v(e,i),L(r,i,null),a=!0},p(l,[c]){const u={};c&1&&(u.sidebarExpanded=l[0]),t.$set(u),(!a||c&1)&&Q(e,"client-collapsed",!l[0])},i(l){a||(k(t.$$.fragment,l),k(r.$$.fragment,l),l&&(o||F(()=>{o=ht(e,fe,{duration:2e3}),o.start()})),a=!0)},o(l){T(t.$$.fragment,l),T(r.$$.fragment,l),a=!1},d(l){l&&E(e),V(t),V(r)}}}function Ln(s,e,t){let n=!1;function i(o){o.detail}return[n,i,()=>t(0,n=!n)]}class Vn extends J{constructor(e){super(),j(this,e,Ln,$n,z,{})}}function qn(s){let e,t;return{c(){e=S("div"),m(e,"class",t="dice dice-d"+s[0].numOfSides+" svelte-w3nifx"),m(e,"role","img"),m(e,"aria-label","One 4-sided dice")},m(n,i){C(n,e,i)},p(n,[i]){i&1&&t!==(t="dice dice-d"+n[0].numOfSides+" svelte-w3nifx")&&m(e,"class",t)},i:x,o:x,d(n){n&&E(e)}}}function In(s,e,t){let{dice:n}=e;return s.$$set=i=>{"dice"in i&&t(0,n=i.dice)},[n]}class Mn extends J{constructor(e){super(),j(this,e,In,qn,z,{dice:0})}}function nt(){return nt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},nt.apply(this,arguments)}var Fn={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(s){},onComplete:function(s){},preStringTyped:function(s,e){},onStringTyped:function(s,e){},onLastStringBackspaced:function(s){},onTypingPaused:function(s,e){},onTypingResumed:function(s,e){},onReset:function(s){},onStop:function(s,e){},onStart:function(s,e){},onDestroy:function(s){}},Un=new(function(){function s(){}var e=s.prototype;return e.load=function(t,n,i){if(t.el=typeof i=="string"?document.querySelector(i):i,t.options=nt({},Fn,n),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(c){return c.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)t.strings.push(r[a].innerHTML.trim())}for(var l in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[l]=l;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var n="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+n+"]")){var i=document.createElement("style");i.setAttribute(n,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(t){var n="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+n+"]")){var i=document.createElement("style");i.setAttribute(n,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},s}()),Dt=new(function(){function s(){}var e=s.prototype;return e.typeHtmlChars=function(t,n,i){if(i.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";t.substring(n+1).charAt(0)!==o&&!(1+ ++n>t.length););n++}return n},e.backSpaceHtmlChars=function(t,n,i){if(i.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";t.substring(n-1).charAt(0)!==o&&!(--n<0););n--}return n},s}()),it=function(){function s(t,n){Un.load(this,n,t),this.begin()}var e=s.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,n){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){n=Dt.typeHtmlChars(t,n,i);var a=0,l=t.substring(n);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var c=1;c+=(l=/\d+/.exec(l)[0]).length,a=parseInt(l),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),t=t.substring(0,n)+t.substring(n+c),i.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;t.substring(n+o).charAt(0)!=="`"&&(o++,!(n+o>t.length)););var u=t.substring(0,n),f=t.substring(u.length+1,n+o),p=t.substring(n+o+1);t=u+f+p,o--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),n>=t.length?i.doneTyping(t,n):i.keepTyping(t,n,o),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},r):this.setPauseStatus(t,n,!0)},e.keepTyping=function(t,n,i){n===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,n+=i);this.replaceText(r),this.typewrite(t,n)},e.doneTyping=function(t,n){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(t,n)},this.backDelay))},e.backspace=function(t,n){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){n=Dt.backSpaceHtmlChars(t,n,i);var o=t.substring(0,n);if(i.replaceText(o),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&o===a.substring(0,n)?n:0}n>i.stopNum?(n--,i.backspace(t,n)):n<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],n))},r)}else this.setPauseStatus(t,n,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,n,i){this.pause.typewrite=i,this.pause.curString=t,this.pause.curStrPos=n},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(n){t.stop()}),this.el.addEventListener("blur",function(n){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},s}();function Hn(s){let e;return{c(){e=re("Okay")},m(t,n){C(t,e,n)},d(t){t&&E(e)}}}function Wn(s){let e,t,n,i,r,o,a,l,c,u,f;return n=new Mn({props:{dice:s[0]}}),c=new Ie({props:{btnType:"terminal-option",$$slots:{default:[Hn]},$$scope:{ctx:s}}}),c.$on("click",s[3]),{c(){e=S("div"),t=S("div"),U(n.$$.fragment),i=M(),r=S("div"),o=S("p"),a=M(),l=S("div"),U(c.$$.fragment),m(t,"class","dice-wrapper svelte-5p87ss"),m(o,"id","dice-terminal-text"),m(r,"class","terminal-text svelte-5p87ss"),m(l,"class","terminal-btn svelte-5p87ss"),m(e,"class","dice-terminal svelte-5p87ss")},m(p,y){C(p,e,y),v(e,t),L(n,t,null),v(e,i),v(e,r),v(r,o),o.innerHTML=s[2],v(e,a),v(e,l),L(c,l,null),f=!0},p(p,[y]){const h={};y&1&&(h.dice=p[0]),n.$set(h);const d={};y&2048&&(d.$$scope={dirty:y,ctx:p}),c.$set(d)},i(p){f||(k(n.$$.fragment,p),k(c.$$.fragment,p),p&&F(()=>{f&&(u||(u=Ve(e,Tt,{},!0)),u.run(1))}),f=!0)},o(p){T(n.$$.fragment,p),T(c.$$.fragment,p),p&&(u||(u=Ve(e,Tt,{},!1)),u.run(0)),f=!1},d(p){p&&E(e),V(n),V(c),p&&u&&u.end()}}}function Yn(s,e,t){let n,i=x,r=()=>(i(),i=ke(c,d=>t(7,n=d)),c),o,a;K(s,ie,d=>t(8,o=d)),K(s,ne,d=>t(9,a=d)),s.$$.on_destroy.push(()=>i());let{dice:l}=e,{currentGameState:c}=e;r();let{playerStat:u}=e,{statThreshold:f}=e,p=Dn({player:y(),dice:l,stat:u,threshold:f});ct(()=>{new it("#dice-terminal-text",{strings:p,typeSpeed:20,backSpeed:10,backDelay:2e3})});function y(){return n.playingAs==="male"?a:o}function h(){c.set({...n,showDiceTerminal:!1}),B.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}return s.$$set=d=>{"dice"in d&&t(0,l=d.dice),"currentGameState"in d&&r(t(1,c=d.currentGameState)),"playerStat"in d&&t(4,u=d.playerStat),"statThreshold"in d&&t(5,f=d.statThreshold)},[l,c,p,h,u,f]}class zn extends J{constructor(e){super(),j(this,e,Yn,Wn,z,{dice:0,currentGameState:1,playerStat:4,statThreshold:5})}}const Gn=s=>({}),Bt=s=>({}),Kn=s=>({}),Rt=s=>({});function jn(s){let e,t,n,i;return{c(){e=R("svg"),t=R("circle"),n=R("path"),i=R("path"),m(t,"cx","12"),m(t,"cy","12"),m(t,"r","10"),m(n,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),m(i,"d","M12 17h.01"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(r,o){C(r,e,o),v(e,t),v(e,n),v(e,i)},d(r){r&&E(e)}}}function Jn(s){let e,t,n;return{c(){e=R("svg"),t=R("polyline"),n=R("line"),m(t,"points","4 17 10 11 4 5"),m(n,"x1","12"),m(n,"x2","20"),m(n,"y1","19"),m(n,"y2","19"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(i,r){C(i,e,r),v(e,t),v(e,n)},d(i){i&&E(e)}}}function Xn(s){let e,t,n;return{c(){e=R("svg"),t=R("path"),n=R("circle"),m(t,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),m(n,"cx","12"),m(n,"cy","7"),m(n,"r","4"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(i,r){C(i,e,r),v(e,t),v(e,n)},d(i){i&&E(e)}}}function Qn(s){let e,t,n;return{c(){e=R("svg"),t=R("path"),n=R("path"),m(t,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),m(n,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"class","icon svelte-16xfpde")},m(i,r){C(i,e,r),v(e,t),v(e,n)},d(i){i&&E(e)}}}function Pt(s){let e,t,n,i,r,o,a;const l=s[4].title,c=ze(l,s,s[3],Rt),u=c||Zn(),f=s[4].description,p=ze(f,s,s[3],Bt),y=p||ei();return{c(){e=S("div"),t=S("h2"),u&&u.c(),n=M(),i=S("p"),y&&y.c(),m(t,"class","item-title svelte-16xfpde"),m(i,"class","item-text svelte-16xfpde"),m(e,"class","item-text-wrapper svelte-16xfpde")},m(h,d){C(h,e,d),v(e,t),u&&u.m(t,null),v(e,n),v(e,i),y&&y.m(i,null),a=!0},p(h,d){c&&c.p&&(!a||d&8)&&Ke(c,l,h,h[3],a?Ge(l,h[3],d,Kn):je(h[3]),Rt),p&&p.p&&(!a||d&8)&&Ke(p,f,h,h[3],a?Ge(f,h[3],d,Gn):je(h[3]),Bt)},i(h){a||(k(u,h),k(y,h),h&&F(()=>{a&&(o&&o.end(1),r=ht(e,fe,{duration:500}),r.start())}),a=!0)},o(h){T(u,h),T(y,h),r&&r.invalidate(),h&&(o=Ns(e,fe,{duration:250})),a=!1},d(h){h&&E(e),u&&u.d(h),y&&y.d(h),h&&o&&o.end()}}}function Zn(s){let e;return{c(){e=re("Title")},m(t,n){C(t,e,n)},d(t){t&&E(e)}}}function ei(s){let e;return{c(){e=re("Brief description")},m(t,n){C(t,e,n)},d(t){t&&E(e)}}}function ti(s){let e,t,n,i,r,o;function a(f,p){return f[0]==="seed"?Qn:f[0]==="player"?Xn:f[0]==="terminal"?Jn:jn}let l=a(s),c=l(s),u=!s[2]&&Pt(s);return{c(){e=S("div"),c.c(),t=M(),u&&u.c(),m(e,"class",n="item item-color__"+s[1]+" svelte-16xfpde")},m(f,p){C(f,e,p),c.m(e,null),v(e,t),u&&u.m(e,null),i=!0,r||(o=Ee(e,"click",s[5]),r=!0)},p(f,[p]){l!==(l=a(f))&&(c.d(1),c=l(f),c&&(c.c(),c.m(e,t))),f[2]?u&&(be(),T(u,1,1,()=>{u=null}),_e()):u?(u.p(f,p),p&4&&k(u,1)):(u=Pt(f),u.c(),k(u,1),u.m(e,null)),(!i||p&2&&n!==(n="item item-color__"+f[1]+" svelte-16xfpde"))&&m(e,"class",n)},i(f){i||(k(u),i=!0)},o(f){T(u),i=!1},d(f){f&&E(e),c.d(),u&&u.d(),r=!1,o()}}}function si(s,e,t){let{$$slots:n={},$$scope:i}=e,{iconType:r="unkown"}=e,{color:o="grey"}=e,{collapsed:a=!1}=e;function l(c){Gt.call(this,s,c)}return s.$$set=c=>{"iconType"in c&&t(0,r=c.iconType),"color"in c&&t(1,o=c.color),"collapsed"in c&&t(2,a=c.collapsed),"$$scope"in c&&t(3,i=c.$$scope)},[r,o,a,i,n,l]}class ni extends J{constructor(e){super(),j(this,e,si,ti,z,{iconType:0,color:1,collapsed:2})}}function ii(s){let e;return{c(){e=S("span"),e.textContent="Log",m(e,"slot","title")},m(t,n){C(t,e,n)},p:x,d(t){t&&E(e)}}}function ri(s){let e;return{c(){e=S("span"),e.textContent="View logged messages",m(e,"slot","description")},m(t,n){C(t,e,n)},p:x,d(t){t&&E(e)}}}function oi(s){let e,t,n,i,r,o,a,l,c;return o=new ni({props:{collapsed:!s[0],color:"white",iconType:"terminal",$$slots:{description:[ri],title:[ii]},$$scope:{ctx:s}}}),o.$on("click",s[3]),{c(){e=S("div"),t=R("svg"),n=R("path"),i=R("path"),r=M(),U(o.$$.fragment),m(n,"d","M19 15V9"),m(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),m(t,"class","icon collapse-icon svelte-1tpwflx"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 24 24"),Q(t,"rotate",!s[0]),m(e,"class","sidebar svelte-1tpwflx"),Q(e,"sidebar-collapsed",!s[0]),Q(e,"sidebar-expanded",s[0])},m(u,f){C(u,e,f),v(e,t),v(t,n),v(t,i),v(e,r),L(o,e,null),a=!0,l||(c=Ee(t,"click",s[2]),l=!0)},p(u,[f]){(!a||f&1)&&Q(t,"rotate",!u[0]);const p={};f&1&&(p.collapsed=!u[0]),f&16&&(p.$$scope={dirty:f,ctx:u}),o.$set(p),(!a||f&1)&&Q(e,"sidebar-collapsed",!u[0]),(!a||f&1)&&Q(e,"sidebar-expanded",u[0])},i(u){a||(k(o.$$.fragment,u),a=!0)},o(u){T(o.$$.fragment,u),a=!1},d(u){u&&E(e),V(o),l=!1,c()}}}function ai(s,e,t){let{sidebarExpanded:n=!0}=e;const i=Ts(),r=()=>i("toggle-sidebar"),o=()=>i("select","log");return s.$$set=a=>{"sidebarExpanded"in a&&t(0,n=a.sidebarExpanded)},[n,i,r,o]}class li extends J{constructor(e){super(),j(this,e,ai,oi,z,{sidebarExpanded:0})}}class ci{constructor(e,t){de(this,"numOfSides");de(this,"imgUrl");this.numOfSides=e,this.imgUrl=t}roll(){return Math.ceil(Math.random()*this.numOfSides)}}let ui=new ci(8,"d8-dice.png");function $t(s){let e,t;return e=new zn({props:{currentGameState:s[1],dice:s[8],playerStat:s[6],statThreshold:s[7]}}),{c(){U(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&2&&(r.currentGameState=n[1]),i&64&&(r.playerStat=n[6]),i&128&&(r.statThreshold=n[7]),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Lt(s){let e,t;return e=new Ie({props:{btnType:"terminal-option",disabled:s[4].option1Disabled,$$slots:{default:[fi]},$$scope:{ctx:s}}}),e.$on("click",s[13]),{c(){U(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&16&&(r.disabled=n[4].option1Disabled),i&4194320&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function fi(s){let e=s[4].option1+"",t;return{c(){t=re(e)},m(n,i){C(n,t,i)},p(n,i){i&16&&e!==(e=n[4].option1+"")&&lt(t,e)},d(n){n&&E(t)}}}function Vt(s){let e,t;return e=new Ie({props:{btnType:"terminal-option",disabled:s[4].option2Disabled,$$slots:{default:[hi]},$$scope:{ctx:s}}}),e.$on("click",s[14]),{c(){U(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&16&&(r.disabled=n[4].option2Disabled),i&4194320&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function hi(s){let e=s[4].option2+"",t;return{c(){t=re(e)},m(n,i){C(n,t,i)},p(n,i){i&16&&e!==(e=n[4].option2+"")&&lt(t,e)},d(n){n&&E(t)}}}function qt(s){let e,t;return e=new Ie({props:{btnType:"terminal-option",disabled:s[4].option3Disabled,$$slots:{default:[pi]},$$scope:{ctx:s}}}),e.$on("click",s[15]),{c(){U(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&16&&(r.disabled=n[4].option3Disabled),i&4194320&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function pi(s){let e=s[4].option3+"",t;return{c(){t=re(e)},m(n,i){C(n,t,i)},p(n,i){i&16&&e!==(e=n[4].option3+"")&&lt(t,e)},d(n){n&&E(t)}}}function It(s){let e,t,n;return{c(){e=S("input"),m(e,"type","text"),m(e,"maxlength","20"),m(e,"class","terminal-input svelte-f49isc")},m(i,r){C(i,e,r),vt(e,s[5]),t||(n=[Ee(e,"input",s[16]),Ee(e,"input",s[10])],t=!0)},p(i,r){r&32&&e.value!==i[5]&&vt(e,i[5])},d(i){i&&E(e),t=!1,ee(n)}}}function di(s){let e,t,n,i,r,o,a,l,c,u,f,p,y=s[3].showDiceTerminal&&$t(s),h=s[4].option1Visible&&Lt(s),d=s[4].option2Visible&&Vt(s),g=s[4].option3Visible&&qt(s),_=s[4].inputVisible&&It(s);return{c(){e=S("div"),t=S("div"),n=S("p"),i=M(),y&&y.c(),r=M(),o=S("div"),h&&h.c(),a=M(),d&&d.c(),l=M(),g&&g.c(),c=M(),_&&_.c(),m(n,"id","terminal-text"),m(n,"class","svelte-f49isc"),m(t,"class","terminal-screen svelte-f49isc"),m(o,"class","terminal-option-flex-group"),m(e,"class",u="terminal terminal__"+s[0]+" svelte-f49isc")},m(b,O){C(b,e,O),v(e,t),v(t,n),v(t,i),y&&y.m(t,null),v(e,r),v(e,o),h&&h.m(o,null),v(o,a),d&&d.m(o,null),v(o,l),g&&g.m(o,null),v(o,c),_&&_.m(o,null),p=!0},p(b,[O]){b[3].showDiceTerminal?y?(y.p(b,O),O&8&&k(y,1)):(y=$t(b),y.c(),k(y,1),y.m(t,null)):y&&(be(),T(y,1,1,()=>{y=null}),_e()),b[4].option1Visible?h?(h.p(b,O),O&16&&k(h,1)):(h=Lt(b),h.c(),k(h,1),h.m(o,a)):h&&(be(),T(h,1,1,()=>{h=null}),_e()),b[4].option2Visible?d?(d.p(b,O),O&16&&k(d,1)):(d=Vt(b),d.c(),k(d,1),d.m(o,l)):d&&(be(),T(d,1,1,()=>{d=null}),_e()),b[4].option3Visible?g?(g.p(b,O),O&16&&k(g,1)):(g=qt(b),g.c(),k(g,1),g.m(o,c)):g&&(be(),T(g,1,1,()=>{g=null}),_e()),b[4].inputVisible?_?_.p(b,O):(_=It(b),_.c(),_.m(o,null)):_&&(_.d(1),_=null),(!p||O&1&&u!==(u="terminal terminal__"+b[0]+" svelte-f49isc"))&&m(e,"class",u)},i(b){p||(k(y),k(h),k(d),k(g),b&&F(()=>{p&&(f||(f=Ve(e,fe,{duration:1e3},!0)),f.run(1))}),p=!0)},o(b){T(y),T(h),T(d),T(g),b&&(f||(f=Ve(e,fe,{duration:1e3},!1)),f.run(0)),p=!1},d(b){b&&E(e),y&&y.d(),h&&h.d(),d&&d.d(),g&&g.d(),_&&_.d(),b&&f&&f.end()}}}function mi(s,e,t){let n,i=x,r=()=>(i(),i=ke(h,A=>t(3,n=A)),h),o,a,l,c,u,f=x,p=()=>(f(),f=ke(d,A=>t(4,u=A)),d);K(s,P,A=>t(11,o=A)),K(s,Nn,A=>t(12,a=A)),K(s,ie,A=>t(18,l=A)),K(s,ne,A=>t(19,c=A)),s.$$.on_destroy.push(()=>i()),s.$$.on_destroy.push(()=>f());let{terminalColor:y="grey"}=e,{currentGameState:h}=e;r();let{dialogueOptions:d}=e;p();let g,_="",b=xt({chapter:a,part:o,player:bt()}),O=ui,G,te=0;ct(()=>{g=new it("#terminal-text",{strings:b,typeSpeed:20})});function X(A,_i=!1){xn(a,o,A),g.destroy(),g=new it("#terminal-text",{strings:xt({chapter:a,part:o,player:bt(),optionSelected:A}),typeSpeed:20,backSpeed:10,backDelay:2e3})}function bt(){return n.playingAs==="male"?c:l}function ls(){(a==="lobby"&&o==="3"||o==="3-again")&&(n.playingAs==="male"?D.emit("set-male-player-name",_.trim()):D.emit("set-female-player-name",_.trim()))}const cs=()=>X(1),us=()=>X(2),fs=()=>X(3);function hs(){_=this.value,t(5,_)}return s.$$set=A=>{"terminalColor"in A&&t(0,y=A.terminalColor),"currentGameState"in A&&r(t(1,h=A.currentGameState)),"dialogueOptions"in A&&p(t(2,d=A.dialogueOptions))},s.$$.update=()=>{s.$$.dirty&6172&&n.bothPlayersJoined&&a==="lobby"&&o==="1"&&d.set({...u,option1Disabled:!1,option1:"Ready"}),s.$$.dirty&6152&&n.goToChapter6&&a==="lobby"&&o==="5"&&X(0),s.$$.dirty&6152&&n.goToChapter6&&a==="lobby"&&o==="5"&&X(0),s.$$.dirty&6144&&a==="lobby"&&o==="12"&&(t(6,G="defense"),t(7,te=7))},[y,h,d,n,u,_,G,te,O,X,ls,o,a,cs,us,fs,hs]}class yi extends J{constructor(e){super(),j(this,e,mi,di,z,{terminalColor:0,currentGameState:1,dialogueOptions:2})}}function gi(s){let e,t,n;return t=new Vn({}),{c(){e=S("main"),U(t.$$.fragment),m(e,"class","main-content svelte-kn45eq")},m(i,r){C(i,e,r),L(t,e,null),n=!0},p:x,i(i){n||(k(t.$$.fragment,i),n=!0)},o(i){T(t.$$.fragment,i),n=!1},d(i){i&&E(e),V(t)}}}class bi extends J{constructor(e){super(),j(this,e,null,gi,z,{})}}new bi({target:document.getElementById("app")});
