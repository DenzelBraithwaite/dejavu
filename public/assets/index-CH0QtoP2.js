var cs=Object.defineProperty;var ls=(s,e,t)=>e in s?cs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var he=(s,e,t)=>ls(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function B(){}const st=s=>s;function us(s,e){for(const t in e)s[t]=e[t];return s}function Vt(s){return s()}function yt(){return Object.create(null)}function Q(s){s.forEach(Vt)}function ve(s){return typeof s=="function"}function Y(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function fs(s){return Object.keys(s).length===0}function Pe(s,...e){if(s==null){for(const n of e)n(void 0);return B}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Z(s){let e;return Pe(s,t=>e=t)(),e}function G(s,e,t){s.$$.on_destroy.push(Pe(e,t))}function He(s,e,t,n){if(s){const i=qt(s,e,t,n);return s[0](i)}}function qt(s,e,t,n){return s[1]&&n?us(t.ctx.slice(),s[1](n(e))):t.ctx}function We(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=e.dirty[a]|i[a];return r}return e.dirty|i}return e.dirty}function Ye(s,e,t,n,i,r){if(i){const o=qt(e,t,n,r);s.p(o,i)}}function ze(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function gt(s,e,t){return s.set(t),e}function hs(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const It=typeof window<"u";let nt=It?()=>window.performance.now():()=>Date.now(),it=It?s=>requestAnimationFrame(s):B;const ce=new Set;function Mt(s){ce.forEach(e=>{e.c(s)||(ce.delete(e),e.f())}),ce.size!==0&&it(Mt)}function rt(s){let e;return ce.size===0&&it(Mt),{promise:new Promise(t=>{ce.add(e={c:s,f:t})}),abort(){ce.delete(e)}}}function w(s,e){s.appendChild(e)}function Ft(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function ps(s){const e=C("style");return e.textContent="/* empty */",ds(Ft(s),e),e.sheet}function ds(s,e){return w(s.head||s,e),e.sheet}function O(s,e,t){s.insertBefore(e,t||null)}function T(s){s.parentNode&&s.parentNode.removeChild(s)}function C(s){return document.createElement(s)}function D(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ne(s){return document.createTextNode(s)}function I(){return ne(" ")}function _e(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function p(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function ms(s){return Array.from(s.childNodes)}function ot(s,e){e=""+e,s.data!==e&&(s.data=e)}function bt(s,e){s.value=e??""}function J(s,e,t){s.classList.toggle(e,!!t)}function Ut(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}const xe=new Map;let Be=0;function ys(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function gs(s,e){const t={stylesheet:ps(e),rules:{}};return xe.set(s,t),t}function De(s,e,t,n,i,r,o,a=0){const c=16.666/n;let l=`{
`;for(let g=0;g<=1;g+=c){const v=e+(t-e)*r(g);l+=g*100+`%{${o(v,1-v)}}
`}const u=l+`100% {${o(t,1-t)}}
}`,f=`__svelte_${ys(u)}_${a}`,d=Ft(s),{stylesheet:y,rules:h}=xe.get(d)||gs(d,s);h[f]||(h[f]=!0,y.insertRule(`@keyframes ${f} ${u}`,y.cssRules.length));const m=s.style.animation||"";return s.style.animation=`${m?`${m}, `:""}${f} ${n}ms linear ${i}ms 1 both`,Be+=1,f}function Re(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),Be-=i,Be||bs())}function bs(){it(()=>{Be||(xe.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&T(e)}),xe.clear())})}let we;function be(s){we=s}function Ht(){if(!we)throw new Error("Function called outside component initialization");return we}function at(s){Ht().$$.on_mount.push(s)}function _s(){const s=Ht();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const r=Ut(e,t,{cancelable:n});return i.slice().forEach(o=>{o.call(s,r)}),!r.defaultPrevented}return!0}}function Wt(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const ae=[],_t=[];let le=[];const wt=[],ws=Promise.resolve();let Ge=!1;function vs(){Ge||(Ge=!0,ws.then(Yt))}function H(s){le.push(s)}const Ie=new Set;let re=0;function Yt(){if(re!==0)return;const s=we;do{try{for(;re<ae.length;){const e=ae[re];re++,be(e),ks(e.$$)}}catch(e){throw ae.length=0,re=0,e}for(be(null),ae.length=0,re=0;_t.length;)_t.pop()();for(let e=0;e<le.length;e+=1){const t=le[e];Ie.has(t)||(Ie.add(t),t())}le.length=0}while(ae.length);for(;wt.length;)wt.pop()();Ge=!1,Ie.clear(),be(s)}function ks(s){if(s.fragment!==null){s.update(),Q(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(H)}}function Es(s){const e=[],t=[];le.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),le=e}let pe;function ct(){return pe||(pe=Promise.resolve(),pe.then(()=>{pe=null})),pe}function ee(s,e,t){s.dispatchEvent(Ut(`${e?"intro":"outro"}${t}`))}const Se=new Set;let F;function me(){F={r:0,c:[],p:F}}function ye(){F.r||Q(F.c),F=F.p}function k(s,e){s&&s.i&&(Se.delete(s),s.i(e))}function S(s,e,t,n){if(s&&s.o){if(Se.has(s))return;Se.add(s),F.c.push(()=>{Se.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const lt={duration:0};function ut(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,o,a,c=0;function l(){o&&Re(s,o)}function u(){const{delay:d=0,duration:y=300,easing:h=st,tick:m=B,css:g}=i||lt;g&&(o=De(s,0,1,y,d,h,g,c++)),m(0,1);const v=nt()+d,b=v+y;a&&a.abort(),r=!0,H(()=>ee(s,!0,"start")),a=rt(E=>{if(r){if(E>=b)return m(1,0),ee(s,!0,"end"),l(),r=!1;if(E>=v){const z=h((E-v)/y);m(z,1-z)}}return r})}let f=!1;return{start(){f||(f=!0,Re(s),ve(i)?(i=i(n),ct().then(u)):u())},invalidate(){f=!1},end(){r&&(l(),r=!1)}}}function Ts(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,o;const a=F;a.r+=1;let c;function l(){const{delay:u=0,duration:f=300,easing:d=st,tick:y=B,css:h}=i||lt;h&&(o=De(s,1,0,f,u,d,h));const m=nt()+u,g=m+f;H(()=>ee(s,!1,"start")),"inert"in s&&(c=s.inert,s.inert=!0),rt(v=>{if(r){if(v>=g)return y(0,1),ee(s,!1,"end"),--a.r||Q(a.c),!1;if(v>=m){const b=d((v-m)/f);y(1-b,b)}}return r})}return ve(i)?ct().then(()=>{i=i(n),l()}):l(),{end(u){u&&"inert"in s&&(s.inert=c),u&&i.tick&&i.tick(1,0),r&&(o&&Re(s,o),r=!1)}}}function vt(s,e,t,n){let r=e(s,t,{direction:"both"}),o=n?0:1,a=null,c=null,l=null,u;function f(){l&&Re(s,l)}function d(h,m){const g=h.b-o;return m*=Math.abs(g),{a:o,b:h.b,d:g,duration:m,start:h.start,end:h.start+m,group:h.group}}function y(h){const{delay:m=0,duration:g=300,easing:v=st,tick:b=B,css:E}=r||lt,z={start:nt()+m,b:h};h||(z.group=F,F.r+=1),"inert"in s&&(h?u!==void 0&&(s.inert=u):(u=s.inert,s.inert=!0)),a||c?c=z:(E&&(f(),l=De(s,o,h,g,m,v,E)),h&&b(0,1),a=d(z,g),H(()=>ee(s,h,"start")),rt(ie=>{if(c&&ie>c.start&&(a=d(c,g),c=null,ee(s,a.b,"start"),E&&(f(),l=De(s,o,a.b,a.duration,0,v,r.css))),a){if(ie>=a.end)b(o=a.b,1-o),ee(s,a.b,"end"),c||(a.b?f():--a.group.r||Q(a.group.c)),a=null;else if(ie>=a.start){const qe=ie-a.start;o=a.a+a.d*v(qe/a.duration),b(o,1-o)}}return!!(a||c)}))}return{run(h){ve(r)?ct().then(()=>{r=r({direction:h?"in":"out"}),y(h)}):y(h)},end(){f(),a=c=null}}}function M(s){s&&s.c()}function L(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),H(()=>{const r=s.$$.on_mount.map(Vt).filter(ve);s.$$.on_destroy?s.$$.on_destroy.push(...r):Q(r),s.$$.on_mount=[]}),i.forEach(H)}function V(s,e){const t=s.$$;t.fragment!==null&&(Es(t.after_update),Q(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ss(s,e){s.$$.dirty[0]===-1&&(ae.push(s),vs(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function K(s,e,t,n,i,r,o=null,a=[-1]){const c=we;be(s);const l=s.$$={fragment:null,ctx:[],props:r,update:B,not_equal:i,bound:yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:yt(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=t?t(s,e.props||{},(f,d,...y)=>{const h=y.length?y[0]:d;return l.ctx&&i(l.ctx[f],l.ctx[f]=h)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](h),u&&Ss(s,f)),d}):[],l.update(),u=!0,Q(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const f=ms(e.target);l.fragment&&l.fragment.l(f),f.forEach(T)}else l.fragment&&l.fragment.c();e.intro&&k(s.$$.fragment),L(s,e.target,e.anchor),Yt()}be(c)}class j{constructor(){he(this,"$$");he(this,"$$set")}$destroy(){V(this,1),this.$destroy=B}$on(e,t){if(!ve(t))return B;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!fs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Cs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Cs);function Os(s){let e,t,n,i,r;const o=s[3].default,a=He(o,s,s[2],null);return{c(){e=C("button"),a&&a.c(),p(e,"class",t="btn "+s[0]+" svelte-1utwdw0"),e.disabled=s[1]},m(c,l){O(c,e,l),a&&a.m(e,null),n=!0,i||(r=_e(e,"click",s[4]),i=!0)},p(c,[l]){a&&a.p&&(!n||l&4)&&Ye(a,o,c,c[2],n?We(o,c[2],l,null):ze(c[2]),null),(!n||l&1&&t!==(t="btn "+c[0]+" svelte-1utwdw0"))&&p(e,"class",t),(!n||l&2)&&(e.disabled=c[1])},i(c){n||(k(a,c),n=!0)},o(c){S(a,c),n=!1},d(c){c&&T(e),a&&a.d(c),i=!1,r()}}}function As(s,e,t){let{$$slots:n={},$$scope:i}=e,{btnType:r="terminal-option"}=e,{disabled:o=!1}=e;function a(c){Wt.call(this,s,c)}return s.$$set=c=>{"btnType"in c&&t(0,r=c.btnType),"disabled"in c&&t(1,o=c.disabled),"$$scope"in c&&t(2,i=c.$$scope)},[r,o,i,n,a]}class $e extends j{constructor(e){super(),K(this,e,As,Os,Y,{btnType:0,disabled:1})}}function Ns(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function ue(s,{delay:e=0,duration:t=400,easing:n=Ns,amount:i=5,opacity:r=0}={}){const o=getComputedStyle(s),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-r),[u,f]=hs(i);return{delay:e,duration:t,easing:n,css:(d,y)=>`opacity: ${a-l*y}; filter: ${c} blur(${y*u}${f});`}}const W=Object.create(null);W.open="0";W.close="1";W.ping="2";W.pong="3";W.message="4";W.upgrade="5";W.noop="6";const Ce=Object.create(null);Object.keys(W).forEach(s=>{Ce[W[s]]=s});const Ke={type:"error",data:"parser error"},zt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Gt=typeof ArrayBuffer=="function",Kt=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ft=({type:s,data:e},t,n)=>zt&&e instanceof Blob?t?n(e):kt(e,n):Gt&&(e instanceof ArrayBuffer||Kt(e))?t?n(e):kt(new Blob([e]),n):n(W[s]+(e||"")),kt=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Et(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Me;function xs(s,e){if(zt&&s.data instanceof Blob)return s.data.arrayBuffer().then(Et).then(e);if(Gt&&(s.data instanceof ArrayBuffer||Kt(s.data)))return e(Et(s.data));ft(s,!1,t=>{Me||(Me=new TextEncoder),e(Me.encode(t))})}const Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Tt.length;s++)ge[Tt.charCodeAt(s)]=s;const Bs=s=>{let e=s.length*.75,t=s.length,n,i=0,r,o,a,c;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(n=0;n<t;n+=4)r=ge[s.charCodeAt(n)],o=ge[s.charCodeAt(n+1)],a=ge[s.charCodeAt(n+2)],c=ge[s.charCodeAt(n+3)],u[i++]=r<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},Ds=typeof ArrayBuffer=="function",ht=(s,e)=>{if(typeof s!="string")return{type:"message",data:jt(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Rs(s.substring(1),e)}:Ce[t]?s.length>1?{type:Ce[t],data:s.substring(1)}:{type:Ce[t]}:Ke},Rs=(s,e)=>{if(Ds){const t=Bs(s);return jt(t,e)}else return{base64:!0,data:s}},jt=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Jt="",Ps=(s,e)=>{const t=s.length,n=new Array(t);let i=0;s.forEach((r,o)=>{ft(r,!1,a=>{n[o]=a,++i===t&&e(n.join(Jt))})})},$s=(s,e)=>{const t=s.split(Jt),n=[];for(let i=0;i<t.length;i++){const r=ht(t[i],e);if(n.push(r),r.type==="error")break}return n};function Ls(){return new TransformStream({transform(s,e){xs(s,t=>{const n=t.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Fe;function Ee(s){return s.reduce((e,t)=>e+t.length,0)}function Te(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)t[i]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function Vs(s,e){Fe||(Fe=new TextDecoder);const t=[];let n=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(n===0){if(Ee(t)<1)break;const c=Te(t,1);r=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Ee(t)<2)break;const c=Te(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Ee(t)<8)break;const c=Te(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Ke);break}i=u*Math.pow(2,32)+l.getUint32(4),n=3}else{if(Ee(t)<i)break;const c=Te(t,i);a.enqueue(ht(r?c:Fe.decode(c),e)),n=0}if(i===0||i>s){a.enqueue(Ke);break}}}})}const Xt=4;function A(s){if(s)return qs(s)}function qs(s){for(var e in A.prototype)s[e]=A.prototype[e];return s}A.prototype.on=A.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};A.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};A.prototype.off=A.prototype.removeListener=A.prototype.removeAllListeners=A.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,i=0;i<t.length;i++)if(n=t[i],n===e||n.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+s],this};A.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,i=t.length;n<i;++n)t[n].apply(this,e)}return this};A.prototype.emitReserved=A.prototype.emit;A.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};A.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Le=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Is="arraybuffer";function Qt(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const Ms=$.setTimeout,Fs=$.clearTimeout;function Ve(s,e){e.useNativeTimers?(s.setTimeoutFn=Ms.bind($),s.clearTimeoutFn=Fs.bind($)):(s.setTimeoutFn=$.setTimeout.bind($),s.clearTimeoutFn=$.clearTimeout.bind($))}const Us=1.33;function Hs(s){return typeof s=="string"?Ws(s):Math.ceil((s.byteLength||s.size)*Us)}function Ws(s){let e=0,t=0;for(let n=0,i=s.length;n<i;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Zt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ys(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function zs(s){let e={},t=s.split("&");for(let n=0,i=t.length;n<i;n++){let r=t[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class Gs extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class pt extends A{constructor(e){super(),this.writable=!1,Ve(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Gs(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ht(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Ys(e);return t.length?"?"+t:""}}class Ks extends pt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};$s(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ps(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Zt()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let es=!1;try{es=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const js=es;function Js(){}class Xs extends Ks{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class U extends A{constructor(e,t,n){super(),this.createRequest=e,Ve(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Qt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=U.requestsCount++,U.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Js,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete U.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}U.requestsCount=0;U.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",St);else if(typeof addEventListener=="function"){const s="onpagehide"in $?"pagehide":"unload";addEventListener(s,St,!1)}}function St(){for(let s in U.requests)U.requests.hasOwnProperty(s)&&U.requests[s].abort()}const Qs=function(){const s=ts({xdomain:!1});return s&&s.responseType!==null}();class Zs extends Xs{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Qs&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new U(ts,this.uri(),e)}}function ts(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||js))return new XMLHttpRequest}catch{}if(!e)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ss=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class en extends pt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=ss?{}:Qt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;ft(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}i&&Le(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Zt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ue=$.WebSocket||$.MozWebSocket;class tn extends en{createSocket(e,t,n){return ss?new Ue(e,t,n):t?new Ue(e,t):new Ue(e)}doWrite(e,t){this.ws.send(t)}}class sn extends pt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Vs(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=Ls();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(({done:a,value:c})=>{a||(this.onPacket(c),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then(()=>{i&&Le(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const nn={websocket:tn,webtransport:sn,polling:Zs},rn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,on=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function je(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let i=rn.exec(s||""),r={},o=14;for(;o--;)r[on[o]]=i[o]||"";return t!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=an(r,r.path),r.queryKey=cn(r,r.query),r}function an(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function cn(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,r){i&&(t[i]=r)}),t}const Je=typeof addEventListener=="function"&&typeof removeEventListener=="function",Oe=[];Je&&addEventListener("offline",()=>{Oe.forEach(s=>s())},!1);class X extends A{constructor(e,t){if(super(),this.binaryType=Is,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=je(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=je(t.host).host);Ve(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zs(this.opts.query)),Je&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Oe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Xt,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&X.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",X.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=Hs(i)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Le(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if(typeof t=="function"&&(i=t,t=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(X.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Je&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Oe.indexOf(this._offlineEventListener);n!==-1&&Oe.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}X.protocol=Xt;class ln extends X{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;X.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;X.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function r(){n||(n=!0,u(),t.close(),t=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=t.name,r(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function c(){o("socket closed")}function l(f){t&&f.name!==t.name&&r()}const u=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let un=class extends ln{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>nn[i]).filter(i=>!!i)),super(e,n)}};function fn(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=je(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}const hn=typeof ArrayBuffer=="function",pn=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,ns=Object.prototype.toString,dn=typeof Blob=="function"||typeof Blob<"u"&&ns.call(Blob)==="[object BlobConstructor]",mn=typeof File=="function"||typeof File<"u"&&ns.call(File)==="[object FileConstructor]";function dt(s){return hn&&(s instanceof ArrayBuffer||pn(s))||dn&&s instanceof Blob||mn&&s instanceof File}function Ae(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(Ae(s[t]))return!0;return!1}if(dt(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return Ae(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&Ae(s[t]))return!0;return!1}function yn(s){const e=[],t=s.data,n=s;return n.data=Xe(t,e),n.attachments=e.length,{packet:n,buffers:e}}function Xe(s,e){if(!s)return s;if(dt(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=Xe(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=Xe(s[n],e));return t}return s}function gn(s,e){return s.data=Qe(s.data,e),delete s.attachments,s}function Qe(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=Qe(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=Qe(s[t],e));return s}const bn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_n=5;var _;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(_||(_={}));class wn{constructor(e){this.replacer=e}encode(e){return(e.type===_.EVENT||e.type===_.ACK)&&Ae(e)?this.encodeAsBinary({type:e.type===_.EVENT?_.BINARY_EVENT:_.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===_.BINARY_EVENT||e.type===_.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=yn(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function Ct(s){return Object.prototype.toString.call(s)==="[object Object]"}class mt extends A{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===_.BINARY_EVENT;n||t.type===_.BINARY_ACK?(t.type=n?_.EVENT:_.ACK,this.reconstructor=new vn(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(dt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(_[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===_.BINARY_EVENT||n.type===_.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(r,t)}else n.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(mt.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case _.CONNECT:return Ct(t);case _.DISCONNECT:return t===void 0;case _.CONNECT_ERROR:return typeof t=="string"||Ct(t);case _.EVENT:case _.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&bn.indexOf(t[0])===-1);case _.ACK:case _.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=gn(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const kn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:mt,Encoder:wn,get PacketType(){return _},protocol:_n},Symbol.toStringTag,{value:"Module"}));function q(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const En=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class is extends A{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[q(e,"open",this.onopen.bind(this)),q(e,"packet",this.onpacket.bind(this)),q(e,"error",this.onerror.bind(this)),q(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,i,r;if(En.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:_.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,f=t.pop();this._registerAckCallback(u,f),o.id=u}const a=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,i)=>{const r=(o,a)=>o?i(o):n(a);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:_.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case _.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _.EVENT:case _.BINARY_EVENT:this.onevent(e);break;case _.ACK:case _.BINARY_ACK:this.onack(e);break;case _.DISCONNECT:this.ondisconnect();break;case _.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:_.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function fe(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}fe.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};fe.prototype.reset=function(){this.attempts=0};fe.prototype.setMin=function(s){this.ms=s};fe.prototype.setMax=function(s){this.max=s};fe.prototype.setJitter=function(s){this.jitter=s};class Ze extends A{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Ve(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new fe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||kn;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new un(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=q(t,"open",function(){n.onopen(),e&&e()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=q(t,"error",r);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(q(e,"ping",this.onping.bind(this)),q(e,"data",this.ondata.bind(this)),q(e,"error",this.onerror.bind(this)),q(e,"close",this.onclose.bind(this)),q(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Le(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new is(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const de={};function Ne(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=fn(s,e.path||"/socket.io"),n=t.source,i=t.id,r=t.path,o=de[i]&&r in de[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new Ze(n,e):(de[i]||(de[i]=new Ze(n,e)),c=de[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(Ne,{Manager:Ze,Socket:is,io:Ne,connect:Ne});const x=Ne("http://10.3.112.75:6912"),oe=[];function ke(s,e=B){let t;const n=new Set;function i(a){if(Y(s,a)&&(s=a,t)){const c=!oe.length;for(const l of n)l[1](),oe.push(l,s);if(c){for(let l=0;l<oe.length;l+=2)oe[l][0](oe[l+1]);oe.length=0}}}function r(a){i(a(s))}function o(a,c=B){const l=[a,c];return n.add(l),n.size===1&&(t=e(i,r)||B),a(s),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}const te=ke({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:20,health:20,strength:10,defense:12,speed:6,intellect:7,charisma:6},statusEffects:[],inventory:[]}),se=ke({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:18,health:18,strength:7,defense:6,speed:9,intellect:12,charisma:10},statusEffects:[],inventory:[]}),P=ke({playingAs:"",bothPlayersJoined:!1,chapter5NumOfReadyPlayers:0,chapter11NumOfReadyPlayers:0,showDiceTerminal:!1});function Tn(s){let e,t,n,i;return t=new fi({props:{currentGameState:P,dialogueOptions:s[0],terminalColor:"grey"}}),{c(){e=C("div"),M(t.$$.fragment),p(e,"class","main-content svelte-abemhi")},m(r,o){O(r,e,o),L(t,e,null),i=!0},p(r,[o]){const a={};o&1&&(a.dialogueOptions=r[0]),t.$set(a)},i(r){i||(k(t.$$.fragment,r),r&&(n||H(()=>{n=ut(e,ue,{}),n.start()})),i=!0)},o(r){S(t.$$.fragment,r),i=!1},d(r){r&&T(e),V(t)}}}function Sn(s,e,t){let n,i,r;G(s,se,a=>t(1,n=a)),G(s,te,a=>t(2,i=a)),G(s,P,a=>t(3,r=a));let o={option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1};return at(()=>{x.on("connect",()=>{x.emit("frontend-mounted"),console.log(`User ID: ${x.id} connected!`)}),x.on("playing-as",a=>{x.id===a.socketID&&a.playerCount===1&&P.set({...r,playingAs:"male"}),x.id===a.socketID&&a.playerCount===2&&P.set({...r,playingAs:"female"}),console.log("Playing as "+r.playingAs),console.log("Socket.id = "+x.id),console.log("data.socketID = "+a.socketID)}),x.on("connect_error",a=>console.error("Connection error:",a)),x.on("p2-joined",()=>P.set({...r,bothPlayersJoined:!0})),x.on("set-users",a=>{Object.entries(a).forEach(([c,l])=>{te.update(u=>(u.id=a.p1,u)),se.update(u=>(u.id=a.p2,u))})}),x.on("5-player-ready",()=>{P.set({...r,chapter5NumOfReadyPlayers:gt(P,r.chapter5NumOfReadyPlayers+=1,r)}),r.chapter5NumOfReadyPlayers===2&&t(0,o={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("11-player-ready",()=>{P.set({...r,chapter11NumOfReadyPlayers:gt(P,r.chapter11NumOfReadyPlayers+=1,r)}),r.chapter11NumOfReadyPlayers===2&&t(0,o={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),x.on("set-male-player-name",a=>te.set({...i,name:a||"Peasant Boy"})),x.on("set-female-player-name",a=>se.set({...n,name:a||"Peasant Girl"})),x.emit("client-ready")}),[o]}class Cn extends j{constructor(e){super(),K(this,e,Sn,Tn,Y,{})}}function On(s){let e,t,n,i,r,o,a;return t=new ni({props:{sidebarExpanded:s[0]}}),t.$on("select",s[1]),t.$on("toggle-sidebar",s[2]),r=new Cn({}),{c(){e=C("div"),M(t.$$.fragment),n=I(),i=C("div"),M(r.$$.fragment),p(i,"class","screen svelte-kvlyqv"),p(e,"class","client svelte-kvlyqv"),J(e,"client-collapsed",!s[0])},m(c,l){O(c,e,l),L(t,e,null),w(e,n),w(e,i),L(r,i,null),a=!0},p(c,[l]){const u={};l&1&&(u.sidebarExpanded=c[0]),t.$set(u),(!a||l&1)&&J(e,"client-collapsed",!c[0])},i(c){a||(k(t.$$.fragment,c),k(r.$$.fragment,c),c&&(o||H(()=>{o=ut(e,ue,{duration:2e3}),o.start()})),a=!0)},o(c){S(t.$$.fragment,c),S(r.$$.fragment,c),a=!1},d(c){c&&T(e),V(t),V(r)}}}function An(s,e,t){let n=!1;function i(o){o.detail}return[n,i,()=>t(0,n=!n)]}class Nn extends j{constructor(e){super(),K(this,e,An,On,Y,{})}}function xn(s){let e,t;return{c(){e=C("div"),p(e,"class",t="dice dice-d"+s[0].numOfSides+" svelte-w3nifx"),p(e,"role","img"),p(e,"aria-label","One 4-sided dice")},m(n,i){O(n,e,i)},p(n,[i]){i&1&&t!==(t="dice dice-d"+n[0].numOfSides+" svelte-w3nifx")&&p(e,"class",t)},i:B,o:B,d(n){n&&T(e)}}}function Bn(s,e,t){let{dice:n}=e;return s.$$set=i=>{"dice"in i&&t(0,n=i.dice)},[n]}class Dn extends j{constructor(e){super(),K(this,e,Bn,xn,Y,{dice:0})}}function et(){return et=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},et.apply(this,arguments)}var Rn={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(s){},onComplete:function(s){},preStringTyped:function(s,e){},onStringTyped:function(s,e){},onLastStringBackspaced:function(s){},onTypingPaused:function(s,e){},onTypingResumed:function(s,e){},onReset:function(s){},onStop:function(s,e){},onStart:function(s,e){},onDestroy:function(s){}},Pn=new(function(){function s(){}var e=s.prototype;return e.load=function(t,n,i){if(t.el=typeof i=="string"?document.querySelector(i):i,t.options=et({},Rn,n),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(l){return l.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)t.strings.push(r[a].innerHTML.trim())}for(var c in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[c]=c;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var n="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+n+"]")){var i=document.createElement("style");i.setAttribute(n,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(t){var n="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+n+"]")){var i=document.createElement("style");i.setAttribute(n,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},s}()),Ot=new(function(){function s(){}var e=s.prototype;return e.typeHtmlChars=function(t,n,i){if(i.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";t.substring(n+1).charAt(0)!==o&&!(1+ ++n>t.length););n++}return n},e.backSpaceHtmlChars=function(t,n,i){if(i.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";t.substring(n-1).charAt(0)!==o&&!(--n<0););n--}return n},s}()),tt=function(){function s(t,n){Pn.load(this,n,t),this.begin()}var e=s.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,n){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){n=Ot.typeHtmlChars(t,n,i);var a=0,c=t.substring(n);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,a=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),t=t.substring(0,n)+t.substring(n+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;t.substring(n+o).charAt(0)!=="`"&&(o++,!(n+o>t.length)););var u=t.substring(0,n),f=t.substring(u.length+1,n+o),d=t.substring(n+o+1);t=u+f+d,o--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),n>=t.length?i.doneTyping(t,n):i.keepTyping(t,n,o),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},r):this.setPauseStatus(t,n,!0)},e.keepTyping=function(t,n,i){n===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,n+=i);this.replaceText(r),this.typewrite(t,n)},e.doneTyping=function(t,n){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(t,n)},this.backDelay))},e.backspace=function(t,n){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){n=Ot.backSpaceHtmlChars(t,n,i);var o=t.substring(0,n);if(i.replaceText(o),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&o===a.substring(0,n)?n:0}n>i.stopNum?(n--,i.backspace(t,n)):n<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],n))},r)}else this.setPauseStatus(t,n,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,n,i){this.pause.typewrite=i,this.pause.curString=t,this.pause.curStrPos=n},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(n){t.stop()}),this.el.addEventListener("blur",function(n){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},s}();const $n=ke("lobby"),R=ke("1");function Ln(s,e,t=0){let n={};if(s==="lobby")switch(e){case"1":R.set("2"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"2":R.set("3"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0};break;case"3":case"3-again":R.set("4"),n={option1Visible:!0,option1Disabled:!1,option1:"Yes",option2Visible:!0,option2Disabled:!1,option2:"No",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"4":t===1?(R.set("5"),x.emit("5-player-ready"),n={option1Visible:!0,option1Disabled:!0,option1:"Waiting",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1}):t===2&&(R.set("3-again"),n={option1Visible:!0,option1Disabled:!1,option1:"Next But For Real This Time",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0});break;case"5":R.set("6"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"6":R.set("7"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"7":R.set("8"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"8":R.set("9"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"9":R.set("10"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"10":R.set("11"),x.emit("11-player-ready"),n={option1Visible:!0,option1Disabled:!0,option1:"Waiting for your dead weight teammate",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"11":R.set("12"),P.set({...Z(P),showDiceTerminal:!0}),n={option1Visible:!0,option1Disabled:!!Z(P).showDiceTerminal,option1:Z(P).showDiceTerminal?"Disabled During Demo":"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break;case"12":R.set("13"),n={option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1};break}return n}function At(s={player:{}}){s.optionSelected=s.optionSelected??0;let e=["Something went wrong... This text should not display."];if(s.chapter==="lobby")switch(s.part){case"1":e=["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."];break;case"2":e=["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"];break;case"3":e=["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."];break;case"3-again":e=["Oh good, I was hoping I didn't hear that correctly. What did you say your name actually was?"];break;case"4":e=[`You're name is... ${s.player.name}?`];break;case"5":e=["Great! Not the name of course, the fact that you're ready. When both of you are ready the button below will say 'Next', that means you're both ready to move forward."];break;case"6":e=[`Good, now let me introduce the two of you to each other. First we have ${Z(te).name}${Z(te).id===s.player.id?"(you)":""} playing as the male character. Next, we have ${Z(se).name}${Z(se).id===s.player.id?"(you)":""} playing as the female role.`];break;case"7":e=["Next, I'll explain the mechanics of the game. This game is more like an interactive multiplayer story with some DND elements. The only actions you'll be performing are selecting answers below (like 'Next') and rolling dice to decide outcomes. Select 'Next' to learn how dice rolling works."];break;case"8":e=["Each player controls a unique character, these characters have different stats.",`For instance these are your character stats:
          <br> Name: ${s.player.name}
          <br> Gender: ${s.player.gender}
          <br> Health: ${s.player.stats.maxHealth}
          <br> Strength: ${s.player.stats.strength}
          <br> Defense: ${s.player.stats.defense}
          <br> Speed: ${s.player.stats.speed}
          <br> Intellect: ${s.player.stats.intellect}
          <br> Charisma: ${s.player.stats.charisma}
          `];break;case"9":e=["These stats play a crucial role when it comes to events. Events are things that happen that require dice rolls or decisions to be made. For example, someone blocks your path and you need to roll for charisma. You need to push a heavy box so you roll for strength. Something falls on you so you roll for defense."];break;case"10":e=["When you roll, your base stat is added to the dice roll and that final number determines the outcome of the situation. If you're charisma is too low, you won't convince the person. Strength too low means you can't push that box. If your defense is too low you your health stat will suffer when something hurts you."];break;case"11":e=["When you're both ready, we'll move on and practice some dice rolls so you grasp the core mechanics of the game."];break;case"12":e=["Waiting for dice window to close."];break;case"13":e=["That was a quick example of a dice role..."];break}return e}function Vn(s={player:{}}){const e=s.player.stats[s.stat],t=s.dice.roll(),n=e+t,i=n-s.threshold>=0,r=i?"You were successful":"You were unsuccessful";return[`You are rolling a <span class="color-blue">d-${s.dice.numOfSides}</span> dice for your <span class="color-blue">${s.stat}</span> stat. You need at least a <span class="color-blue">${s.threshold}</span>. You roll the dice and get a <span class="color-blue">${t}</span>, your base stat is <span class="color-pink">${e}</span> for a total of <span class="color-blue stat-roll-result">${n}</span>. <span class="color-${i?"green":"red"}">${r}</span>`]}function qn(s){let e;return{c(){e=ne("Okay")},m(t,n){O(t,e,n)},d(t){t&&T(e)}}}function In(s){let e,t,n,i,r,o,a,c,l,u;return n=new Dn({props:{dice:s[0]}}),l=new $e({props:{btnType:"terminal-option",$$slots:{default:[qn]},$$scope:{ctx:s}}}),l.$on("click",s[3]),{c(){e=C("div"),t=C("div"),M(n.$$.fragment),i=I(),r=C("div"),o=C("p"),a=I(),c=C("div"),M(l.$$.fragment),p(t,"class","dice-wrapper svelte-5p87ss"),p(o,"id","dice-terminal-text"),p(r,"class","terminal-text svelte-5p87ss"),p(c,"class","terminal-btn svelte-5p87ss"),p(e,"class","dice-terminal svelte-5p87ss")},m(f,d){O(f,e,d),w(e,t),L(n,t,null),w(e,i),w(e,r),w(r,o),o.innerHTML=s[2],w(e,a),w(e,c),L(l,c,null),u=!0},p(f,[d]){const y={};d&1&&(y.dice=f[0]),n.$set(y);const h={};d&2048&&(h.$$scope={dirty:d,ctx:f}),l.$set(h)},i(f){u||(k(n.$$.fragment,f),k(l.$$.fragment,f),u=!0)},o(f){S(n.$$.fragment,f),S(l.$$.fragment,f),u=!1},d(f){f&&T(e),V(n),V(l)}}}function Mn(s,e,t){let n,i=B,r=()=>(i(),i=Pe(l,m=>t(7,n=m)),l),o,a;G(s,se,m=>t(8,o=m)),G(s,te,m=>t(9,a=m)),s.$$.on_destroy.push(()=>i());let{dice:c}=e,{currentGameState:l}=e;r();let{playerStat:u}=e,{statThreshold:f}=e,d=Vn({player:y(),dice:c,stat:u,threshold:f});at(()=>{new tt("#dice-terminal-text",{strings:d,typeSpeed:20,backSpeed:10,backDelay:2e3})});function y(){return n.playingAs==="male"?a:o}function h(){console.log("clicked"),l.set({...n,showDiceTerminal:!1})}return s.$$set=m=>{"dice"in m&&t(0,c=m.dice),"currentGameState"in m&&r(t(1,l=m.currentGameState)),"playerStat"in m&&t(4,u=m.playerStat),"statThreshold"in m&&t(5,f=m.statThreshold)},[c,l,d,h,u,f]}class Fn extends j{constructor(e){super(),K(this,e,Mn,In,Y,{dice:0,currentGameState:1,playerStat:4,statThreshold:5})}}const Un=s=>({}),Nt=s=>({}),Hn=s=>({}),xt=s=>({});function Wn(s){let e,t,n,i;return{c(){e=D("svg"),t=D("circle"),n=D("path"),i=D("path"),p(t,"cx","12"),p(t,"cy","12"),p(t,"r","10"),p(n,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),p(i,"d","M12 17h.01"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(r,o){O(r,e,o),w(e,t),w(e,n),w(e,i)},d(r){r&&T(e)}}}function Yn(s){let e,t,n;return{c(){e=D("svg"),t=D("polyline"),n=D("line"),p(t,"points","4 17 10 11 4 5"),p(n,"x1","12"),p(n,"x2","20"),p(n,"y1","19"),p(n,"y2","19"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(i,r){O(i,e,r),w(e,t),w(e,n)},d(i){i&&T(e)}}}function zn(s){let e,t,n;return{c(){e=D("svg"),t=D("path"),n=D("circle"),p(t,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),p(n,"cx","12"),p(n,"cy","7"),p(n,"r","4"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(i,r){O(i,e,r),w(e,t),w(e,n)},d(i){i&&T(e)}}}function Gn(s){let e,t,n;return{c(){e=D("svg"),t=D("path"),n=D("path"),p(t,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),p(n,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"class","icon svelte-16xfpde")},m(i,r){O(i,e,r),w(e,t),w(e,n)},d(i){i&&T(e)}}}function Bt(s){let e,t,n,i,r,o,a;const c=s[4].title,l=He(c,s,s[3],xt),u=l||Kn(),f=s[4].description,d=He(f,s,s[3],Nt),y=d||jn();return{c(){e=C("div"),t=C("h2"),u&&u.c(),n=I(),i=C("p"),y&&y.c(),p(t,"class","item-title svelte-16xfpde"),p(i,"class","item-text svelte-16xfpde"),p(e,"class","item-text-wrapper svelte-16xfpde")},m(h,m){O(h,e,m),w(e,t),u&&u.m(t,null),w(e,n),w(e,i),y&&y.m(i,null),a=!0},p(h,m){l&&l.p&&(!a||m&8)&&Ye(l,c,h,h[3],a?We(c,h[3],m,Hn):ze(h[3]),xt),d&&d.p&&(!a||m&8)&&Ye(d,f,h,h[3],a?We(f,h[3],m,Un):ze(h[3]),Nt)},i(h){a||(k(u,h),k(y,h),h&&H(()=>{a&&(o&&o.end(1),r=ut(e,ue,{duration:500}),r.start())}),a=!0)},o(h){S(u,h),S(y,h),r&&r.invalidate(),h&&(o=Ts(e,ue,{duration:250})),a=!1},d(h){h&&T(e),u&&u.d(h),y&&y.d(h),h&&o&&o.end()}}}function Kn(s){let e;return{c(){e=ne("Title")},m(t,n){O(t,e,n)},d(t){t&&T(e)}}}function jn(s){let e;return{c(){e=ne("Brief description")},m(t,n){O(t,e,n)},d(t){t&&T(e)}}}function Jn(s){let e,t,n,i,r,o;function a(f,d){return f[0]==="seed"?Gn:f[0]==="player"?zn:f[0]==="terminal"?Yn:Wn}let c=a(s),l=c(s),u=!s[2]&&Bt(s);return{c(){e=C("div"),l.c(),t=I(),u&&u.c(),p(e,"class",n="item item-color__"+s[1]+" svelte-16xfpde")},m(f,d){O(f,e,d),l.m(e,null),w(e,t),u&&u.m(e,null),i=!0,r||(o=_e(e,"click",s[5]),r=!0)},p(f,[d]){c!==(c=a(f))&&(l.d(1),l=c(f),l&&(l.c(),l.m(e,t))),f[2]?u&&(me(),S(u,1,1,()=>{u=null}),ye()):u?(u.p(f,d),d&4&&k(u,1)):(u=Bt(f),u.c(),k(u,1),u.m(e,null)),(!i||d&2&&n!==(n="item item-color__"+f[1]+" svelte-16xfpde"))&&p(e,"class",n)},i(f){i||(k(u),i=!0)},o(f){S(u),i=!1},d(f){f&&T(e),l.d(),u&&u.d(),r=!1,o()}}}function Xn(s,e,t){let{$$slots:n={},$$scope:i}=e,{iconType:r="unkown"}=e,{color:o="grey"}=e,{collapsed:a=!1}=e;function c(l){Wt.call(this,s,l)}return s.$$set=l=>{"iconType"in l&&t(0,r=l.iconType),"color"in l&&t(1,o=l.color),"collapsed"in l&&t(2,a=l.collapsed),"$$scope"in l&&t(3,i=l.$$scope)},[r,o,a,i,n,c]}class Qn extends j{constructor(e){super(),K(this,e,Xn,Jn,Y,{iconType:0,color:1,collapsed:2})}}function Zn(s){let e;return{c(){e=C("span"),e.textContent="Log",p(e,"slot","title")},m(t,n){O(t,e,n)},p:B,d(t){t&&T(e)}}}function ei(s){let e;return{c(){e=C("span"),e.textContent="View logged messages",p(e,"slot","description")},m(t,n){O(t,e,n)},p:B,d(t){t&&T(e)}}}function ti(s){let e,t,n,i,r,o,a,c,l;return o=new Qn({props:{collapsed:!s[0],color:"white",iconType:"terminal",$$slots:{description:[ei],title:[Zn]},$$scope:{ctx:s}}}),o.$on("click",s[3]),{c(){e=C("div"),t=D("svg"),n=D("path"),i=D("path"),r=I(),M(o.$$.fragment),p(n,"d","M19 15V9"),p(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),p(t,"class","icon collapse-icon svelte-1tpwflx"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"viewBox","0 0 24 24"),J(t,"rotate",!s[0]),p(e,"class","sidebar svelte-1tpwflx"),J(e,"sidebar-collapsed",!s[0]),J(e,"sidebar-expanded",s[0])},m(u,f){O(u,e,f),w(e,t),w(t,n),w(t,i),w(e,r),L(o,e,null),a=!0,c||(l=_e(t,"click",s[2]),c=!0)},p(u,[f]){(!a||f&1)&&J(t,"rotate",!u[0]);const d={};f&1&&(d.collapsed=!u[0]),f&16&&(d.$$scope={dirty:f,ctx:u}),o.$set(d),(!a||f&1)&&J(e,"sidebar-collapsed",!u[0]),(!a||f&1)&&J(e,"sidebar-expanded",u[0])},i(u){a||(k(o.$$.fragment,u),a=!0)},o(u){S(o.$$.fragment,u),a=!1},d(u){u&&T(e),V(o),c=!1,l()}}}function si(s,e,t){let{sidebarExpanded:n=!0}=e;const i=_s(),r=()=>i("toggle-sidebar"),o=()=>i("select","log");return s.$$set=a=>{"sidebarExpanded"in a&&t(0,n=a.sidebarExpanded)},[n,i,r,o]}class ni extends j{constructor(e){super(),K(this,e,si,ti,Y,{sidebarExpanded:0})}}class ii{constructor(e,t){he(this,"numOfSides");he(this,"imgUrl");this.numOfSides=e,this.imgUrl=t}roll(){return Math.ceil(Math.random()*this.numOfSides)}}let ri=new ii(8,"d8-dice.png");function Dt(s){let e,t;return e=new Fn({props:{currentGameState:s[2],dice:s[7],playerStat:s[5],statThreshold:s[6]}}),{c(){M(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&4&&(r.currentGameState=n[2]),i&32&&(r.playerStat=n[5]),i&64&&(r.statThreshold=n[6]),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Rt(s){let e,t;return e=new $e({props:{btnType:"terminal-option",disabled:s[0].option1Disabled,$$slots:{default:[oi]},$$scope:{ctx:s}}}),e.$on("click",s[12]),{c(){M(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.disabled=n[0].option1Disabled),i&2097153&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function oi(s){let e=s[0].option1+"",t;return{c(){t=ne(e)},m(n,i){O(n,t,i)},p(n,i){i&1&&e!==(e=n[0].option1+"")&&ot(t,e)},d(n){n&&T(t)}}}function Pt(s){let e,t;return e=new $e({props:{btnType:"terminal-option",disabled:s[0].option2Disabled,$$slots:{default:[ai]},$$scope:{ctx:s}}}),e.$on("click",s[13]),{c(){M(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.disabled=n[0].option2Disabled),i&2097153&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function ai(s){let e=s[0].option2+"",t;return{c(){t=ne(e)},m(n,i){O(n,t,i)},p(n,i){i&1&&e!==(e=n[0].option2+"")&&ot(t,e)},d(n){n&&T(t)}}}function $t(s){let e,t;return e=new $e({props:{btnType:"terminal-option",disabled:s[0].option3Disabled,$$slots:{default:[ci]},$$scope:{ctx:s}}}),e.$on("click",s[14]),{c(){M(e.$$.fragment)},m(n,i){L(e,n,i),t=!0},p(n,i){const r={};i&1&&(r.disabled=n[0].option3Disabled),i&2097153&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function ci(s){let e=s[0].option3+"",t;return{c(){t=ne(e)},m(n,i){O(n,t,i)},p(n,i){i&1&&e!==(e=n[0].option3+"")&&ot(t,e)},d(n){n&&T(t)}}}function Lt(s){let e,t,n;return{c(){e=C("input"),p(e,"type","text"),p(e,"maxlength","20"),p(e,"class","terminal-input svelte-f49isc")},m(i,r){O(i,e,r),bt(e,s[4]),t||(n=[_e(e,"input",s[15]),_e(e,"input",s[9])],t=!0)},p(i,r){r&16&&e.value!==i[4]&&bt(e,i[4])},d(i){i&&T(e),t=!1,Q(n)}}}function li(s){let e,t,n,i,r,o,a,c,l,u,f,d,y=s[3].showDiceTerminal&&Dt(s),h=s[0].option1Visible&&Rt(s),m=s[0].option2Visible&&Pt(s),g=s[0].option3Visible&&$t(s),v=s[0].inputVisible&&Lt(s);return{c(){e=C("div"),t=C("div"),n=C("p"),i=I(),y&&y.c(),r=I(),o=C("div"),h&&h.c(),a=I(),m&&m.c(),c=I(),g&&g.c(),l=I(),v&&v.c(),p(n,"id","terminal-text"),p(n,"class","svelte-f49isc"),p(t,"class","terminal-screen svelte-f49isc"),p(o,"class","terminal-option-flex-group"),p(e,"class",u="terminal terminal__"+s[1]+" svelte-f49isc")},m(b,E){O(b,e,E),w(e,t),w(t,n),w(t,i),y&&y.m(t,null),w(e,r),w(e,o),h&&h.m(o,null),w(o,a),m&&m.m(o,null),w(o,c),g&&g.m(o,null),w(o,l),v&&v.m(o,null),d=!0},p(b,[E]){b[3].showDiceTerminal?y?(y.p(b,E),E&8&&k(y,1)):(y=Dt(b),y.c(),k(y,1),y.m(t,null)):y&&(me(),S(y,1,1,()=>{y=null}),ye()),b[0].option1Visible?h?(h.p(b,E),E&1&&k(h,1)):(h=Rt(b),h.c(),k(h,1),h.m(o,a)):h&&(me(),S(h,1,1,()=>{h=null}),ye()),b[0].option2Visible?m?(m.p(b,E),E&1&&k(m,1)):(m=Pt(b),m.c(),k(m,1),m.m(o,c)):m&&(me(),S(m,1,1,()=>{m=null}),ye()),b[0].option3Visible?g?(g.p(b,E),E&1&&k(g,1)):(g=$t(b),g.c(),k(g,1),g.m(o,l)):g&&(me(),S(g,1,1,()=>{g=null}),ye()),b[0].inputVisible?v?v.p(b,E):(v=Lt(b),v.c(),v.m(o,null)):v&&(v.d(1),v=null),(!d||E&2&&u!==(u="terminal terminal__"+b[1]+" svelte-f49isc"))&&p(e,"class",u)},i(b){d||(k(y),k(h),k(m),k(g),b&&H(()=>{d&&(f||(f=vt(e,ue,{duration:1e3},!0)),f.run(1))}),d=!0)},o(b){S(y),S(h),S(m),S(g),b&&(f||(f=vt(e,ue,{duration:1e3},!1)),f.run(0)),d=!1},d(b){b&&T(e),y&&y.d(),h&&h.d(),m&&m.d(),g&&g.d(),v&&v.d(),b&&f&&f.end()}}}function ui(s,e,t){let n,i=B,r=()=>(i(),i=Pe(f,N=>t(3,n=N)),f),o,a,c,l;G(s,R,N=>t(10,o=N)),G(s,$n,N=>t(11,a=N)),G(s,se,N=>t(17,c=N)),G(s,te,N=>t(18,l=N)),s.$$.on_destroy.push(()=>i());let{terminalColor:u="grey"}=e,{currentGameState:f}=e;r();let{dialogueOptions:d}=e,y,h="",m=At({chapter:a,part:o,player:z()}),g=ri,v,b=0;at(()=>{y=new tt("#terminal-text",{strings:m,typeSpeed:20})});function E(N,di=!1){t(0,d=Ln(a,o,N)),y.destroy(),y=new tt("#terminal-text",{strings:At({chapter:a,part:o,player:z(),optionSelected:N}),typeSpeed:20,backSpeed:10,backDelay:2e3})}function z(){return n.playingAs==="male"?l:c}function ie(){(a==="lobby"&&o==="3"||o==="3-again")&&(n.playingAs==="male"?x.emit("set-male-player-name",h.trim()):x.emit("set-female-player-name",h.trim()))}const qe=()=>E(1),rs=()=>E(2),os=()=>E(3);function as(){h=this.value,t(4,h)}return s.$$set=N=>{"terminalColor"in N&&t(1,u=N.terminalColor),"currentGameState"in N&&r(t(2,f=N.currentGameState)),"dialogueOptions"in N&&t(0,d=N.dialogueOptions)},s.$$.update=()=>{s.$$.dirty&3080&&n.bothPlayersJoined&&a==="lobby"&&o==="1"&&(t(0,d.option1Disabled=!1,d),t(0,d.option1="Ready",d)),s.$$.dirty&3080&&n.goToChapter6&&a==="lobby"&&o==="5"&&E(0),s.$$.dirty&3080&&n.goToChapter6&&a==="lobby"&&o==="5"&&E(0),s.$$.dirty&1024&&o==="12"&&(t(5,v="defense"),t(6,b=7))},[d,u,f,n,h,v,b,g,E,ie,o,a,qe,rs,os,as]}class fi extends j{constructor(e){super(),K(this,e,ui,li,Y,{terminalColor:1,currentGameState:2,dialogueOptions:0})}}function hi(s){let e,t,n;return t=new Nn({}),{c(){e=C("main"),M(t.$$.fragment),p(e,"class","main-content svelte-kn45eq")},m(i,r){O(i,e,r),L(t,e,null),n=!0},p:B,i(i){n||(k(t.$$.fragment,i),n=!0)},o(i){S(t.$$.fragment,i),n=!1},d(i){i&&T(e),V(t)}}}class pi extends j{constructor(e){super(),K(this,e,null,hi,Y,{})}}new pi({target:document.getElementById("app")});
