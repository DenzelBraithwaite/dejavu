var bs=Object.defineProperty;var ws=(s,e,t)=>e in s?bs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var we=(s,e,t)=>ws(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function $(){}const Ue=s=>s;function _s(s,e){for(const t in e)s[t]=e[t];return s}function Ht(s){return s()}function kt(){return Object.create(null)}function le(s){s.forEach(Ht)}function Be(s){return typeof s=="function"}function te(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}function vs(s){return Object.keys(s).length===0}function Ce(s,...e){if(s==null){for(const n of e)n(void 0);return $}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function F(s){let e;return Ce(s,t=>e=t)(),e}function X(s,e,t){s.$$.on_destroy.push(Ce(e,t))}function Xe(s,e,t,n){if(s){const i=jt(s,e,t,n);return s[0](i)}}function jt(s,e,t,n){return s[1]&&n?_s(t.ctx.slice(),s[1](n(e))):t.ctx}function Qe(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],a=Math.max(e.dirty.length,i.length);for(let o=0;o<a;o+=1)r[o]=e.dirty[o]|i[o];return r}return e.dirty|i}return e.dirty}function Ze(s,e,t,n,i,r){if(i){const a=jt(e,t,n,r);s.p(a,i)}}function et(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Tt(s,e,t){return s.set(t),e}function ks(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const Wt=typeof window<"u";let ct=Wt?()=>window.performance.now():()=>Date.now(),ht=Wt?s=>requestAnimationFrame(s):$;const pe=new Set;function zt(s){pe.forEach(e=>{e.c(s)||(pe.delete(e),e.f())}),pe.size!==0&&ht(zt)}function ft(s){let e;return pe.size===0&&ht(zt),{promise:new Promise(t=>{pe.add(e={c:s,f:t})}),abort(){pe.delete(e)}}}function g(s,e){s.appendChild(e)}function Gt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Ts(s){const e=A("style");return e.textContent="/* empty */",Es(Gt(s),e),e.sheet}function Es(s,e){return g(s.head||s,e),e.sheet}function x(s,e,t){s.insertBefore(e,t||null)}function D(s){s.parentNode&&s.parentNode.removeChild(s)}function A(s){return document.createElement(s)}function Y(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function G(s){return document.createTextNode(s)}function U(){return G(" ")}function Ae(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function d(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Ss(s){return Array.from(s.childNodes)}function De(s,e){e=""+e,s.data!==e&&(s.data=e)}function Et(s,e){s.value=e??""}function oe(s,e,t){s.classList.toggle(e,!!t)}function Kt(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}const Ie=new Map;let qe=0;function Cs(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function As(s,e){const t={stylesheet:Ts(e),rules:{}};return Ie.set(s,t),t}function Me(s,e,t,n,i,r,a,o=0){const l=16.666/n;let u=`{
`;for(let T=0;T<=1;T+=l){const k=e+(t-e)*r(T);u+=T*100+`%{${a(k,1-k)}}
`}const c=u+`100% {${a(t,1-t)}}
}`,h=`__svelte_${Cs(c)}_${o}`,f=Gt(s),{stylesheet:m,rules:p}=Ie.get(f)||As(f,s);p[h]||(p[h]=!0,m.insertRule(`@keyframes ${h} ${c}`,m.cssRules.length));const y=s.style.animation||"";return s.style.animation=`${y?`${y}, `:""}${h} ${n}ms linear ${i}ms 1 both`,qe+=1,h}function Fe(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),qe-=i,qe||Ds())}function Ds(){ht(()=>{qe||(Ie.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&D(e)}),Ie.clear())})}let Oe;function Se(s){Oe=s}function Jt(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function dt(s){Jt().$$.on_mount.push(s)}function Os(){const s=Jt();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const r=Kt(e,t,{cancelable:n});return i.slice().forEach(a=>{a.call(s,r)}),!r.defaultPrevented}return!0}}function Xt(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const de=[],St=[];let ye=[];const Ct=[],Bs=Promise.resolve();let tt=!1;function Ns(){tt||(tt=!0,Bs.then(Qt))}function K(s){ye.push(s)}const ze=new Set;let he=0;function Qt(){if(he!==0)return;const s=Oe;do{try{for(;he<de.length;){const e=de[he];he++,Se(e),Rs(e.$$)}}catch(e){throw de.length=0,he=0,e}for(Se(null),de.length=0,he=0;St.length;)St.pop()();for(let e=0;e<ye.length;e+=1){const t=ye[e];ze.has(t)||(ze.add(t),t())}ye.length=0}while(de.length);for(;Ct.length;)Ct.pop()();tt=!1,ze.clear(),Se(s)}function Rs(s){if(s.fragment!==null){s.update(),le(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(K)}}function xs(s){const e=[],t=[];ye.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ye=e}let _e;function pt(){return _e||(_e=Promise.resolve(),_e.then(()=>{_e=null})),_e}function ue(s,e,t){s.dispatchEvent(Kt(`${e?"intro":"outro"}${t}`))}const xe=new Set;let Q;function ke(){Q={r:0,c:[],p:Q}}function Te(){Q.r||le(Q.c),Q=Q.p}function v(s,e){s&&s.i&&(xe.delete(s),s.i(e))}function B(s,e,t,n){if(s&&s.o){if(xe.has(s))return;xe.add(s),Q.c.push(()=>{xe.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const yt={duration:0};function mt(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,a,o,l=0;function u(){a&&Fe(s,a)}function c(){const{delay:f=0,duration:m=300,easing:p=Ue,tick:y=$,css:T}=i||yt;T&&(a=Me(s,0,1,m,f,p,T,l++)),y(0,1);const k=ct()+f,P=k+m;o&&o.abort(),r=!0,K(()=>ue(s,!0,"start")),o=ft(_=>{if(r){if(_>=P)return y(1,0),ue(s,!0,"end"),u(),r=!1;if(_>=k){const E=p((_-k)/m);y(E,1-E)}}return r})}let h=!1;return{start(){h||(h=!0,Fe(s),Be(i)?(i=i(n),pt().then(c)):c())},invalidate(){h=!1},end(){r&&(u(),r=!1)}}}function Ps(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,a;const o=Q;o.r+=1;let l;function u(){const{delay:c=0,duration:h=300,easing:f=Ue,tick:m=$,css:p}=i||yt;p&&(a=Me(s,1,0,h,c,f,p));const y=ct()+c,T=y+h;K(()=>ue(s,!1,"start")),"inert"in s&&(l=s.inert,s.inert=!0),ft(k=>{if(r){if(k>=T)return m(0,1),ue(s,!1,"end"),--o.r||le(o.c),!1;if(k>=y){const P=f((k-y)/h);m(1-P,P)}}return r})}return Be(i)?pt().then(()=>{i=i(n),u()}):u(),{end(c){c&&"inert"in s&&(s.inert=l),c&&i.tick&&i.tick(1,0),r&&(a&&Fe(s,a),r=!1)}}}function Ye(s,e,t,n){let r=e(s,t,{direction:"both"}),a=n?0:1,o=null,l=null,u=null,c;function h(){u&&Fe(s,u)}function f(p,y){const T=p.b-a;return y*=Math.abs(T),{a,b:p.b,d:T,duration:y,start:p.start,end:p.start+y,group:p.group}}function m(p){const{delay:y=0,duration:T=300,easing:k=Ue,tick:P=$,css:_}=r||yt,E={start:ct()+y,b:p};p||(E.group=Q,Q.r+=1),"inert"in s&&(p?c!==void 0&&(s.inert=c):(c=s.inert,s.inert=!0)),o||l?l=E:(_&&(h(),u=Me(s,a,p,T,y,k,_)),p&&P(0,1),o=f(E,T),K(()=>ue(s,p,"start")),ft(C=>{if(l&&C>l.start&&(o=f(l,T),l=null,ue(s,o.b,"start"),_&&(h(),u=Me(s,a,o.b,o.duration,0,k,r.css))),o){if(C>=o.end)P(a=o.b,1-a),ue(s,o.b,"end"),l||(o.b?h():--o.group.r||le(o.group.c)),o=null;else if(C>=o.start){const O=C-o.start;a=o.a+o.d*k(O/o.duration),P(a,1-a)}}return!!(o||l)}))}return{run(p){Be(r)?pt().then(()=>{r=r({direction:p?"in":"out"}),m(p)}):m(p)},end(){h(),o=l=null}}}function J(s){s&&s.c()}function j(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),K(()=>{const r=s.$$.on_mount.map(Ht).filter(Be);s.$$.on_destroy?s.$$.on_destroy.push(...r):le(r),s.$$.on_mount=[]}),i.forEach(K)}function W(s,e){const t=s.$$;t.fragment!==null&&(xs(t.after_update),le(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Vs(s,e){s.$$.dirty[0]===-1&&(de.push(s),Ns(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ie(s,e,t,n,i,r,a=null,o=[-1]){const l=Oe;Se(s);const u=s.$$={fragment:null,ctx:[],props:r,update:$,not_equal:i,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:kt(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=t?t(s,e.props||{},(h,f,...m)=>{const p=m.length?m[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=p)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](p),c&&Vs(s,h)),f}):[],u.update(),c=!0,le(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const h=Ss(e.target);u.fragment&&u.fragment.l(h),h.forEach(D)}else u.fragment&&u.fragment.c();e.intro&&v(s.$$.fragment),j(s,e.target,e.anchor),Qt()}Se(l)}class re{constructor(){we(this,"$$");we(this,"$$set")}$destroy(){W(this,1),this.$destroy=$}$on(e,t){if(!Be(t))return $;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!vs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ls="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ls);function $s(s){let e,t,n,i,r;const a=s[3].default,o=Xe(a,s,s[2],null);return{c(){e=A("button"),o&&o.c(),d(e,"class",t="btn "+s[0]+" svelte-1utwdw0"),e.disabled=s[1]},m(l,u){x(l,e,u),o&&o.m(e,null),n=!0,i||(r=Ae(e,"click",s[4]),i=!0)},p(l,[u]){o&&o.p&&(!n||u&4)&&Ze(o,a,l,l[2],n?Qe(a,l[2],u,null):et(l[2]),null),(!n||u&1&&t!==(t="btn "+l[0]+" svelte-1utwdw0"))&&d(e,"class",t),(!n||u&2)&&(e.disabled=l[1])},i(l){n||(v(o,l),n=!0)},o(l){B(o,l),n=!1},d(l){l&&D(e),o&&o.d(l),i=!1,r()}}}function Is(s,e,t){let{$$slots:n={},$$scope:i}=e,{btnType:r="terminal-option"}=e,{disabled:a=!1}=e;function o(l){Xt.call(this,s,l)}return s.$$set=l=>{"btnType"in l&&t(0,r=l.btnType),"disabled"in l&&t(1,a=l.disabled),"$$scope"in l&&t(2,i=l.$$scope)},[r,a,i,n,o]}class He extends re{constructor(e){super(),ie(this,e,Is,$s,te,{btnType:0,disabled:1})}}function qs(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function me(s,{delay:e=0,duration:t=400,easing:n=qs,amount:i=5,opacity:r=0}={}){const a=getComputedStyle(s),o=+a.opacity,l=a.filter==="none"?"":a.filter,u=o*(1-r),[c,h]=ks(i);return{delay:e,duration:t,easing:n,css:(f,m)=>`opacity: ${o-u*m}; filter: ${l} blur(${m*c}${h});`}}function At(s,{delay:e=0,duration:t=400,easing:n=Ue}={}){const i=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:r=>`opacity: ${r*i}`}}const ee=Object.create(null);ee.open="0";ee.close="1";ee.ping="2";ee.pong="3";ee.message="4";ee.upgrade="5";ee.noop="6";const Pe=Object.create(null);Object.keys(ee).forEach(s=>{Pe[ee[s]]=s});const st={type:"error",data:"parser error"},Zt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",es=typeof ArrayBuffer=="function",ts=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,gt=({type:s,data:e},t,n)=>Zt&&e instanceof Blob?t?n(e):Dt(e,n):es&&(e instanceof ArrayBuffer||ts(e))?t?n(e):Dt(new Blob([e]),n):n(ee[s]+(e||"")),Dt=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function Ot(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Ge;function Ms(s,e){if(Zt&&s.data instanceof Blob)return s.data.arrayBuffer().then(Ot).then(e);if(es&&(s.data instanceof ArrayBuffer||ts(s.data)))return e(Ot(s.data));gt(s,!1,t=>{Ge||(Ge=new TextEncoder),e(Ge.encode(t))})}const Bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ee=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Bt.length;s++)Ee[Bt.charCodeAt(s)]=s;const Fs=s=>{let e=s.length*.75,t=s.length,n,i=0,r,a,o,l;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const u=new ArrayBuffer(e),c=new Uint8Array(u);for(n=0;n<t;n+=4)r=Ee[s.charCodeAt(n)],a=Ee[s.charCodeAt(n+1)],o=Ee[s.charCodeAt(n+2)],l=Ee[s.charCodeAt(n+3)],c[i++]=r<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return u},Ys=typeof ArrayBuffer=="function",bt=(s,e)=>{if(typeof s!="string")return{type:"message",data:ss(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:Us(s.substring(1),e)}:Pe[t]?s.length>1?{type:Pe[t],data:s.substring(1)}:{type:Pe[t]}:st},Us=(s,e)=>{if(Ys){const t=Fs(s);return ss(t,e)}else return{base64:!0,data:s}},ss=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},ns="",Hs=(s,e)=>{const t=s.length,n=new Array(t);let i=0;s.forEach((r,a)=>{gt(r,!1,o=>{n[a]=o,++i===t&&e(n.join(ns))})})},js=(s,e)=>{const t=s.split(ns),n=[];for(let i=0;i<t.length;i++){const r=bt(t[i],e);if(n.push(r),r.type==="error")break}return n};function Ws(){return new TransformStream({transform(s,e){Ms(s,t=>{const n=t.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Ke;function Ne(s){return s.reduce((e,t)=>e+t.length,0)}function Re(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)t[i]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function zs(s,e){Ke||(Ke=new TextDecoder);const t=[];let n=0,i=-1,r=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(n===0){if(Ne(t)<1)break;const l=Re(t,1);r=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Ne(t)<2)break;const l=Re(t,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Ne(t)<8)break;const l=Re(t,8),u=new DataView(l.buffer,l.byteOffset,l.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){o.enqueue(st);break}i=c*Math.pow(2,32)+u.getUint32(4),n=3}else{if(Ne(t)<i)break;const l=Re(t,i);o.enqueue(bt(r?l:Ke.decode(l),e)),n=0}if(i===0||i>s){o.enqueue(st);break}}}})}const is=4;function L(s){if(s)return Gs(s)}function Gs(s){for(var e in L.prototype)s[e]=L.prototype[e];return s}L.prototype.on=L.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};L.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};L.prototype.off=L.prototype.removeListener=L.prototype.removeAllListeners=L.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,i=0;i<t.length;i++)if(n=t[i],n===e||n.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+s],this};L.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,i=t.length;n<i;++n)t[n].apply(this,e)}return this};L.prototype.emitReserved=L.prototype.emit;L.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};L.prototype.hasListeners=function(s){return!!this.listeners(s).length};const je=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),H=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ks="arraybuffer";function rs(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const Js=H.setTimeout,Xs=H.clearTimeout;function We(s,e){e.useNativeTimers?(s.setTimeoutFn=Js.bind(H),s.clearTimeoutFn=Xs.bind(H)):(s.setTimeoutFn=H.setTimeout.bind(H),s.clearTimeoutFn=H.clearTimeout.bind(H))}const Qs=1.33;function Zs(s){return typeof s=="string"?en(s):Math.ceil((s.byteLength||s.size)*Qs)}function en(s){let e=0,t=0;for(let n=0,i=s.length;n<i;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function os(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function tn(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function sn(s){let e={},t=s.split("&");for(let n=0,i=t.length;n<i;n++){let r=t[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class nn extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class wt extends L{constructor(e){super(),this.writable=!1,We(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new nn(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=bt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=tn(e);return t.length?"?"+t:""}}class rn extends wt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};js(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Hs(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=os()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let as=!1;try{as=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const on=as;function an(){}class ln extends rn{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class Z extends L{constructor(e,t,n){super(),this.createRequest=e,We(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=rs(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Z.requestsCount++,Z.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=an,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Z.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Z.requestsCount=0;Z.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Nt);else if(typeof addEventListener=="function"){const s="onpagehide"in H?"pagehide":"unload";addEventListener(s,Nt,!1)}}function Nt(){for(let s in Z.requests)Z.requests.hasOwnProperty(s)&&Z.requests[s].abort()}const un=function(){const s=ls({xdomain:!1});return s&&s.responseType!==null}();class cn extends ln{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=un&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Z(ls,this.uri(),e)}}function ls(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||on))return new XMLHttpRequest}catch{}if(!e)try{return new H[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const us=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class hn extends wt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=us?{}:rs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;gt(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}i&&je(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=os()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Je=H.WebSocket||H.MozWebSocket;class fn extends hn{createSocket(e,t,n){return us?new Je(e,t,n):t?new Je(e,t):new Je(e)}doWrite(e,t){this.ws.send(t)}}class dn extends wt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=zs(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=Ws();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(({done:o,value:l})=>{o||(this.onPacket(l),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then(()=>{i&&je(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const pn={websocket:fn,webtransport:dn,polling:cn},yn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nt(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let i=yn.exec(s||""),r={},a=14;for(;a--;)r[mn[a]]=i[a]||"";return t!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=gn(r,r.path),r.queryKey=bn(r,r.query),r}function gn(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function bn(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,r){i&&(t[i]=r)}),t}const it=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ve=[];it&&addEventListener("offline",()=>{Ve.forEach(s=>s())},!1);class ae extends L{constructor(e,t){if(super(),this.binaryType=Ks,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=nt(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=nt(t.host).host);We(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=sn(this.opts.query)),it&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ve.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=is,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ae.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ae.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=Zs(i)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,je(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if(typeof t=="function"&&(i=t,t=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(ae.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),it&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ve.indexOf(this._offlineEventListener);n!==-1&&Ve.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ae.protocol=is;class wn extends ae{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;ae.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ae.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=t.name,this.emitReserved("upgradeError",f)}}))};function r(){n||(n=!0,c(),t.close(),t=null)}const a=h=>{const f=new Error("probe error: "+h);f.transport=t.name,r(),this.emitReserved("upgradeError",f)};function o(){a("transport closed")}function l(){a("socket closed")}function u(h){t&&h.name!==t.name&&r()}const c=()=>{t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",o),this.off("close",l),this.off("upgrading",u)};t.once("open",i),t.once("error",a),t.once("close",o),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let _n=class extends wn{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>pn[i]).filter(i=>!!i)),super(e,n)}};function vn(s,e="",t){let n=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),n=nt(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}const kn=typeof ArrayBuffer=="function",Tn=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,cs=Object.prototype.toString,En=typeof Blob=="function"||typeof Blob<"u"&&cs.call(Blob)==="[object BlobConstructor]",Sn=typeof File=="function"||typeof File<"u"&&cs.call(File)==="[object FileConstructor]";function _t(s){return kn&&(s instanceof ArrayBuffer||Tn(s))||En&&s instanceof Blob||Sn&&s instanceof File}function Le(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,n=s.length;t<n;t++)if(Le(s[t]))return!0;return!1}if(_t(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return Le(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&Le(s[t]))return!0;return!1}function Cn(s){const e=[],t=s.data,n=s;return n.data=rt(t,e),n.attachments=e.length,{packet:n,buffers:e}}function rt(s,e){if(!s)return s;if(_t(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=rt(s[n],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=rt(s[n],e));return t}return s}function An(s,e){return s.data=ot(s.data,e),delete s.attachments,s}function ot(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=ot(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=ot(s[t],e));return s}const Dn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],On=5;var b;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(b||(b={}));class Bn{constructor(e){this.replacer=e}encode(e){return(e.type===b.EVENT||e.type===b.ACK)&&Le(e)?this.encodeAsBinary({type:e.type===b.EVENT?b.BINARY_EVENT:b.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===b.BINARY_EVENT||e.type===b.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Cn(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function Rt(s){return Object.prototype.toString.call(s)==="[object Object]"}class vt extends L{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===b.BINARY_EVENT;n||t.type===b.BINARY_ACK?(t.type=n?b.EVENT:b.ACK,this.reconstructor=new Nn(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(_t(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(b[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===b.BINARY_EVENT||n.type===b.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(r,t)}else n.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(vt.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case b.CONNECT:return Rt(t);case b.DISCONNECT:return t===void 0;case b.CONNECT_ERROR:return typeof t=="string"||Rt(t);case b.EVENT:case b.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Dn.indexOf(t[0])===-1);case b.ACK:case b.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Nn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=An(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Rn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:vt,Encoder:Bn,get PacketType(){return b},protocol:On},Symbol.toStringTag,{value:"Module"}));function z(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const xn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hs extends L{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[z(e,"open",this.onopen.bind(this)),z(e,"packet",this.onpacket.bind(this)),z(e,"error",this.onerror.bind(this)),z(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,i,r;if(xn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:b.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const c=this.ids++,h=t.pop();this._registerAckCallback(c,h),a.id=c}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(r),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,i)=>{const r=(a,o)=>a?i(a):n(o);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:b.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case b.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case b.EVENT:case b.BINARY_EVENT:this.onevent(e);break;case b.ACK:case b.BINARY_ACK:this.onack(e);break;case b.DISCONNECT:this.ondisconnect();break;case b.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:b.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:b.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function ge(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}ge.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};ge.prototype.reset=function(){this.attempts=0};ge.prototype.setMin=function(s){this.ms=s};ge.prototype.setMax=function(s){this.max=s};ge.prototype.setJitter=function(s){this.jitter=s};class at extends L{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,We(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ge({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||Rn;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new _n(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=z(t,"open",function(){n.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=z(t,"error",r);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(z(e,"ping",this.onping.bind(this)),z(e,"data",this.ondata.bind(this)),z(e,"error",this.onerror.bind(this)),z(e,"close",this.onclose.bind(this)),z(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){je(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new hs(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ve={};function $e(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=vn(s,e.path||"/socket.io"),n=t.source,i=t.id,r=t.path,a=ve[i]&&r in ve[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new at(n,e):(ve[i]||(ve[i]=new at(n,e)),l=ve[i]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign($e,{Manager:at,Socket:hs,io:$e,connect:$e});const R=$e("http://10.3.112.75:6912"),fe=[];function be(s,e=$){let t;const n=new Set;function i(o){if(te(s,o)&&(s=o,t)){const l=!fe.length;for(const u of n)u[1](),fe.push(u,s);if(l){for(let u=0;u<fe.length;u+=2)fe[u][0](fe[u+1]);fe.length=0}}}function r(o){i(o(s))}function a(o,l=$){const u=[o,l];return n.add(u),n.size===1&&(t=e(i,r)||$),o(s),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:a}}const se=be({id:"p1",name:"Peasant Boy",gender:"male",isTurn:!1,stats:{maxHealth:17,health:17,strength:11,defense:10,speed:9,stealth:8,intellect:12,perception:10,charisma:15},statusEffects:[],inventory:[]}),ne=be({id:"p2",name:"Peasant Girl",gender:"female",isTurn:!1,stats:{maxHealth:16,health:16,strength:8,defense:9,speed:10,stealth:12,intellect:11,perception:20,charisma:8},statusEffects:[],inventory:[]}),M=be({playingAs:"",bothPlayersJoined:!1,chapter5NumOfReadyPlayers:0,chapter11NumOfReadyPlayers:0,showDiceTerminal:!1,userDialogue:""}),ce=be("lobby"),S=be("1"),V=be({option1Visible:!0,option1Disabled:!0,option1:"Waiting...",option2Visible:!1,option2Disabled:!1,option2:"",option3Visible:!1,option3Disabled:!1,option3:"",inputVisible:!1});function Pn(s={player:{},chapter:"",part:"",optionSelected:0}){if(s.chapter==="lobby")switch(s.part){case"1":S.set("2"),V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"2":S.set("3");break;case"3":case"3-again":S.set("4"),V.set({option1Visible:!0,option1Disabled:!1,option1:"Yes",option2Visible:!0,option2Disabled:!1,option2:"No",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"4":s.optionSelected===1?(S.set("5"),R.emit("5-player-ready"),V.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})):s.optionSelected===2&&(S.set("3-again"),V.set({option1Visible:!0,option1Disabled:!1,option1:"Next But For Real This Time",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0}));break;case"5":S.set("6"),V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"6":S.set("7");break;case"7":S.set("8");break;case"8":S.set("9");break;case"9":S.set("10");break;case"10":S.set("11"),R.emit("11-player-ready"),V.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting for your dead weight teammate",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"11":S.set("12"),M.set({...F(M),showDiceTerminal:!0}),V.set({option1Visible:!0,option1Disabled:!0,option1:"Disabled During Demo",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"12":S.set("13"),V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"13":S.set("14"),M.set({...F(M),showDiceTerminal:!0}),V.set({option1Visible:!0,option1Disabled:!0,option1:"Disabled During Demo",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"14":S.set("15"),V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"15":S.set("16");break;case"16":S.set("17");break;case"17":S.set("18");break;case"18":ce.set("1"),S.set("1");break}else if(s.chapter==="1")switch(s.part){case"1":S.set("2"),s.player.gender==="male"?V.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting for Response",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1}):s.player.gender==="female"&&V.set({option1Visible:!0,option1Disabled:!1,option1:"Send Dialogue",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0});break;case"2":R.emit("set-chapter-1-part-3"),S.set("3"),V.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting for Response",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break;case"3":R.emit("set-chapter-1-part-4"),S.set("4"),V.set({option1Visible:!0,option1Disabled:!0,option1:"Waiting for Response",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1});break}}function xt(s={player:{}}){s.optionSelected=s.optionSelected??0;let e=["Something went wrong... This text should not display."];if(F(ce)==="lobby")switch(F(S)){case"1":e=["Welcome adventurer, this terminal is where the entire game takes place! As you may have gathered, this is the room in which we wait. We like to call it the waiting room, patent pending. Waiting for what you ask? Why, another adventurer! This tale needs 2 heroes of course."];break;case"2":e=["Looks like we found 2 trusty adventurers. Click 'Next' when you're ready!"];break;case"3":e=["Excellent, now let us differentiate the two of you. Please enter your name below and click 'Next' when you're ready."];break;case"3-again":e=["Oh good, I was hoping I didn't hear that correctly. What did you say your name actually was?"];break;case"4":e=[`You're name is... ${s.player.name}?`];break;case"5":e=["Great! Not the name of course, the fact that you're ready. When both of you are ready the button below will say 'Next', that means you're both ready to move forward."];break;case"6":e=[`Good, now let me introduce the two of you to each other. First we have ${F(se).name}${F(se).id===s.player.id?"(you)":""} playing as the male character. Next, we have ${F(ne).name}${F(ne).id===s.player.id?"(you)":""} playing as the female role.`];break;case"7":e=["Next, I'll explain the mechanics of the game. This game is more like an interactive multiplayer story with some DND elements. The only actions you'll be performing are selecting answers below (like 'Next') and rolling dice to decide outcomes. Select 'Next' to learn how dice rolling works."];break;case"8":e=[`Each player controls a unique character, these characters have different stats.
          For instance these are your character stats:
          <br>
          <br> <span class="color-blue">Name:</span> ${s.player.name}
          <br> <span class="color-blue">Gender:</span> ${s.player.gender}
          <br> <span class="color-blue">Health:</span> ${s.player.stats.maxHealth}
          <br> <span class="color-blue">Strength:</span> ${s.player.stats.strength}
          <br> <span class="color-blue">Defense:</span> ${s.player.stats.defense}
          <br> <span class="color-blue">Speed:</span> ${s.player.stats.speed}
          <br> <span class="color-blue">Intellect:</span> ${s.player.stats.intellect}
          <br> <span class="color-blue">Charisma:</span> ${s.player.stats.charisma}
          `];break;case"9":e=["These stats play a crucial role when it comes to events. Events are things that happen that require dice rolls or decisions to be made. For example, someone blocks your path and you need to roll for charisma. You need to push a heavy box so you roll for strength. Something falls on you so you roll for defense."];break;case"10":e=["When you roll, your base stat is added to the dice roll and that final number determines the outcome of the situation. If you're charisma is too low, you won't convince the person. Strength too low means you can't push that box. If your defense is too low you your health stat will suffer when something hurts you."];break;case"11":e=["When you're both ready, we'll move on and practice some dice rolls so you grasp the core mechanics of the game."];break;case"12":e=['"Next" available after dice terminal closes.'];break;case"13":e=[`That was a quick example of a dice roll using a <span class="color-red">D8</span> dice. There are several dice in the game:
          <br> <span class="color-blue">D4:</span> 4 sides from 1-4.
          <br> <span class="color-green">D6:</span> 6 sides from 1-6.
          <br> <span class="color-red">D8:</span> 8 sides from 1-8.
          <br> <span class="color-pink">D10:</span> 10 sides from 1-10.
          <br> <span class="color-purple">D12:</span> 12 sides from 1-12.
          <br> <span class="color-orange">D20:</span> 20 sides from 1-20.
          <br>
          <br>
          Usually, you will be rolling a <span class="color-orange">D20</span> dice but there are occassions where you will use the other dice. For instance, you roll a <span class="color-orange">D20</span> dice to jump over a gap and you are <span class="color-green">successful</span>. Then you roll a <span class="color-blue">D4</span> dice to see how successful you were. If it's a <span class="color-blue">1</span>, maybe you just barely made the jump where as if it was a <span class="color-blue">4</span> then you nailed the jump gracefully.
          <br>
          <br>
          Now, let's imagine a scenario where the building you are in catches 🔥<span class="color-red">fire</span>🔥 and as it's collapsing one of the support beams fall on your ally. You need to roll for strength to see if you can save them.
          `];break;case"14":e=['"Next" available after dice terminal closes.'];break;case"15":e=["In that example, you failed to roll high enough so you failed to save your ally, resulting in their death for the remainder of the story! Of course, it was impossible to roll a high enough number since this is a demo, but if this were the real game your ally would be dead!"];break;case"16":e=["That's it for the tutorial, you will be thrusted into the world shortly. Before you leave there's one last thing you should be aware of. You and your ally (the other player) will not always see the same messages in the terminal. You each have your strengths and weaknesses and will need to work together in order to beat the game (and enjoy a rad adventure along the way)."];break;case"17":s.player.gender==="male"?e=["For example, you are seeing this message because you are playing as the male character. The male role is misunderstood and begins in a position of power, you will notice a peasant girl(other player) who catches your eye, you should seek her out and speak to her as she will be your ally throughout the game and the spark that ignites your journey."]:s.player.gender==="female"&&(e=["For example, you are seeing this message because you are playing as the female character. The female role begins in poverty but is perceived as the true protagonist of the story. Although all hope may feel lost at first, you will soon find an ally(the other player) who will help you achieve your goals. He may seem callous initially, but he will prove to be a loyal and reliable ally. So, you would do good to befriend him."]);break;case"18":e=[`Alright then, I wish you the best of luck and enjoy the adventure you're about to set off on.
          <br>
          <br>
          Oh, you're curious to know who I am? I'm the terminal narrator, I'll be the one typing the messages and creating the game for you as we go, but that doesn't mean I'll help you! You 2 will need to manage on your own but I will be there to witness the triumph 🥳.
          <br> Good luck out there.
          <br>
          <br>
          <br>
          I hope you know what you're getting yourself into...
          `];break}else if(F(ce)==="1")switch(F(S)){case"1":s.player.gender==="male"?e=[`
            Fear has you paralyzed as sounds of yelling and griping could be heard from all directions. You gathered that by now you must be in the throne room, in the audience of the baron. In a swift motion you felt the bag removed from your head and your eyes adjusted to the light. Standing in front of you was the throne and sitting on it was the lord of the land, <MALE_PLAYER_NAME>.
            <br><br> You can't seem to find a voice as all those around you seem to have no issues using theirs. As you scan the room you notice people of all ages from small infants no older than 4 elders well into their 40s or even some potentially exceeding 50.
            <br><br> But among them there was one thing in common regardless of their age and that was the look of utter despair and contempt. There were people raging, crying, holding their loved ones, and some looked just like you, hollow and defeated.
            <br><br> Everything sounded gargled, faded away as if it was happening in the room beside you and didn't concern you at all, except it did. As you look back up at the Baron you wondered if he even noticed you. It was clear they were discussing your fate, but his eyes never seemed to find yours. Yet even as he looked away, there was something about him you could not shake.
            <br><br> Suddenly, your ears are able to decipher the noise as the herald announces your verdict. "She is to be sent to the dungeon to await execution. NEXT!". You hadn't even had the chance to speak, it seems they were already dismissing you before you could even plea. The court officials motioned the knights to remove you and as they did, you looked back once more at the Baron and to your surprise, his gaze finally met yours.
            <br><br> The knights escort you down to the dungeons where they throw you into a cell, promptly lock it and walk away. The only light that could be seen was a small candle that came from the hall and a small beam of light that shun through a hole in the wall. The hole was most likely meant to allow light and fresh air you initially though, but as you sat down there for hours you realized this was probably not the case.
            <br><br> The hole was just big enough that you could see through it and hear the outside world, but it was also big enough to see how thick the walls are and how hopless escape would be, while hearing the freedom of those on the other side.
            <br><br> As you sit in the company of yourself, you ponder your life and how you ended up here. It seems nothing but tragedy followed you and yet it always felt as if there was some sort of design, some sort of plan that awaits you. Something about that man, the baron, perhaps.
            <br><br> You wished now more than ever that the voice would speak to you, you begged for it to present itself to no avail. When you were younger, in times of a crisis there was always a voice that would guide you. But this voice was impossible to predict and seldom present. You never understood what the voice was, but always knew it had your best interests at heart.
            <br><br> You had wondered many times if you were crazy, if perhaps you created the voice as a child to protect yourself from loneliness, but no answer could be found. Still, even if there was no evidence, you believed the voice to be real and on your side.
            <br><br> Suddenly a loud noise was heard at the end of the hall. Was someone approaching you wondered. Soon after a rattling of metal could be heard and the prisoners were getting rowdy. Some were yelling, some were praising... It must be someone of nobility for sure you thought.
            <br><br> You feared perhaps they were coming for you to tell you it was time for your execution. You shuttered at the thought and tried to make yourself as small as possible. You planned to avoid all contact and simply bide your time in the prison until your execution. It felt as if the fight in you was all but gone and even death seemed inviting,
            <br><br> But in that moment, suddenly, you hear a voice speaking to you. You can tell it was not coming from outside but from within. It had been so long since you last heard it, but there was no mistaking it, the voice had returned if only to deliver a brief message. The voice was crystal clear, warm and familiar but stern.
            <br><br> "He has arrived." That is all it said. You turn to look at bars of your cell to find the Baron glaring back at you. His posture was firm and his eyes cold but his air was not menacing. He seemed displeased but inquisitive as well, it was very hard to read the face he was wearing.
            <br><br> You wondered if you should speak, perhaps that would make matters worse and it would be better to simply respond if spoken to. You survived by not asking questions and speaking when you were told. Bouncing from home to home until you finally found one willing to welcome you into theirs, you had learnt many lessons from many people but were never sure which to adhere to.
            <br><br> The crawling seconds felt like minutes as he continued to stare at you, but you couldn't help but to stare back. You were aware that this could be seen as a sign of aggression, but you found difficulty in looking away. "He's here", that's what the voice said right? Could it have meant him?
            <br><br> Suddenly, the baron began to speak and asked what your name is. But once again, you struggled to find your voice. This time however, it was due to more than just emotions. You had a name, but it was only given to you recently. You weren't sure if you should explain that or just tell him the name and wait for the next question.
            <br><br> You could see his impatience building and although you were already handed a death sentence, you feared making matters worse. You felt frozen in fear until suddenly the voice returned once again, but louder this time. "SPEAK"
            <br><br> You decide to obey the voice and answer the baron
          `]:s.player.gender==="female"&&(e=[`
            Sounds of yelling and griping could be heard from all around the audience chamber. Your eyes blur as fatigue settles in from a long day of hearing the pleas of others. The citizens may change but the requests are always the same.
            <br><br> Petitions for justice, for clemency or pardon, requests for tax relief or for better protection. Of course, there's always the complaints about corruption and poverty. They are like lobsters in a barrel, too much concern about themselves and the other lobsters but not enough about the barrel.
            <br><br> The beggars look to you for answers while simultaneously pointing their finger at you in contempt. They don't understand the struggles of nobility, of vassals. In their eyes you are an all powerful lord, but in the eyes of the king a simple Baron who exchanged loyalty for land.
            <br><br> If you were to pardon them all, you would surely and swiftly be removed from your throne. You are a puppet of the royal family, but nobody dare say it out loud. But, in what little power you do hold, you've managed to find complacency in it.
            <br><br> Still, you are aware that your present day struggles are certainly less than those on the other side of the audience chamber. Unfortunately, the king has delegated the ruling of the northern territories to the Duke and the Duke has given you explicit orders when it comes to delivering the verdicts on those who present themselves in the throne room with a request.
            <br><br> "You may only pardon 1 person a day, accept 1 request a day and must execute all thiefs that are brought for justice." The cruelty is less in the fact that you can only pardon one person a day, although this was not clear at first. The cruelty is deciding who deserves that pardon and most often not pardoning anyone because you weren't able to decide who truly deserved it.
            <br><br> There were times in the beginning wher eyou pardoned someone only to have a more tragic plea follow. Moreover, the king must be present for all hangings and various death sentences and must never look away as to set an example to the commoners.
            <br><br> This was deliberate torture and you knew it, but others would kill to sit where you sit and that too you were aware of. To show kindness is a weakness, you were told that often but never believed it. Unfortunately, the human mind and heart can only take so many killings, so many cruel verdicts, so many days as a callous lord.
            <br><br> Present days find you rather detached from it all. You look at the villagers and prisoners who plea but you do not see their face. Just another decision to be made, that's all they are to you. You feel as if you've had all the life slowly drained fomr you but are forced to go on living.
            <br><br> But one day a peasant villager entered the audience chamber and something about her caught your attention. It was hard to say what it was, she was not much to look at. Her clothes were ragged, skin coarse and her eyes defeated. She was the very embodiment of this town and yet, something about her stuck with you.
            <br><br> You delivered your sentence as usual, she was a thief so you sentenced her to execution, but even after she left it seems she remained in your mind. After all the villagers had been seen and it was time to retreat to your chambers, you decided to visit the dungeons in search for answers for your curiosity.
            <br><br> You wandered down the stairs as several knights pay their respects to you as you pass. "Slaves" you think to yourself, all puppets just like me, their saluts flies over my head, straight through all vassals and directly to the king for it is his crown that we all truly salute, not each other.
            <br><br> You reach the dungeon to find only 1 guard for all of the prisonners. There's never been a case of an escape and there are very few knights in the town so this wasn't unusual, yet still the thought that there is only one guard stays in your mind. You continue to walk passed all the sorry faces that glare back at you and those who dare not look your way.
            <br><br> Among them were also those not destined for death who would show you the utmost respect as you pass, as if that would in some way change their fate. As you walk you decide to unsheath the dagger from your belt and run it along the prison bars. This was meant to rattle the prisoners and make those awaiting trial or their public execution riddled with worry.
            <br><br> That was of course one of the many fear tactics you had picked up over the years. You weren't sure how effective it was, but you couldn't help but admit it was a bit of fun. Mostly, harmless fun, mostly. Finally, you arrive at the cell you were looking for. It's belonged to many although today it belongs to the one who caught your eyes.
            <br><br> You stared at her for some bit, she seemed to be looking back at you before you even found her, as if she was waiting for you or even expecting you. But she didn't speak a word, she just stared at you. Upon closer look you realized that she is actually much younger than you had first perceived.
            <br><br> She seemed to be about 20 perhaps, although she looked as if she was in her late 30's. You yourself are only 26, she might not be much younger. Still, the odds she would live past 30 were extremely low, even for a lord like yourself, living past 40 was extremely rare. You've hung plenty of children half her age so you weren't sure why her age felt important to you.
            <br><br> Finally, curiosity got the better of you and you decided to ask her name.',
            <br><br> MALE_PLAYER_NAME: My name is MALE_PLAYER_NAME, I am the baron of this land as you most certainly are aware. Now that I have introduced myself I wish to know your name.',
          `]);break;case"2":let t="Yes you made it to chapter 2 but u should see more";Pt().gender==="male"&&(t="Since you are waiting for a response, it is up to the other player to speak first."),Pt().gender==="female"&&(t="Since the other player is waiting for a response, it is up to you to speak first."),e=[`
          <span class="color-orange>*An open dialogue is beginning, when this happens you are free to talk with the other player via the terminal input at the bottom. You must take turns talking and replying. This is a good opportunity to get in character.</span>
          <br> ${t}
          `];break;case"3":e=[`${F(ne).name}: ${F(M).userDialogue}`];break;case"4":e=[`${F(se).name}: ${F(M).userDialogue}`];break}return e}function Vn(s={player:{}}){const e=s.player.stats[s.stat],t=s.dice.roll(),n=e+t,i=n-s.threshold>=0,r=i?"You were successful":"You were unsuccessful";return[`
    You are rolling a <span class="color-${Ln(s.dice.numOfSides)}">D${s.dice.numOfSides}</span> dice for your <span class="color-blue">${s.stat}</span> stat.
    <br> Your <span class="color-blue">${s.stat}</span> base stat is <span class="color-blue">${e}</span>.
    <br> You need a total of at least <span class="color-blue">${s.threshold}</span>.
    <br> You roll the dice and get a <span class="color-blue">${t}</span>!
    <br> <span class="color-blue">${t}(roll)</span> + <span class="color-blue">${e}(${s.stat})</span> gives you a total of <span class="color-blue stat-roll-result">${n}</span>.
    <br> <span class="color-${i?"green":"red"}">${r}</span>
  `]}function Ln(s){if(s===4)return"green";if(s===6)return"blue";if(s===8)return"red";if(s===10)return"pink";if(s===12)return"purple";if(s===20)return"orange"}function Pt(){return F(M).playingAs==="male"?F(se):F(ne)}function $n(s){let e,t,n,i;return t=new vi({props:{currentGameState:M,dialogueOptions:V,updateTerminalReqFromParent:s[0],terminalColor:"grey"}}),{c(){e=A("div"),J(t.$$.fragment),d(e,"class","main-content svelte-abemhi")},m(r,a){x(r,e,a),j(t,e,null),i=!0},p(r,[a]){const o={};a&1&&(o.updateTerminalReqFromParent=r[0]),t.$set(o)},i(r){i||(v(t.$$.fragment,r),r&&(n||K(()=>{n=mt(e,me,{}),n.start()})),i=!0)},o(r){B(t.$$.fragment,r),i=!1},d(r){r&&D(e),W(t)}}}function In(s,e,t){let n,i,r;X(s,ne,o=>t(1,n=o)),X(s,se,o=>t(2,i=o)),X(s,M,o=>t(3,r=o));let a=!1;return dt(()=>{R.on("connect",()=>{R.emit("frontend-mounted"),console.log(`User ID: ${R.id} connected!`)}),R.on("playing-as",o=>{R.id===o.socketID&&o.playerCount===1&&M.set({...r,playingAs:"male"}),R.id===o.socketID&&o.playerCount===2&&M.set({...r,playingAs:"female"}),console.log("Playing as "+r.playingAs),console.log("Socket.id = "+R.id),console.log("data.socketID = "+o.socketID)}),R.on("connect_error",o=>console.error("Connection error:",o)),R.on("p2-joined",()=>M.set({...r,bothPlayersJoined:!0})),R.on("set-users",o=>{Object.entries(o).forEach(([l,u])=>{se.update(c=>(c.id=o.p1,c)),ne.update(c=>(c.id=o.p2,c))})}),R.on("5-player-ready",()=>{M.set({...r,chapter5NumOfReadyPlayers:Tt(M,r.chapter5NumOfReadyPlayers+=1,r)}),r.chapter5NumOfReadyPlayers===2&&V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),R.on("11-player-ready",()=>{M.set({...r,chapter11NumOfReadyPlayers:Tt(M,r.chapter11NumOfReadyPlayers+=1,r)}),r.chapter11NumOfReadyPlayers===2&&V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}),R.on("set-chapter-1-part-3",o=>{ce.set("1"),S.set("3"),M.set({...r,userDialogue:o}),V.set({option1Visible:!0,option1Disabled:!1,option1:"Send Dialogue",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0}),t(0,a=!0)}),R.on("set-chapter-1-part-4",o=>{ce.set("1"),S.set("4"),M.set({...r,userDialogue:o}),V.set({option1Visible:!0,option1Disabled:!1,option1:"Send Dialogue",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!0}),t(0,a=!0)}),R.on("set-male-player-name",o=>se.set({...i,name:o||"Peasant Boy"})),R.on("set-female-player-name",o=>ne.set({...n,name:o||"Peasant Girl"})),R.emit("client-ready")}),[a]}class qn extends re{constructor(e){super(),ie(this,e,In,$n,te,{})}}function Mn(s){let e,t,n,i,r,a,o,l;return t=new di({props:{sidebarExpanded:s[0]}}),t.$on("select",s[2]),t.$on("toggle-sidebar",s[4]),r=new qn({}),{c(){e=A("div"),J(t.$$.fragment),n=U(),i=A("div"),J(r.$$.fragment),d(i,"class","screen svelte-1o90n00"),d(e,"class",a="client bg-"+s[1]+" svelte-1o90n00"),oe(e,"client-collapsed",!s[0])},m(u,c){x(u,e,c),j(t,e,null),g(e,n),g(e,i),j(r,i,null),l=!0},p(u,[c]){const h={};c&1&&(h.sidebarExpanded=u[0]),t.$set(h),(!l||c&2&&a!==(a="client bg-"+u[1]+" svelte-1o90n00"))&&d(e,"class",a),(!l||c&3)&&oe(e,"client-collapsed",!u[0])},i(u){l||(v(t.$$.fragment,u),v(r.$$.fragment,u),u&&(o||K(()=>{o=mt(e,me,{duration:2e3}),o.start()})),l=!0)},o(u){B(t.$$.fragment,u),B(r.$$.fragment,u),l=!1},d(u){u&&D(e),W(t),W(r)}}}function Fn(s,e,t){let n;X(s,ce,l=>t(3,n=l));let i=!1,r="";function a(l){l.detail}const o=()=>t(0,i=!i);return s.$$.update=()=>{s.$$.dirty&8&&n==="1"&&setTimeout(()=>t(1,r="audience-chamber"),1e4)},[i,r,a,n,o]}class Yn extends re{constructor(e){super(),ie(this,e,Fn,Mn,te,{})}}function Un(s){let e,t;return{c(){e=A("div"),d(e,"class",t="dice dice-d"+s[0].numOfSides+" svelte-w3nifx"),d(e,"role","img"),d(e,"aria-label","One 4-sided dice")},m(n,i){x(n,e,i)},p(n,[i]){i&1&&t!==(t="dice dice-d"+n[0].numOfSides+" svelte-w3nifx")&&d(e,"class",t)},i:$,o:$,d(n){n&&D(e)}}}function Hn(s,e,t){let{dice:n}=e;return s.$$set=i=>{"dice"in i&&t(0,n=i.dice)},[n]}class jn extends re{constructor(e){super(),ie(this,e,Hn,Un,te,{dice:0})}}function lt(){return lt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},lt.apply(this,arguments)}var Wn={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(s){},onComplete:function(s){},preStringTyped:function(s,e){},onStringTyped:function(s,e){},onLastStringBackspaced:function(s){},onTypingPaused:function(s,e){},onTypingResumed:function(s,e){},onReset:function(s){},onStop:function(s,e){},onStart:function(s,e){},onDestroy:function(s){}},zn=new(function(){function s(){}var e=s.prototype;return e.load=function(t,n,i){if(t.el=typeof i=="string"?document.querySelector(i):i,t.options=lt({},Wn,n),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(u){return u.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),a=r.length;if(a)for(var o=0;o<a;o+=1)t.strings.push(r[o].innerHTML.trim())}for(var l in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[l]=l;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var n="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+n+"]")){var i=document.createElement("style");i.setAttribute(n,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(t){var n="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+n+"]")){var i=document.createElement("style");i.setAttribute(n,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},s}()),Vt=new(function(){function s(){}var e=s.prototype;return e.typeHtmlChars=function(t,n,i){if(i.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r==="<"||r==="&"){var a;for(a=r==="<"?">":";";t.substring(n+1).charAt(0)!==a&&!(1+ ++n>t.length););n++}return n},e.backSpaceHtmlChars=function(t,n,i){if(i.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r===">"||r===";"){var a;for(a=r===">"?"<":"&";t.substring(n-1).charAt(0)!==a&&!(--n<0););n--}return n},s}()),ut=function(){function s(t,n){zn.load(this,n,t),this.begin()}var e=s.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,n){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),a=1;this.pause.status!==!0?this.timeout=setTimeout(function(){n=Vt.typeHtmlChars(t,n,i);var o=0,l=t.substring(n);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var u=1;u+=(l=/\d+/.exec(l)[0]).length,o=parseInt(l),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),t=t.substring(0,n)+t.substring(n+u),i.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;t.substring(n+a).charAt(0)!=="`"&&(a++,!(n+a>t.length)););var c=t.substring(0,n),h=t.substring(c.length+1,n+a),f=t.substring(n+a+1);t=c+h+f,a--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),n>=t.length?i.doneTyping(t,n):i.keepTyping(t,n,a),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},o)},r):this.setPauseStatus(t,n,!0)},e.keepTyping=function(t,n,i){n===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,n+=i);this.replaceText(r),this.typewrite(t,n)},e.doneTyping=function(t,n){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(t,n)},this.backDelay))},e.backspace=function(t,n){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){n=Vt.backSpaceHtmlChars(t,n,i);var a=t.substring(0,n);if(i.replaceText(a),i.smartBackspace){var o=i.strings[i.arrayPos+1];i.stopNum=o&&a===o.substring(0,n)?n:0}n>i.stopNum?(n--,i.backspace(t,n)):n<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],n))},r)}else this.setPauseStatus(t,n,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,n,i){this.pause.typewrite=i,this.pause.curString=t,this.pause.curStrPos=n},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(n){t.stop()}),this.el.addEventListener("blur",function(n){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},s}();function Gn(s){let e;return{c(){e=G("Okay")},m(t,n){x(t,e,n)},d(t){t&&D(e)}}}function Kn(s){let e,t,n,i,r,a,o,l,u,c,h;return n=new jn({props:{dice:s[0]}}),u=new He({props:{btnType:"terminal-option",$$slots:{default:[Gn]},$$scope:{ctx:s}}}),u.$on("click",s[3]),{c(){e=A("div"),t=A("div"),J(n.$$.fragment),i=U(),r=A("div"),a=A("p"),o=U(),l=A("div"),J(u.$$.fragment),d(t,"class","dice-wrapper svelte-5p87ss"),d(a,"id","dice-terminal-text"),d(r,"class","terminal-text svelte-5p87ss"),d(l,"class","terminal-btn svelte-5p87ss"),d(e,"class","dice-terminal svelte-5p87ss")},m(f,m){x(f,e,m),g(e,t),j(n,t,null),g(e,i),g(e,r),g(r,a),a.innerHTML=s[2],g(e,o),g(e,l),j(u,l,null),h=!0},p(f,[m]){const p={};m&1&&(p.dice=f[0]),n.$set(p),(!h||m&4)&&(a.innerHTML=f[2]);const y={};m&2048&&(y.$$scope={dirty:m,ctx:f}),u.$set(y)},i(f){h||(v(n.$$.fragment,f),v(u.$$.fragment,f),f&&K(()=>{h&&(c||(c=Ye(e,At,{},!0)),c.run(1))}),h=!0)},o(f){B(n.$$.fragment,f),B(u.$$.fragment,f),f&&(c||(c=Ye(e,At,{},!1)),c.run(0)),h=!1},d(f){f&&D(e),W(n),W(u),f&&c&&c.end()}}}function Jn(s,e,t){let n,i=$,r=()=>(i(),i=Ce(u,y=>t(7,n=y)),u),a,o;X(s,ne,y=>t(8,a=y)),X(s,se,y=>t(9,o=y)),s.$$.on_destroy.push(()=>i());let{dice:l}=e,{currentGameState:u}=e;r();let{playerStat:c}=e,{statThreshold:h}=e,f=[""];dt(()=>{t(2,f=Vn({player:m(),dice:l,stat:c,threshold:h})),new ut("#dice-terminal-text",{strings:f,typeSpeed:30,backSpeed:10,backDelay:2e3})});function m(){return n.playingAs==="male"?o:a}function p(){u.set({...n,showDiceTerminal:!1}),V.set({option1Visible:!0,option1Disabled:!1,option1:"Next",option2Visible:!1,option2Disabled:!0,option2:"",option3Visible:!1,option3Disabled:!0,option3:"",inputVisible:!1})}return s.$$set=y=>{"dice"in y&&t(0,l=y.dice),"currentGameState"in y&&r(t(1,u=y.currentGameState)),"playerStat"in y&&t(4,c=y.playerStat),"statThreshold"in y&&t(5,h=y.statThreshold)},[l,u,f,p,c,h]}class Xn extends re{constructor(e){super(),ie(this,e,Jn,Kn,te,{dice:0,currentGameState:1,playerStat:4,statThreshold:5})}}const Qn=s=>({}),Lt=s=>({}),Zn=s=>({}),$t=s=>({});function ei(s){let e,t,n,i;return{c(){e=Y("svg"),t=Y("circle"),n=Y("path"),i=Y("path"),d(t,"cx","12"),d(t,"cy","12"),d(t,"r","10"),d(n,"d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"),d(i,"d","M12 17h.01"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 24 24"),d(e,"class","icon svelte-16xfpde")},m(r,a){x(r,e,a),g(e,t),g(e,n),g(e,i)},d(r){r&&D(e)}}}function ti(s){let e,t,n;return{c(){e=Y("svg"),t=Y("polyline"),n=Y("line"),d(t,"points","4 17 10 11 4 5"),d(n,"x1","12"),d(n,"x2","20"),d(n,"y1","19"),d(n,"y2","19"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 24 24"),d(e,"class","icon svelte-16xfpde")},m(i,r){x(i,e,r),g(e,t),g(e,n)},d(i){i&&D(e)}}}function si(s){let e,t,n;return{c(){e=Y("svg"),t=Y("path"),n=Y("circle"),d(t,"d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"),d(n,"cx","12"),d(n,"cy","7"),d(n,"r","4"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 24 24"),d(e,"class","icon svelte-16xfpde")},m(i,r){x(i,e,r),g(e,t),g(e,n)},d(i){i&&D(e)}}}function ni(s){let e,t,n;return{c(){e=Y("svg"),t=Y("path"),n=Y("path"),d(t,"d","M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"),d(n,"d","M5.341 10.62a4 4 0 1 0 5.279-5.28"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 24 24"),d(e,"class","icon svelte-16xfpde")},m(i,r){x(i,e,r),g(e,t),g(e,n)},d(i){i&&D(e)}}}function It(s){let e,t,n,i,r,a,o;const l=s[4].title,u=Xe(l,s,s[3],$t),c=u||ii(),h=s[4].description,f=Xe(h,s,s[3],Lt),m=f||ri();return{c(){e=A("div"),t=A("h2"),c&&c.c(),n=U(),i=A("p"),m&&m.c(),d(t,"class","item-title svelte-16xfpde"),d(i,"class","item-text svelte-16xfpde"),d(e,"class","item-text-wrapper svelte-16xfpde")},m(p,y){x(p,e,y),g(e,t),c&&c.m(t,null),g(e,n),g(e,i),m&&m.m(i,null),o=!0},p(p,y){u&&u.p&&(!o||y&8)&&Ze(u,l,p,p[3],o?Qe(l,p[3],y,Zn):et(p[3]),$t),f&&f.p&&(!o||y&8)&&Ze(f,h,p,p[3],o?Qe(h,p[3],y,Qn):et(p[3]),Lt)},i(p){o||(v(c,p),v(m,p),p&&K(()=>{o&&(a&&a.end(1),r=mt(e,me,{duration:500}),r.start())}),o=!0)},o(p){B(c,p),B(m,p),r&&r.invalidate(),p&&(a=Ps(e,me,{duration:250})),o=!1},d(p){p&&D(e),c&&c.d(p),m&&m.d(p),p&&a&&a.end()}}}function ii(s){let e;return{c(){e=G("Title")},m(t,n){x(t,e,n)},d(t){t&&D(e)}}}function ri(s){let e;return{c(){e=G("Brief description")},m(t,n){x(t,e,n)},d(t){t&&D(e)}}}function oi(s){let e,t,n,i,r,a;function o(h,f){return h[0]==="seed"?ni:h[0]==="player"?si:h[0]==="terminal"?ti:ei}let l=o(s),u=l(s),c=!s[2]&&It(s);return{c(){e=A("div"),u.c(),t=U(),c&&c.c(),d(e,"class",n="item item-color__"+s[1]+" svelte-16xfpde")},m(h,f){x(h,e,f),u.m(e,null),g(e,t),c&&c.m(e,null),i=!0,r||(a=Ae(e,"click",s[5]),r=!0)},p(h,[f]){l!==(l=o(h))&&(u.d(1),u=l(h),u&&(u.c(),u.m(e,t))),h[2]?c&&(ke(),B(c,1,1,()=>{c=null}),Te()):c?(c.p(h,f),f&4&&v(c,1)):(c=It(h),c.c(),v(c,1),c.m(e,null)),(!i||f&2&&n!==(n="item item-color__"+h[1]+" svelte-16xfpde"))&&d(e,"class",n)},i(h){i||(v(c),i=!0)},o(h){B(c),i=!1},d(h){h&&D(e),u.d(),c&&c.d(),r=!1,a()}}}function ai(s,e,t){let{$$slots:n={},$$scope:i}=e,{iconType:r="unkown"}=e,{color:a="grey"}=e,{collapsed:o=!1}=e;function l(u){Xt.call(this,s,u)}return s.$$set=u=>{"iconType"in u&&t(0,r=u.iconType),"color"in u&&t(1,a=u.color),"collapsed"in u&&t(2,o=u.collapsed),"$$scope"in u&&t(3,i=u.$$scope)},[r,a,o,i,n,l]}class li extends re{constructor(e){super(),ie(this,e,ai,oi,te,{iconType:0,color:1,collapsed:2})}}function ui(s){let e;return{c(){e=A("span"),e.textContent="Log",d(e,"slot","title")},m(t,n){x(t,e,n)},p:$,d(t){t&&D(e)}}}function ci(s){let e;return{c(){e=A("span"),e.textContent="View logged messages",d(e,"slot","description")},m(t,n){x(t,e,n)},p:$,d(t){t&&D(e)}}}function hi(s){let e,t,n,i,r,a,o,l,u;return a=new li({props:{collapsed:!s[0],color:"white",iconType:"terminal",$$slots:{description:[ci],title:[ui]},$$scope:{ctx:s}}}),a.$on("click",s[3]),{c(){e=A("div"),t=Y("svg"),n=Y("path"),i=Y("path"),r=U(),J(a.$$.fragment),d(n,"d","M19 15V9"),d(i,"d","M15 15h-3v4l-7-7 7-7v4h3v6z"),d(t,"class","icon collapse-icon svelte-1tpwflx"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),oe(t,"rotate",!s[0]),d(e,"class","sidebar svelte-1tpwflx"),oe(e,"sidebar-collapsed",!s[0]),oe(e,"sidebar-expanded",s[0])},m(c,h){x(c,e,h),g(e,t),g(t,n),g(t,i),g(e,r),j(a,e,null),o=!0,l||(u=Ae(t,"click",s[2]),l=!0)},p(c,[h]){(!o||h&1)&&oe(t,"rotate",!c[0]);const f={};h&1&&(f.collapsed=!c[0]),h&16&&(f.$$scope={dirty:h,ctx:c}),a.$set(f),(!o||h&1)&&oe(e,"sidebar-collapsed",!c[0]),(!o||h&1)&&oe(e,"sidebar-expanded",c[0])},i(c){o||(v(a.$$.fragment,c),o=!0)},o(c){B(a.$$.fragment,c),o=!1},d(c){c&&D(e),W(a),l=!1,u()}}}function fi(s,e,t){let{sidebarExpanded:n=!0}=e;const i=Os(),r=()=>i("toggle-sidebar"),a=()=>i("select","log");return s.$$set=o=>{"sidebarExpanded"in o&&t(0,n=o.sidebarExpanded)},[n,i,r,a]}class di extends re{constructor(e){super(),ie(this,e,fi,hi,te,{sidebarExpanded:0})}}class fs{constructor(e,t){we(this,"numOfSides");we(this,"imgUrl");this.numOfSides=e,this.imgUrl=t}roll(){return Math.ceil(Math.random()*this.numOfSides)}}let pi=new fs(8,"d8-dice.png"),yi=new fs(20,"d20-dice.png");function qt(s){let e,t;return e=new Xn({props:{currentGameState:s[1],dice:s[8],playerStat:s[9],statThreshold:s[10]}}),{c(){J(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const r={};i&2&&(r.currentGameState=n[1]),i&256&&(r.dice=n[8]),i&512&&(r.playerStat=n[9]),i&1024&&(r.statThreshold=n[10]),e.$set(r)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function Mt(s){let e,t;return e=new He({props:{btnType:"terminal-option",disabled:s[6].option1Disabled,$$slots:{default:[mi]},$$scope:{ctx:s}}}),e.$on("click",s[15]),{c(){J(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const r={};i&64&&(r.disabled=n[6].option1Disabled),i&16777280&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function mi(s){let e=s[6].option1+"",t;return{c(){t=G(e)},m(n,i){x(n,t,i)},p(n,i){i&64&&e!==(e=n[6].option1+"")&&De(t,e)},d(n){n&&D(t)}}}function Ft(s){let e,t;return e=new He({props:{btnType:"terminal-option",disabled:s[6].option2Disabled,$$slots:{default:[gi]},$$scope:{ctx:s}}}),e.$on("click",s[16]),{c(){J(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const r={};i&64&&(r.disabled=n[6].option2Disabled),i&16777280&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function gi(s){let e=s[6].option2+"",t;return{c(){t=G(e)},m(n,i){x(n,t,i)},p(n,i){i&64&&e!==(e=n[6].option2+"")&&De(t,e)},d(n){n&&D(t)}}}function Yt(s){let e,t;return e=new He({props:{btnType:"terminal-option",disabled:s[6].option3Disabled,$$slots:{default:[bi]},$$scope:{ctx:s}}}),e.$on("click",s[17]),{c(){J(e.$$.fragment)},m(n,i){j(e,n,i),t=!0},p(n,i){const r={};i&64&&(r.disabled=n[6].option3Disabled),i&16777280&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function bi(s){let e=s[6].option3+"",t;return{c(){t=G(e)},m(n,i){x(n,t,i)},p(n,i){i&64&&e!==(e=n[6].option3+"")&&De(t,e)},d(n){n&&D(t)}}}function Ut(s){let e,t,n;return{c(){e=A("input"),d(e,"type","text"),d(e,"maxlength",s[11]),d(e,"class","terminal-input svelte-w75q23")},m(i,r){x(i,e,r),Et(e,s[7]),t||(n=[Ae(e,"input",s[18]),Ae(e,"input",s[13])],t=!0)},p(i,r){r&2048&&d(e,"maxlength",i[11]),r&128&&e.value!==i[7]&&Et(e,i[7])},d(i){i&&D(e),t=!1,le(n)}}}function wi(s){let e,t,n,i,r,a,o,l,u,c,h,f,m,p,y,T,k,P,_=s[3].showDiceTerminal&&qt(s),E=s[6].option1Visible&&Mt(s),C=s[6].option2Visible&&Ft(s),O=s[6].option3Visible&&Yt(s),I=s[6].inputVisible&&Ut(s);return{c(){e=A("div"),t=A("div"),n=A("p"),i=G("Chapter "),r=G(s[5]),a=G(": part "),o=G(s[4]),l=U(),u=A("p"),c=U(),_&&_.c(),h=U(),f=A("div"),E&&E.c(),m=U(),C&&C.c(),p=U(),O&&O.c(),y=U(),I&&I.c(),d(u,"id","terminal-text"),d(u,"class","svelte-w75q23"),d(t,"class","terminal-screen svelte-w75q23"),d(f,"class","terminal-option-flex-group"),d(e,"class",T="terminal terminal__"+s[0]+" svelte-w75q23")},m(w,q){x(w,e,q),g(e,t),g(t,n),g(n,i),g(n,r),g(n,a),g(n,o),g(t,l),g(t,u),g(t,c),_&&_.m(t,null),g(e,h),g(e,f),E&&E.m(f,null),g(f,m),C&&C.m(f,null),g(f,p),O&&O.m(f,null),g(f,y),I&&I.m(f,null),P=!0},p(w,[q]){(!P||q&32)&&De(r,w[5]),(!P||q&16)&&De(o,w[4]),w[3].showDiceTerminal?_?(_.p(w,q),q&8&&v(_,1)):(_=qt(w),_.c(),v(_,1),_.m(t,null)):_&&(ke(),B(_,1,1,()=>{_=null}),Te()),w[6].option1Visible?E?(E.p(w,q),q&64&&v(E,1)):(E=Mt(w),E.c(),v(E,1),E.m(f,m)):E&&(ke(),B(E,1,1,()=>{E=null}),Te()),w[6].option2Visible?C?(C.p(w,q),q&64&&v(C,1)):(C=Ft(w),C.c(),v(C,1),C.m(f,p)):C&&(ke(),B(C,1,1,()=>{C=null}),Te()),w[6].option3Visible?O?(O.p(w,q),q&64&&v(O,1)):(O=Yt(w),O.c(),v(O,1),O.m(f,y)):O&&(ke(),B(O,1,1,()=>{O=null}),Te()),w[6].inputVisible?I?I.p(w,q):(I=Ut(w),I.c(),I.m(f,null)):I&&(I.d(1),I=null),(!P||q&1&&T!==(T="terminal terminal__"+w[0]+" svelte-w75q23"))&&d(e,"class",T)},i(w){P||(v(_),v(E),v(C),v(O),w&&K(()=>{P&&(k||(k=Ye(e,me,{duration:1e3},!0)),k.run(1))}),P=!0)},o(w){B(_),B(E),B(C),B(O),w&&(k||(k=Ye(e,me,{duration:1e3},!1)),k.run(0)),P=!1},d(w){w&&D(e),_&&_.d(),E&&E.d(),C&&C.d(),O&&O.d(),I&&I.d(),w&&k&&k.end()}}}function _i(s,e,t){let n,i,r=$,a=()=>(r(),r=Ce(y,N=>t(3,i=N)),y),o,l,u,c,h,f=$,m=()=>(f(),f=Ce(T,N=>t(6,h=N)),T);X(s,S,N=>t(4,o=N)),X(s,ce,N=>t(5,l=N)),X(s,ne,N=>t(20,u=N)),X(s,se,N=>t(21,c=N)),s.$$.on_destroy.push(()=>r()),s.$$.on_destroy.push(()=>f());let{terminalColor:p="grey"}=e,{currentGameState:y}=e;a();let{dialogueOptions:T}=e;m();let{updateTerminalReqFromParent:k=!1}=e,P,_="",E=xt({player:q()}),C=pi,O,I=0;dt(()=>{P=new ut("#terminal-text",{strings:E,typeSpeed:20})});function w(N,Ei=!1){Pn({player:q(),chapter:l,part:o,optionSelected:N}),P.destroy(),P=new ut("#terminal-text",{strings:xt({player:q(),optionSelected:N}),typeSpeed:20,backSpeed:10,backDelay:2e3})}function q(){return i.playingAs==="male"?c:u}function ds(){(l==="lobby"&&o==="3"||o==="3-again")&&(i.playingAs==="male"?R.emit("set-male-player-name",_.trim()):R.emit("set-female-player-name",_.trim())),y.set({...i,userDialogue:_.trim()})}const ps=()=>w(1),ys=()=>w(2),ms=()=>w(3);function gs(){_=this.value,t(7,_)}return s.$$set=N=>{"terminalColor"in N&&t(0,p=N.terminalColor),"currentGameState"in N&&a(t(1,y=N.currentGameState)),"dialogueOptions"in N&&m(t(2,T=N.dialogueOptions)),"updateTerminalReqFromParent"in N&&t(14,k=N.updateTerminalReqFromParent)},s.$$.update=()=>{s.$$.dirty&32&&t(11,n=l==="lobby"?20:200),s.$$.dirty&124&&i.bothPlayersJoined&&l==="lobby"&&o==="1"&&T.set({...h,option1Disabled:!1,option1:"Ready"}),s.$$.dirty&56&&i.goToChapter6&&l==="lobby"&&o==="5"&&w(0),s.$$.dirty&48&&l==="lobby"&&o==="12"&&(t(9,O="defense"),t(10,I=7)),s.$$.dirty&48&&l==="lobby"&&o==="14"&&(t(9,O="strength"),t(10,I=40),t(8,C=yi)),s.$$.dirty&16432&&k&&l==="1"&&["3","4"].includes(o)&&(w(1),t(14,k=!1))},[p,y,T,i,o,l,h,_,C,O,I,n,w,ds,k,ps,ys,ms,gs]}class vi extends re{constructor(e){super(),ie(this,e,_i,wi,te,{terminalColor:0,currentGameState:1,dialogueOptions:2,updateTerminalReqFromParent:14})}}function ki(s){let e,t,n;return t=new Yn({}),{c(){e=A("main"),J(t.$$.fragment),d(e,"class","main-content svelte-kn45eq")},m(i,r){x(i,e,r),j(t,e,null),n=!0},p:$,i(i){n||(v(t.$$.fragment,i),n=!0)},o(i){B(t.$$.fragment,i),n=!1},d(i){i&&D(e),W(t)}}}class Ti extends re{constructor(e){super(),ie(this,e,null,ki,te,{})}}new Ti({target:document.getElementById("app")});
